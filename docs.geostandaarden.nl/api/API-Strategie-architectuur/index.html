<!DOCTYPE html><html lang="nl"><!-- HTML-Header ============================================================================== --><head><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta content="text/html; charset=utf-8" http-equiv="content-type"><meta name="generator" content="ReSpec 24.5.2">
    
    
    <!-- Invullen: de titel van de standaard of het document ==================================== -->
    <title>API Strategie Algemeen (Module Architectuur)</title>
    <!-- Invullen: de naam van de lokale CSS file =============================================== -->
    <link href="media/style.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">
    
    
<!-- ============================================================================================ -->
<!-- File. . . :  index.html                                                                      -->
<!-- Bevat . . :  Template voor de index.html die verplicht is voor respec                        -->
<!--              Gebaseerd op https://github.com/Geonovum/respec/wiki                            -->
<!--              Deze file moet worden neergezet in de root-directory van de                     -->
<!--              betreffende standaard.                                                          -->
<!-- Door. . . :  Jan van Gelder                                                                  -->
<!-- ============================================================================================ -->
<!-- ============================================================================================ -->
<!-- Log . . . :  20181015 - JvG - Initiele versie                                                -->
<!--
====================================================================================================
0        1         2         3         4         5         6         7         8         9         0
1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
================================================================================================= -->

  <style id="respec-mainstyle">/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

#references :target {
  background: #eaf3ff;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd>p:first-child {
  margin-top: 0;
}

.section dd>p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary>ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details>* {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: 0.3em;
  background-color: white;
  padding-bottom: 0.5em;
}

details.respec-tests-details[open]>summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details>ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details>li {
  padding-left: 1em;
}

a[href].self-link:hover {
  opacity: 1;
  text-decoration: none;
  background-color: transparent;
}

h2,
h3,
h4,
h5,
h6 {
  position: relative;
}

aside.example .marker > a.self-link {
  color: inherit;
}

h2>a.self-link,
h3>a.self-link,
h4>a.self-link,
h5>a.self-link,
h6>a.self-link {
  border: none;
  color: inherit;
  font-size: 83%;
  height: 2em;
  left: -1.6em;
  opacity: .5;
  position: absolute;
  text-align: center;
  text-decoration: none;
  top: 0;
  transition: opacity .2s;
  width: 2em;
}

h2>a.self-link::before,
h3>a.self-link::before,
h4>a.self-link::before,
h5>a.self-link::before,
h6>a.self-link::before {
  content: "§";
  display: block;
}

@media (max-width: 767px) {
  dd {
    margin-left: 0;
  }

  /* Don't position self-link in headings off-screen */
  h2>a.self-link,
  h3>a.self-link,
  h4>a.self-link,
  h5>a.self-link,
  h6>a.self-link {
    left: auto;
    top: auto;
  }
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style><link rel="stylesheet" href="https://tools.geostandaarden.nl/respec/style/GN-VV.css"><link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico"><script id="initialUserConfig" type="application/json">{
  "specStatus": "GN-VV",
  "specType": "HR",
  "pubDomain": "api",
  "previousPublishDate": "2022-03-09",
  "previousMaturity": "GN-DEF",
  "edDraftURI": "https://geonovum.github.io/KP-APIs/API-strategie-algemeen/Architectuur/",
  "editors": [
    {
      "name": "Frank Terpstra",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl/"
    },
    {
      "name": "Jan van Gelder",
      "company": "Geonovum",
      "companyURL": "https://www.Geonovum.nl/"
    },
    {
      "name": "Martin van der Plas",
      "company": "Logius",
      "companyURL": "https://logius.nl/"
    }
  ],
  "authors": [
    {
      "name": "Lancelot Schellevis",
      "company": "Forum Standaardisatie",
      "companyURL": "https://www.forumstandaardisatie.nl/"
    },
    {
      "name": "Han Zuidweg",
      "company": "Forum Standaardisatie",
      "companyURL": "https://www.forumstandaardisatie.nl/"
    },
    {
      "name": "Friso Penninga",
      "company": "Geonovum",
      "companyURL": "https://geonovum.nl/"
    },
    {
      "name": "Matthias Snoei",
      "company": "Swis",
      "companyURL": "https://swis.nl/"
    },
    {
      "name": "Jasper Roes",
      "company": "Het Kadaster",
      "companyURL": "https://www.kadaster.nl/"
    },
    {
      "name": "Peter Haasnoot",
      "company": "Logius",
      "companyURL": "https://logius.nl/"
    },
    {
      "name": "Frank van Es",
      "company": "Logius",
      "companyURL": "https://logius.nl/"
    },
    {
      "name": "Martin van der Plas",
      "company": "Logius",
      "companyURL": "https://logius.nl/"
    },
    {
      "name": "Dennis de Wit",
      "company": "Solventa",
      "companyURL": "https://www.solventa.nl"
    }
  ],
  "shortName": "API-Strategie-architectuur",
  "github": "https://github.com/geonovum/KP-APIs/",
  "issueBase": "https://github.com/geonovum/KP-APIs/issues/",
  "localBiblio": {
    "OAuth2": {
      "href": "https://tools.ietf.org/html/rfc6749",
      "title": "The OAuth 2.0 Authorization Framework",
      "authors": [
        "D. Hardt"
      ],
      "date": "October 2012",
      "publisher": "The Internet Engineering Task Force"
    },
    "Expert": {
      "href": "https://www.forumstandaardisatie.nl/sites/bfs/files/Expertadvies%20OAuth%202.0.pdf",
      "title": "Expertadvies OAuth 2.0",
      "authors": [
        "P. Dam"
      ],
      "date": "24 februari 2017",
      "publisher": "Forum Standaardisatie"
    },
    "JWT": {
      "href": "https://tools.ietf.org/html/rfc7519",
      "title": "JSON Web Token (JWT)",
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWS": {
      "href": "https://tools.ietf.org/html/rfc7515",
      "title": "JSON Web Signature (JWS)",
      "authors": [
        "M. Jones, J. Bradley, N. Sakimura"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWE": {
      "href": "https://tools.ietf.org/html/rfc7516",
      "title": "JSON Web Encryption (JWE)",
      "authors": [
        "M. Jones, J. Hildebrand"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWK": {
      "href": "https://tools.ietf.org/html/rfc7517",
      "title": "JSON Web Key (JWK))",
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "JWA": {
      "href": "https://tools.ietf.org/html/rfc7518",
      "title": "JSON Web Algorithms (JWA)",
      "authors": [
        "M. Jones"
      ],
      "date": "may 2015",
      "publisher": "IETF"
    },
    "PKCE": {
      "href": "https://tools.ietf.org/html/rfc7636",
      "title": "Proof Key for Code Exchange by OAuth Public Clients",
      "authors": [
        "N. Sakimura, J. Bradley, N. Agarwal"
      ],
      "date": "september 2015",
      "publisher": "IETF"
    },
    "Introspection": {
      "href": "https://tools.ietf.org/html/rfc7662",
      "title": "OAuth 2.0 Token Introspection",
      "authors": [
        "J. Richer"
      ],
      "date": "October 2015",
      "publisher": "IETF"
    },
    "OpenID.Core": {
      "href": "https://openid.net/specs/openid-connect-core-1_0.html",
      "title": "OpenID Connect Core 1.0",
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, B. de Medeiros, C. Mortimore"
      ],
      "date": "November 8 2014",
      "publisher": "OpenID foundation"
    },
    "iGOV.OpenID": {
      "href": "https://openid.net/specs/openid-igov-openid-connect-1_0.html",
      "title": "International Government Assurance Profile (iGov) for OpenID Connect 1.0 - draft 3",
      "authors": [
        "M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "publisher": "OpenID foundation"
    },
    "iGOV.OAuth2": {
      "href": "https://openid.net/specs/openid-igov-oauth2-1_0.html",
      "title": "International Government Assurance Profile (iGov) for OAuth 2.0",
      "authors": [
        "J. Richer, M. Varley, P. Grassi"
      ],
      "date": "October 5 2018",
      "publisher": "OpenID foundation"
    },
    "OpenID.Discovery": {
      "href": "https://openid.net/specs/openid-connect-discovery-1_0.html",
      "title": "OpenID Connect Discovery 1.0",
      "authors": [
        "N. Sakimura, J. Bradley, M. Jones, E. Jay"
      ],
      "date": "November 8 2014",
      "publisher": "OpenID foundation"
    },
    "I-D.ietf-oauth-pop-architecture": {
      "href": "https://tools.ietf.org/html/draft-ietf-oauth-pop-architecture-08",
      "title": "OAuth 2.0 Proof-of-Possession (PoP) Security Architecture",
      "authors": [
        "P. Hunt, J. Richer, W. Mills, P. Mishra, H. Tschofenig"
      ],
      "date": "July 8, 2016",
      "publisher": "IETF"
    },
    "HEART.OAuth2": {
      "href": "https://openid.net/specs/openid-heart-oauth2-1_0.html",
      "title": "Health Relationship Trust Profile for OAuth 2.0",
      "authors": [
        "J. Richer"
      ],
      "date": "April 25, 2017",
      "publisher": "OpenID foundation"
    },
    "JWS.JWE.Algs": {
      "href": "https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms",
      "title": "IANA JSON Web Signatures and Encryption Algorithms registry",
      "authors": [
        "Jim Schaad, Jeff Hodges, Joe Hildebrand, Sean Turner"
      ],
      "date": "",
      "publisher": "IANA"
    },
    "BCP195": {
      "href": "https://tools.ietf.org/html/bcp195",
      "title": "Recommendations for Secure Use of Transport Layer Security (TLS) and Datagram Transport Layer Security (DTLS)",
      "authors": [
        "Y. Sheffer, R. Holz, P. Saint-Andre"
      ],
      "date": "May 2015",
      "publisher": "IETF"
    },
    "HAL": {
      "href": "http://stateless.co/hal_specification.html",
      "title": "HAL - Hypertext Application Language",
      "authors": [
        "Mike Kelly"
      ],
      "date": " 2013-09-18"
    },
    "rfc7946": {
      "href": "https://datatracker.ietf.org/doc/html/rfc7946",
      "title": "The GeoJSON Format",
      "authors": [
        "H. Butler, M. Daly, A. Doyle, S. Gillies, T. Schaub, S. Hagen"
      ],
      "date": "2016-08-01"
    }
  },
  "postProcess": [
    null
  ],
  "publishISODate": "2023-12-21T00:00:00.000Z",
  "generatedSubtitle": "Versie ter vaststelling 21 december 2023"
}</script><meta name="description" content="Dit document beschrijft een API strategie voor de Nederlandse overheid."><script type="application/ld+json">{
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "nl",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-architectuur-20231221/",
  "type": [
    "TechArticle"
  ],
  "name": "API Strategie Algemeen (Module Architectuur)",
  "inLanguage": "nl",
  "license": "https://creativecommons.org/licenses/by/4.0/legalcode",
  "datePublished": "2023-12-21",
  "copyrightHolder": {
    "name": "Geonovum",
    "url": "https://www.geonovum.nl/"
  },
  "discussionUrl": "https://github.com/geonovum/KP-APIs/issues/",
  "alternativeHeadline": "",
  "isBasedOn": "https://docs.geostandaarden.nl/api/def-hr-API-Strategie-architectuur-20220309/",
  "description": "Dit document beschrijft een API strategie voor de Nederlandse overheid.",
  "editor": [
    {
      "type": "Person",
      "name": "Frank Terpstra",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.geonovum.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Jan van Gelder",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://www.Geonovum.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Martin van der Plas",
      "worksFor": {
        "name": "Logius",
        "url": "https://logius.nl/"
      }
    }
  ],
  "contributor": [
    {
      "type": "Person",
      "name": "Lancelot Schellevis",
      "worksFor": {
        "name": "Forum Standaardisatie",
        "url": "https://www.forumstandaardisatie.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Han Zuidweg",
      "worksFor": {
        "name": "Forum Standaardisatie",
        "url": "https://www.forumstandaardisatie.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Friso Penninga",
      "worksFor": {
        "name": "Geonovum",
        "url": "https://geonovum.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Matthias Snoei",
      "worksFor": {
        "name": "Swis",
        "url": "https://swis.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Jasper Roes",
      "worksFor": {
        "name": "Het Kadaster",
        "url": "https://www.kadaster.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Peter Haasnoot",
      "worksFor": {
        "name": "Logius",
        "url": "https://logius.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Frank van Es",
      "worksFor": {
        "name": "Logius",
        "url": "https://logius.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Martin van der Plas",
      "worksFor": {
        "name": "Logius",
        "url": "https://logius.nl/"
      }
    },
    {
      "type": "Person",
      "name": "Dennis de Wit",
      "worksFor": {
        "name": "Solventa",
        "url": "https://www.solventa.nl"
      }
    }
  ],
  "citation": []
}</script></head>
  <!-- HTML-Body ================================================================================ -->
  <body class="h-entry"><div class="head">
  <a href="https://www.geonovum.nl/" class="logo"><img id="Geonovum" alt="Geonovum" width="132" height="67" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg"></a>
  <h1 class="title p-name" id="title">API Strategie Algemeen (Module Architectuur)</h1>
  
  <h2>Geonovum Handreiking<br>
  Versie ter vaststelling <time class="dt-published" datetime="2023-12-21">21 december 2023</time></h2>
  <dl>
    <dt>Deze versie:</dt><dd><a class="u-url" href="https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-architectuur-20231221/">https://docs.geostandaarden.nl/api/vv-hr-API-Strategie-architectuur-20231221/</a></dd><dt>Laatst gepubliceerde versie:</dt><dd><a href="https://docs.geostandaarden.nl/api/API-Strategie-architectuur/">https://docs.geostandaarden.nl/api/API-Strategie-architectuur/</a></dd>
    
    <dt>Vorige versie:</dt><dd><a href="https://docs.geostandaarden.nl/api/def-hr-API-Strategie-20220309/#architectuur">https://docs.geostandaarden.nl/api/def-hr-API-Strategie-20220309/#architectuur</a></dd>
    <dt>Laatste werkversie:</dt><dd><a href="https://geonovum.github.io/KP-APIs/API-strategie-algemeen/Architectuur/">https://geonovum.github.io/KP-APIs/API-strategie-algemeen/Architectuur/</a></dd>
    <dt>Redacteurs:</dt>
    <dd class="p-author h-card vcard"><span class="p-name fn">Frank Terpstra</span>, <a class="p-org org h-org h-card" href="https://www.geonovum.nl/">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Jan van Gelder</span>, <a class="p-org org h-org h-card" href="https://www.Geonovum.nl/">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Martin van der Plas</span>, <a class="p-org org h-org h-card" href="https://logius.nl/">Logius</a></dd>
    <dt>Auteurs:</dt><dd class="p-author h-card vcard"><span class="p-name fn">Lancelot Schellevis</span>, <a class="p-org org h-org h-card" href="https://www.forumstandaardisatie.nl/">Forum Standaardisatie</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Han Zuidweg</span>, <a class="p-org org h-org h-card" href="https://www.forumstandaardisatie.nl/">Forum Standaardisatie</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Friso Penninga</span>, <a class="p-org org h-org h-card" href="https://geonovum.nl/">Geonovum</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Matthias Snoei</span>, <a class="p-org org h-org h-card" href="https://swis.nl/">Swis</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Jasper Roes</span>, <a class="p-org org h-org h-card" href="https://www.kadaster.nl/">Het Kadaster</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Peter Haasnoot</span>, <a class="p-org org h-org h-card" href="https://logius.nl/">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Frank van Es</span>, <a class="p-org org h-org h-card" href="https://logius.nl/">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Martin van der Plas</span>, <a class="p-org org h-org h-card" href="https://logius.nl/">Logius</a></dd><dd class="p-author h-card vcard"><span class="p-name fn">Dennis de Wit</span>, <a class="p-org org h-org h-card" href="https://www.solventa.nl">Solventa</a></dd>
    <dt>Doe mee:</dt><dd>
      <a href="https://github.com/geonovum/KP-APIs/">GitHub geonovum/KP-APIs</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/issues/">Dien een melding in</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/commits/">Revisiehistorie</a>
    </dd><dd>
      <a href="https://github.com/geonovum/KP-APIs/pulls/">Pull requests</a>
    </dd>
  </dl>
  
  
    <dl>
          <dt>Rechtenbeleid:</dt>
          <dd>
            <div class="copyright" style="margin: 0.25em 0;">
              <abbr title="Creative Commons Attribution 4.0 International Public License">
              <a href="https://creativecommons.org/licenses/by/4.0/legalcode"><img width="115" height="40" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Creative Commons Attribution 4.0 International Public License"></a>
            </abbr>
              <div style="display:inline-block; vertical-align:top">
                <p style="font-size: small;">Creative Commons Attribution 4.0 International Public License<br>(CC-BY)</p>
              </div>
            </div>
          </dd>
        </dl>
  <hr title="Separator for header">
</div>
    <section id="abstract" data-format="markdown" aria-busy="false" class="introductory"><h2>Samenvatting</h2><p>Dit document beschrijft een API strategie voor de Nederlandse overheid.</p></section>
    <section id="sotd" class="introductory"><h2>Status van dit document</h2><p>
    <em>Deze paragraaf beschrijft de status van dit document ten tijde van publicatie. Het is mogelijk dat er actuelere versies van dit document bestaan. Een lijst van Geonovum publicaties en de laatste gepubliceerde versie van dit document zijn te vinden op <a href="https://www.geonovum.nl/geo-standaarden/alle-standaarden">https://www.geonovum.nl/geo-standaarden/alle-standaarden</a>.</em>
  </p><p>




  Dit is een definitief concept van de nieuwe versie van de handreiking. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.





</p><p>Ten opzichte van de vorige versie van de API strategie (09-03-2022) is de layout verandert en het hoofdstuk architectuur in een los document geplaatst.</p></section><nav id="toc"><h2 class="introductory" id="inhoudsopgave">Inhoudsopgave</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#inleiding-van-de-nl-api-strategie"><span class="secno">1. </span>Inleiding van de NL API strategie</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#status"><span class="secno">1.1 </span>Status</a></li><li class="tocline"><a class="tocxref" href="#auteurs"><span class="secno">1.2 </span>Auteurs</a></li><li class="tocline"><a class="tocxref" href="#leeswijzer"><span class="secno">1.3 </span>Leeswijzer</a></li></ol></li><li class="tocline"><a class="tocxref" href="#architectuur"><span class="secno">2. </span>Architectuur</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inleiding"><span class="secno">2.1 </span>Inleiding</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#api-s-voor-burgers-bedrijven-en-overheden"><span class="secno">2.1.1 </span>API's voor Burgers, Bedrijven en Overheden</a></li><li class="tocline"><a class="tocxref" href="#belang-van-api-standaardisatie"><span class="secno">2.1.2 </span>Belang van API Standaardisatie</a></li></ol></li><li class="tocline"><a class="tocxref" href="#typologie-van-api-s"><span class="secno">2.2 </span>Typologie van API's</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#intern-extern-open-gesloten"><span class="secno">2.2.1 </span>Intern / Extern, Open / Gesloten</a></li><li class="tocline"><a class="tocxref" href="#systeem-proces-convenience"><span class="secno">2.2.2 </span>Systeem, Proces, Convenience</a></li><li class="tocline"><a class="tocxref" href="#business-exposure"><span class="secno">2.2.3 </span>Business / Exposure</a></li><li class="tocline"><a class="tocxref" href="#philosophy-protocol-encoding"><span class="secno">2.2.4 </span>Philosophy, Protocol, Encoding</a></li><li class="tocline"><a class="tocxref" href="#api-virtualisatie"><span class="secno">2.2.5 </span>API Virtualisatie</a></li><li class="tocline"><a class="tocxref" href="#api-language-styles"><span class="secno">2.2.6 </span>API Language styles</a></li></ol></li><li class="tocline"><a class="tocxref" href="#api-capability-model"><span class="secno">2.3 </span>API Capability Model</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#registratie-gebruik"><span class="secno">2.3.1 </span>Registratie &amp; Gebruik</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ontwikkelaar-onboarding"><span class="secno">2.3.1.1 </span>Ontwikkelaar onboarding</a></li><li class="tocline"><a class="tocxref" href="#applicatie-registratie"><span class="secno">2.3.1.2 </span>Applicatie registratie</a></li><li class="tocline"><a class="tocxref" href="#api-discovery"><span class="secno">2.3.1.3 </span>API Discovery</a></li><li class="tocline"><a class="tocxref" href="#specificatie-documentatie"><span class="secno">2.3.1.4 </span>Specificatie &amp; Documentatie</a></li><li class="tocline"><a class="tocxref" href="#proeftuin-sandbox"><span class="secno">2.3.1.5 </span>Proeftuin / Sandbox</a></li><li class="tocline"><a class="tocxref" href="#code-voorbeelden-sdk"><span class="secno">2.3.1.6 </span>Code voorbeelden &amp; SDK</a></li><li class="tocline"><a class="tocxref" href="#kennisdeling-ondersteuning"><span class="secno">2.3.1.7 </span>Kennisdeling &amp; Ondersteuning</a></li></ol></li><li class="tocline"><a class="tocxref" href="#realisatie-beheer"><span class="secno">2.3.2 </span>Realisatie &amp; Beheer</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ontwerp"><span class="secno">2.3.2.1 </span>Ontwerp</a></li><li class="tocline"><a class="tocxref" href="#ontwikkeling"><span class="secno">2.3.2.2 </span>Ontwikkeling</a></li><li class="tocline"><a class="tocxref" href="#test"><span class="secno">2.3.2.3 </span>Test</a></li><li class="tocline"><a class="tocxref" href="#policy-definitie"><span class="secno">2.3.2.4 </span>Policy Definitie</a></li><li class="tocline"><a class="tocxref" href="#afspraken-standaarden-en-richtlijnen"><span class="secno">2.3.2.5 </span>Afspraken, Standaarden en Richtlijnen</a></li><li class="tocline"><a class="tocxref" href="#governance-policy-handhaving"><span class="secno">2.3.2.6 </span>Governance policy handhaving</a></li><li class="tocline"><a class="tocxref" href="#api-lifecycle-beheer"><span class="secno">2.3.2.7 </span>API Lifecycle beheer</a></li><li class="tocline"><a class="tocxref" href="#versionering"><span class="secno">2.3.2.8 </span>Versionering</a></li><li class="tocline"><a class="tocxref" href="#toegangsbeheer"><span class="secno">2.3.2.9 </span>Toegangsbeheer</a></li><li class="tocline"><a class="tocxref" href="#gateway-beheer"><span class="secno">2.3.2.10 </span>Gateway beheer</a></li><li class="tocline"><a class="tocxref" href="#sleutelbeheer"><span class="secno">2.3.2.11 </span>Sleutelbeheer</a></li></ol></li><li class="tocline"><a class="tocxref" href="#verkeersstroom-beheer"><span class="secno">2.3.3 </span>Verkeersstroom beheer</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#mediatie-orkestratie"><span class="secno">2.3.3.1 </span>Mediatie &amp; Orkestratie</a></li><li class="tocline"><a class="tocxref" href="#routering"><span class="secno">2.3.3.2 </span>Routering</a></li><li class="tocline"><a class="tocxref" href="#data-transformaties"><span class="secno">2.3.3.3 </span>Data Transformaties</a></li><li class="tocline"><a class="tocxref" href="#foutafhandeling"><span class="secno">2.3.3.4 </span>Foutafhandeling</a></li><li class="tocline"><a class="tocxref" href="#caching"><span class="secno">2.3.3.5 </span>Caching</a></li><li class="tocline"><a class="tocxref" href="#protocol-conversie"><span class="secno">2.3.3.6 </span>Protocol conversie</a></li><li class="tocline"><a class="tocxref" href="#logging-audit-trail"><span class="secno">2.3.3.7 </span>Logging &amp; Audit trail</a></li><li class="tocline"><a class="tocxref" href="#monitoring-alerting"><span class="secno">2.3.3.8 </span>Monitoring &amp; Alerting</a></li><li class="tocline"><a class="tocxref" href="#analytics-dashboarding"><span class="secno">2.3.3.9 </span>Analytics &amp; Dashboarding</a></li><li class="tocline"><a class="tocxref" href="#rate-limiting-throttling"><span class="secno">2.3.3.10 </span>Rate limiting / throttling</a></li><li class="tocline"><a class="tocxref" href="#doorbelasting"><span class="secno">2.3.3.11 </span>Doorbelasting</a></li><li class="tocline"><a class="tocxref" href="#identificatie-authenticatie"><span class="secno">2.3.3.12 </span>Identificatie &amp; Authenticatie</a></li><li class="tocline"><a class="tocxref" href="#autorisatie"><span class="secno">2.3.3.13 </span>Autorisatie</a></li><li class="tocline"><a class="tocxref" href="#policy-handhaving"><span class="secno">2.3.3.14 </span>Policy handhaving</a></li><li class="tocline"><a class="tocxref" href="#anomalie-detectie"><span class="secno">2.3.3.15 </span>Anomalie detectie</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#api-management-functionaliteit"><span class="secno">2.4 </span>API Management Functionaliteit</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inleiding-api-management"><span class="secno">2.4.1 </span>Inleiding API Management</a></li><li class="tocline"><a class="tocxref" href="#informatie-architectuur"><span class="secno">2.4.2 </span>Informatie architectuur</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#referentiecomponenten"><span class="secno">2.4.2.1 </span>Referentiecomponenten</a></li><li class="tocline"><a class="tocxref" href="#rol-van-de-servicebus"><span class="secno">2.4.2.2 </span>Rol van de servicebus</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#informatiemodel-api"><span class="secno">2.5 </span>Informatiemodel &amp; API</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#informatiemodellen"><span class="secno">2.5.1 </span>Informatiemodellen</a></li><li class="tocline"><a class="tocxref" href="#definities"><span class="secno">2.5.2 </span>Definities</a></li><li class="tocline"><a class="tocxref" href="#api-informatiemodel-en-resource-model"><span class="secno">2.5.3 </span>API, Informatiemodel en Resource model</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#ontkoppeling"><span class="secno">2.5.3.1 </span>Ontkoppeling</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#breaking-changes"><span class="secno">2.5.3.1.1 </span>Breaking changes</a></li><li class="tocline"><a class="tocxref" href="#verbergen-complexiteit"><span class="secno">2.5.3.1.2 </span>Verbergen complexiteit</a></li><li class="tocline"><a class="tocxref" href="#integreren-innoveren"><span class="secno">2.5.3.1.3 </span>Integreren &amp; Innoveren</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#aanbevelingen"><span class="secno">2.5.4 </span>Aanbevelingen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#verbindt-het-resource-model-met-een-informatiemodel"><span class="secno">2.5.4.1 </span>Verbindt het Resource Model met een  Informatiemodel</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#api-security-architectuur"><span class="secno">2.6 </span>API Security Architectuur</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#beschikbaarheid"><span class="secno">2.6.1 </span>Beschikbaarheid</a></li><li class="tocline"><a class="tocxref" href="#integriteit"><span class="secno">2.6.2 </span>Integriteit</a></li><li class="tocline"><a class="tocxref" href="#vertrouwelijkheid"><span class="secno">2.6.3 </span>Vertrouwelijkheid</a></li><li class="tocline"><a class="tocxref" href="#standaard-componenten"><span class="secno">2.6.4 </span>Standaard componenten</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#actors-en-clients"><span class="secno">2.6.4.1 </span>Actors en Clients</a></li><li class="tocline"><a class="tocxref" href="#beveiligings-componenten"><span class="secno">2.6.4.2 </span>Beveiligings componenten</a></li></ol></li><li class="tocline"><a class="tocxref" href="#principes"><span class="secno">2.6.5 </span>Principes</a></li><li class="tocline"><a class="tocxref" href="#architectuurpatronen"><span class="secno">2.6.6 </span>Architectuurpatronen</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#gedelegeerde-identificatie-en-authenticatie"><span class="secno">2.6.6.1 </span>Gedelegeerde Identificatie en Authenticatie</a></li><li class="tocline"><a class="tocxref" href="#token-based-autorisatie"><span class="secno">2.6.6.2 </span>Token-based Autorisatie</a></li></ol></li><li class="tocline"><a class="tocxref" href="#referenties"><span class="secno">2.6.7 </span>Referenties</a></li></ol></li><li class="tocline"><a class="tocxref" href="#event-driven-architecture-eda"><span class="secno">2.7 </span>Event Driven Architecture (EDA)</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#inleiding-0"><span class="secno">2.7.1 </span>Inleiding</a></li><li class="tocline"><a class="tocxref" href="#event-driven-architectuur-concepten"><span class="secno">2.7.2 </span>Event Driven Architectuur concepten</a></li><li class="tocline"><a class="tocxref" href="#voordelen-eda"><span class="secno">2.7.3 </span>Voordelen EDA</a></li><li class="tocline"><a class="tocxref" href="#uitdagingen"><span class="secno">2.7.4 </span>Uitdagingen</a></li><li class="tocline"><a class="tocxref" href="#meer-informatie"><span class="secno">2.7.5 </span>Meer informatie</a></li></ol></li></ol></li></ol></nav>
    <!-- vanaf hier per hoofdstuk een sectie of een div in het document ======================== -->
    <!-- Secties komen in de inhoudsopgave div's niet ========================================== -->
    <!-- Secties hebben verplicht <h2> tags, div's niet ======================================== -->
    <section data-format="markdown" class="informative" aria-busy="false" id="inleiding-van-de-nl-api-strategie"><!--OddPage--><h2 id="x1-inleiding-van-de-nl-api-strategie"><span class="secno">1. </span>Inleiding van de NL API strategie</h2><p><em>Dit onderdeel is niet normatief.</em></p><p>Dit Hoofdstuk geeft een inleiding op de Nederlandse API strategie. De stategie is opgebouwd uit meerdere documenten, standaarden en modulen. De NL API Strategie wordt doorontwikkeld en beheerd door <a href="https://www.geonovum.nl/themas/kennisplatform-apis">het Kennisplatform API's</a>.</p><section id="status"><h3 id="x1-1-status"><span class="secno">1.1 </span>Status</h3><p>Op <a href="https://github.com/geonovum/KP-APIs/issues">GitHub</a> kan bekeken worden wat de actuele ontwikkelingen zijn met betrekking tot de Nederlandse API strategie. </p></section><section id="auteurs"><h3 id="x1-2-auteurs"><span class="secno">1.2 </span>Auteurs</h3><p>Er worden slechts een beperkt aantal auteurs genoemd, echter aan deze strategie is door veel meer mensen gewerkt. Per onderdeel van de API strategie staan de degene verantwoordelijk voor de laatste versie vermeld.
De genoemde auteurs zijn deelnemers aan de relevante werkgroep van het Kennisplatform API's zoals: API Strategie, Architectuur, Security, Design Rules, Authenticatie en Autorisatie, Strategie en Beleid, en Gebruikerswensen.</p></section><section id="leeswijzer"><h3 id="x1-3-leeswijzer"><span class="secno">1.3 </span>Leeswijzer</h3><p>De API strategie bestaat uit een een inleidend document, verschillende normatieve documenten (NL GOV standaarden) en meerdere modulen die voor verschillende functionele of technische situaties kunnen worden ingezet. Een actueel overzicht van alle documenten is weergegeven in de onderstaande infographic:</p><figure id="fig-nl-api-strategie-infographic">
<object data="https://geonovum.github.io/KP-APIs/media/API_infographic.svg" type="image/svg+xml" id="infographic"></object>
<figcaption>Figuur <span class="figno">1</span> <span class="fig-title">NL API Strategie Infographic</span></figcaption>
</figure><p>De verschillende onderdelen van de NL API Strategie bevat de volgende documenten:</p><table>
<thead>
<tr>
<th>Onderdeel</th>
<th>Documentnaam &amp; <br> Verwijzing naar de gepubliceerde versie</th>
<th>Status</th>
<th>Versie</th>
</tr>
</thead>
<tbody><tr>
<td>Algemeen</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie/">Inleiding NL API Strategie</a></td>
<td>Vastgesteld <br> (door Kennisplatform)</td>
<td>09-03-2022</td>
</tr>
<tr>
<td>Algemeen</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-architectuur/">Architectuur NL API Strategie</a></td>
<td>Vastgesteld <br> (door Kennisplatform)</td>
<td>09-03-2022</td>
</tr>
<tr>
<td>Algemeen</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-gebruikerswensen/">Gebruikerswensen NL API Strategie</a></td>
<td>Vastgesteld <br> (door Kennisplatform)</td>
<td>09-03-2022</td>
</tr>
<tr>
<td>Normatieve standaard</td>
<td><a href="https://gitdocumentatie.logius.nl/publicatie/api/adr/">API Design Rules (ADR)</a></td>
<td>Verplicht <br> (pas toe leg uit)</td>
<td>09-07-2020 <br> v1.0.0</td>
</tr>
<tr>
<td>Verplichte standaard</td>
<td><a href="https://forumstandaardisatie.nl/open-standaarden/openapi-specification">Open API Specification (OAS)</a></td>
<td>Verplicht <br> (pas toe leg uit)</td>
<td>25-05-2018 <br> v3.0.0</td>
</tr>
<tr>
<td>Normatieve standaard</td>
<td><a href="https://gitdocumentatie.logius.nl/publicatie/api/oauth/">NL GOV OAuth profiel</a></td>
<td>Verplicht <br> (pas toe leg uit)</td>
<td>09-07-2020 <br> v1.0.0</td>
</tr>
<tr>
<td>Voorgestelde standaard</td>
<td><a href="https://logius.gitlab.io/oidc/">NL GOV OpenID Connect profile</a></td>
<td>Verplicht <br> (pas toe leg uit)</td>
<td>18-02-2021 <br> v1.0.0</td>
</tr>
<tr>
<td>Verplichte standaard</td>
<td><a href="https://gitdocumentatie.logius.nl/publicatie/dk/restapi/">Digikoppeling REST API koppelvlak specificatie</a></td>
<td>Verplicht <br> (pas toe leg uit)</td>
<td>14-11-2022 <br> v1.1.1</td>
</tr>
<tr>
<td>Aanvullende module</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-mod-geo/">API Geospatial Design Rules module</a></td>
<td>Vastgesteld * <br> (door Kennisplatform)</td>
<td>23-05-2023</td>
</tr>
<tr>
<td>Aanvullende module</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-mod-transport-security/">API Transport Security module</a></td>
<td>Stabiel * <br> (Werkgroep Kennisplatform)</td>
<td>11-07-2023</td>
</tr>
<tr>
<td>Aanvullende module</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-mod-access-control/">API Access control module</a></td>
<td>Stabiel <br> (Werkgroep Kennisplatform)</td>
<td>11-07-2023</td>
</tr>
<tr>
<td>Aanvullende module</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-mod-naming-conventions/">API Naming conventions module</a></td>
<td>Stabiel <br> (Werkgroep Kennisplatform)</td>
<td>12-07-2023</td>
</tr>
<tr>
<td>Aanvullende module</td>
<td><a href="https://docs.geostandaarden.nl/api/API-Strategie-mod-hypermedia/">API Hypermedia module</a></td>
<td>Stabiel <br> (Werkgroep Kennisplatform)</td>
<td>12-07-2023</td>
</tr>
</tbody></table><ul>
<li>Deze modules zijn voordragen als normatief, vaststellingsproces is nog niet compleet</li>
</ul></section></section>
    <section data-format="markdown" class="informative" aria-busy="false" id="architectuur"><!--OddPage--><h2 id="x2-architectuur"><span class="secno">2. </span>Architectuur</h2><p><em>Dit onderdeel is niet normatief.</em></p><blockquote>
<p><em>Dit hoofdstuk gaat in op de vraag: Hoe kan je je applicatie landschap
inrichten zodat je APIs kan aanbieden. Welke componenten zijn hiervoor
nodig. Hoe ga je om met opschalen, beschikbaarheid. Wat zijn afwegingen om
beveiliging al dan niet toe te passen.</em></p>
</blockquote><section id="inleiding"><h3 id="x2-1-inleiding"><span class="secno">2.1 </span>Inleiding</h3><p>Doel van dit hoofdstuk is om een hoog niveau overzicht te geven van relevante onderdelen en concepten en hun samenhang in een op
(REST of RESTfull) API gebaseerde architectuur waarbij gebruik gemaakt wordt van REST API's als interface voor de aangeboden (gegevens)diensten.
Specifiek voor REST API's is dat deze 'Resource' gericht zijn en een uniforme manier bieden om resources te lezen, wijzigen, toevoegen
of verwijderen.</p><p><img src="../../media/clip02.png" alt=""></p><p>Figuur 1: De plaats van API's bij aanbod en gebruik van (gegevens)diensten;</p><p>Figuur 1 toont de plaats van API's in de gegevensuitwisseling en relevante onderwerpen in deze context. Bij de Dienst afnemer speelt 
het gebruik van API's, bij de Dienst aanbieder speelt het aanbieden van API's.</p><p>In dit hoofdstuk wordt specifiek ingegaan op de 'aanbod kant': het onderdeel 'Diensten toegang' in het schema.</p><section id="api-s-voor-burgers-bedrijven-en-overheden"><h4 id="x2-1-1-api-s-voor-burgers-bedrijven-en-overheden"><span class="secno">2.1.1 </span>API's voor Burgers, Bedrijven en Overheden</h4><p>Overheidsorganisaties bieden diensten aan Burgers, Bedrijven en andere Overheidsorganisaties.
Onderstaande figuur geeft de dienstverlening middels API's aan de verschillende partijen grafisch weer.</p><p><img src="https://github.com/Geonovum/KP-APIs/raw/master/overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/API-arch-v22.png" alt="alt text">
Figuur 2: API Diensten voor Burgers, Bedrijven en Overheden</p><p><em>Toelichting</em></p><ul>
<li><p>(A) : API Contactoppervlak Overheid naar Burgers en Bedrijven</p>
</li>
<li><p>(B) : API Contactoppervlak Overheid naar Overheid (bv onderdelen GDI)</p>
</li>
<li><p>G2C : Government 2 Citizen (Overheid naar Burger)</p>
</li>
<li><p>G2B : Government 2 Business (Overheid naar Bedrijf)</p>
</li>
<li><p>G2G : Government 2 Government (Overheid naar Overheid)</p>
</li>
</ul></section><section id="belang-van-api-standaardisatie"><h4 id="x2-1-2-belang-van-api-standaardisatie"><span class="secno">2.1.2 </span>Belang van API Standaardisatie</h4><p>In de bovenstaande figuur wordt ook het belang van standaardisatie van API's zichtbaar:</p><p>Burgers, Bedrijven (en ook Overheidsorganisaties zelf) gebruiken (doorgaans) de API's van meerdere Overheidsorganisaties. Wanneer de verschillende 'API contactoppervlakken' uniform zijn (ook over organisaties heen) kunnen dienstafnemers gemakkelijker (en dus sneller en met minder kosten) gebruik maken van 'Overheids API's'  </p></section></section><section id="typologie-van-api-s"><h3 id="x2-2-typologie-van-api-s"><span class="secno">2.2 </span>Typologie van API's</h3><p>In de volgende paragrafen worden verschillende indelingen voor API's behandeld. Deze indelingen helpen om in de API architectuur van een organisatie verschillende soorten API's te benoemen.</p><section id="intern-extern-open-gesloten"><h4 id="x2-2-1-intern-extern-open-gesloten"><span class="secno">2.2.1 </span>Intern / Extern, Open / Gesloten</h4><p>Een organisatie heeft verschillende soorten API's:</p><p><strong>Extern</strong>:</p><ul>
<li>Open API's: voor ontsluiten van diensten zonder toegangsbeperking bv open data.</li>
<li>Gesloten API's: voor ontsluiten van diensten met toegangsbeperking bv persoonsgegevens en vertrouwelijke gegevens of diensten voor specifieke partijen.</li>
</ul><p><strong>Intern</strong>:</p><ul>
<li>Interne API's : voor ontsluiten van diensten binnen de organisatie</li>
</ul><p>Een overheidsorganisatie ontsluit zijn diensten naar andere overheidsorganisaties, naar bedrijven/private organisaties en naar burgers.</p><p>In onderstaande figuur wordt dit visueel weergegeven.
<img src="https://github.com/Geonovum/KP-APIs/raw/master/overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/govapi.png" alt="alt text">
Figuur 3 : Soorten API's</p><p><em>Afkortingen</em>:</p><ul>
<li>G2C : Government 2 Citizen (Overheid naar Burger)</li>
<li>G2B : Government 2 Business (Overheid naar Bedrijf)</li>
<li>G2G : Government 2 Government (Overheid naar Overheid)</li>
</ul></section><section id="systeem-proces-convenience"><h4 id="x2-2-2-systeem-proces-convenience"><span class="secno">2.2.2 </span>Systeem, Proces, Convenience</h4><p>Deze indeling maakt onderscheid in Systeem, Proces, Convenience API's:</p><ul>
<li>System API (werkt op het niveau van de databron);</li>
<li>Process  API (doet aan orchestration door één of meerdere System API's aan te roepen);</li>
<li>Convenience of Experience API (beantwoord één specifieke gebruikersvraag);</li>
</ul></section><section id="business-exposure"><h4 id="x2-2-3-business-exposure"><span class="secno">2.2.3 </span>Business / Exposure</h4><p>Deze indeling maakt onderscheid in Business en Exposure API's:</p><p><strong>Business API definitie:</strong></p><p>Een API die beschreven is in business termen , gebruik maakt van generieke modellen en welke bedrijfsprocessen ondersteund. (Hierbij wordt vermeden om terminology en payloads te gebruiken die specifiek zijn voor 3rd party software om afhankelijkheid van specifieke infrastructuur te voorkomen en te focussen op bedrijfsdoelstellingen;</p><p>(Bijvoorbeeld API’s gebaseerd op de Generieke Functies (capabilities) van de Nederlandse Overheid, zie <a href="https://www.noraonline.nl/wiki/Generieke_functies">https://www.noraonline.nl/wiki/Generieke_functies</a>, en op de capabilities van de eigen organisatie). </p><p><strong>Exposure API</strong></p><p>Een API die toegang geeft tot de (basis)functionaliteit en data van een (specifiek) systeem.</p></section><section id="philosophy-protocol-encoding"><h4 id="x2-2-4-philosophy-protocol-encoding"><span class="secno">2.2.4 </span>Philosophy, Protocol, Encoding</h4><p>Deze indeling gaat uit van de technische aspecten van de API:</p><ul>
<li>Design Philosophy 
(eg RESTful, GraphQL)</li>
<li>Communications Protocol
(eg HTTP, Websockets)</li>
<li>Encoding
(eg JSON, Protobuf (binary))</li>
</ul></section><section id="api-virtualisatie"><h4 id="x2-2-5-api-virtualisatie"><span class="secno">2.2.5 </span>API Virtualisatie</h4><p>Een andere mogelijke indeling is op basis van de 'virtuele' varianten van een API:
Een en dezelfde API kan in verschillende smaken worden aangeboden.
In onderstaand voorbeeld is dit:</p><ul>
<li>Open zonder garantie</li>
<li>Open met garanties</li>
<li>Met toegangsbeperking</li>
<li>Met doelbinding</li>
</ul><p><img src="https://github.com/Geonovum/KP-APIs/raw/master/overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/api-virt.png" alt=""></p></section><section id="api-language-styles"><h4 id="x2-2-6-api-language-styles"><span class="secno">2.2.6 </span>API Language styles</h4><p>Onderstaande indeling gaat uit van de bij de API toegepaste 'language' style.</p><ul>
<li>Tunnel Style: XML-RPC, SOAP, gRPC, Avro</li>
<li>Resource Style: OpenAPI/Swagger, RAML, API Blueprint</li>
<li>Hypermedia Style: HAL, Siren, Atom, HATEOAS</li>
<li>Query Style: GraphQL, OData, SPARQL</li>
<li>Event-based Style: MQ, WebSub, MQTT, XMPP, AMQP, Kafka, AsyncAPI</li>
</ul></section></section><section id="api-capability-model"><h3 id="x2-3-api-capability-model"><span class="secno">2.3 </span>API Capability Model</h3><p>Om als organisatie API's aan te bieden aan andere partijen op een gecontroleerde en beheersbare manier moet je bepaalde functionaliteit bieden, processen inregelen en ondersteuning aanbieden.</p><p>Het onderstaande API Capability model geeft weer aan welke onderwerpen men aandacht moet schenken bij het inrichten van API gedreven dienstverlening. De onderwerpen zijn gegroepeerd in de categorieën <em>Registratie &amp; gebruik</em>, <em>Realisatie &amp; beheer</em> en <em>Verkeersstroom beheer</em>.</p><p><img src="../media/API-Capability.png" alt="API Capability Model"></p><section id="registratie-gebruik"><h4 id="x2-3-1-registratie-gebruik"><span class="secno">2.3.1 </span>Registratie &amp; Gebruik</h4><p>Deze categorie bevat capabilities voor het ondersteunen van ontwikkelaars die gebruik willen maken van de aangeboden API's. De capabilities binnen deze categorie zijn onderverdeeld in de volgende sub-categorieën:</p><ul>
<li><em>Aanmelden &amp; Registratie</em>: functionaliteiten waarmee nieuwe gebruikers zichzelf en hun applicaties kunnen registreren om gebruik te maken van aangeboden API's;</li>
<li><em>Ontdekken</em>: functionaliteiten waarmee gebruikers kennis over aangeboden API's op kunnen doen en delen.</li>
</ul><p>Over het algemeen biedt een API leverancier capabilities ten behoeve van API gebruik in een ontwikkelaarsportaal.</p><section id="ontwikkelaar-onboarding"><h5 id="x2-3-1-1-ontwikkelaar-onboarding"><span class="secno">2.3.1.1 </span>Ontwikkelaar onboarding</h5><p>Voordat een ontwikkelaar applicaties kan ontwikkelen die gebruik maken van aangeboden API's, moet deze ontwikkelaar zich registreren bij de API aanbieder. Hierbij is het belangrijk dat een goede balans wordt gezocht tussen het bieden van een zo eenvoudig en snel mogelijk onboarding proces (bij voorkeur self-service) en het borgen van afspraken voor het gebruik van de API's door de ontwikkelaar, bijvoorbeeld door het ondertekenen van gebruikersvoorwaarden en het valideren van de rechtmatigheid van de ontwikkelaar.</p><p>Bij ontwikkelaar onboarding moet ook worden gedacht aan het zich kunnen afmelden van ontwikkelaars, of het afsluiten van ontwikkelaars in het geval gebruikersvoorwaarden worden overschreden.</p></section><section id="applicatie-registratie"><h5 id="x2-3-1-2-applicatie-registratie"><span class="secno">2.3.1.2 </span>Applicatie registratie</h5><p>Applicaties die als client gebruik willen maken van API's moeten eerst worden aangemeld bij de API aanbieder. Alleen aangemelde applicaties ontvangen credentials om de API's te bevragen.</p><p>Applicatie registratie omvat de processen rondom het registreren van applicaties en het kunnen beheren van geregistreerde applicaties, inclusief de nodige controles die hiervoor moeten worden uitgevoerd. Bij het kunnen beheren kan bijvoorbeeld worden gedacht aan het toekennen of afnemen van privileges door de API aanbieder of het kunnen inzien van informatie over de API Client. Voorbeelden van benodigde controles is het controleren dat de juiste toegang en grant types worden aangevraagd voor het doel van de applicatie en of een applicatie de benodigde tests heeft doorstaan voordat deze toegang kan krijgen tot productie data.</p><p>Ook de uitgifte van credentials voor applicaties is onderdeel van applicatie registratie.</p></section><section id="api-discovery"><h5 id="x2-3-1-3-api-discovery"><span class="secno">2.3.1.3 </span>API Discovery</h5><p>Aangeboden API's moeten vindbaar zijn voor partijen die er gebruik van willen maken. API Discovery richt zich op deze vindbaarheid van API's.</p><p>API Discovery kan op verschillende manieren toegepast worden. Allereerst kan API Discovery worden toegepast door een API aan te bieden welke referenties biedt naar de verschillende API's of kan de lijst met aangeboden API's in developer documentatie worden opgenomen. De op de ‘Pas toe of leg uit-lijst’ van het Forum Standaardisatie opgenomen Open API Specification (OAS) voorziet in deze beide manieren.</p><p>Ook bestaan er zoekmachines die aangeboden API's op een centrale locatie toegankelijk maken, waardoor de vindbaarheid van API's nog meer wordt vergroot. Een voorbeeld van een dergelijke zoekmachine die wordt gebruikt binnen de overheid is <a href="https://developer.overheid.nl">developer.overheid.nl</a>.</p></section><section id="specificatie-documentatie"><h5 id="x2-3-1-4-specificatie-documentatie"><span class="secno">2.3.1.4 </span>Specificatie &amp; Documentatie</h5><p>Traditioneel worden webservice endpoints beschreven middels statische documentatie welke (bijvoorbeeld als PDF document) beschikbaar wordt gesteld aan aansluitende partijen. Door de dynamische aard van API's en de mogelijkheden die door tools worden geboden, is het bij API's gebruikelijk documentatie dynamisch aan te bieden. Hierbij is het mogelijk om direct vanuit de documentatie API verzoeken op te stellen en uit te voeren.</p><p>API specificaties op basis van OAS bieden de mogelijkheid om dynamische documentatie te genereren. Hierbij moet wel de kanttekening worden gemaakt dat de Open API Specificaties zich primair richten op documentatie van API endpoints en de structuur daarvan. Mogelijke combinaties van inputs en outputs, use cases en overige documentatie die niet direct over de structuur van de API endpoints gaat wordt slechts beperkt ondersteund en dient buiten de Open API Specificatie te worden toegevoegd.</p></section><section id="proeftuin-sandbox"><h5 id="x2-3-1-5-proeftuin-sandbox"><span class="secno">2.3.1.5 </span>Proeftuin / Sandbox</h5><p>Traditioneel worden webservice client implementaties op basis van documentatie en wsdl definities ontwikkeld, waarbij een volledig ontwikkelde client applicatie toegang krijgt tot een preproductie omgeving om de implementatie te toetsen.</p><p>Bij API Client ontwikkeling is het gebruikerlijk om, naast het gebruik van dynamische documentatie, een proeftuin aan te bieden in de vorm van sandbox API's. Dit zijn API's welke al vanaf de start van de app ontwikkeling (of zelfs daarvoor, vanuit de dynamische documentatie) natuurgetrouwe API verzoeken kunnen worden uitgevoerd. Hierdoor krijgen app ontwikkelaars direct feedback over hoe hun applicaties aansluiten op de geboden API's.</p><p>Bij het aanbieden van een proeftuin is het goed om na te gaan hoe natuurgetrouw deze moet zijn. Uitersten zijn enerzijds een stub met daarin een aantal basis Use Cases uitgewerkt en anderzijds een proefomgeving met een kleine subset aan productie-like geanonimiseerde data welke al dan niet per client gescheiden is en regelmatig wordt ververst indien data vanuit de sandbox aanpasbaar is.</p></section><section id="code-voorbeelden-sdk"><h5 id="x2-3-1-6-code-voorbeelden-sdk"><span class="secno">2.3.1.6 </span>Code voorbeelden &amp; SDK</h5><p>Naast het aanbieden van dynamische documentatie en een proeftuin, kunnen ontwikkelaars erg geholpen zijn wanneer de API aanbieder code voorbeelden, referentie implementaties of SDK's aanbiedt in verschillende programmeertalen. Het gebruik van de OAS voor API documentatie heeft als voordeel dat er al veel tooling bestaat om SDK's te genereren op basis van de API specificatie.</p></section><section id="kennisdeling-ondersteuning"><h5 id="x2-3-1-7-kennisdeling-ondersteuning"><span class="secno">2.3.1.7 </span>Kennisdeling &amp; Ondersteuning</h5><p>Naast het kunnen inzien van documentatie en het gebruik maken van sandbox API's, is het belangrijk dat ontwikkelaars van API Clients terecht kunnen met vragen of opmerkingen. Hierbij kan in het meest rudimentaire geval bijvoorbeeld worden gedacht aan een feedback formulier en een veelgestelde vragen pagina, maar ook aan een forum waarbij gebruikers elkaar kunnen helpen en de aanwezigheid van de API aanbieder op publieke fora (bijvoorbeeld Stack Overflow of Super User), social media (bijvoorbeeld Twitter) of invite-only discussie platformen (bijvoorbeeld Discord of Slack).</p></section></section><section id="realisatie-beheer"><h4 id="x2-3-2-realisatie-beheer"><span class="secno">2.3.2 </span>Realisatie &amp; Beheer</h4><p>Realisatie &amp; Beheer gaat over het (door)ontwikkelen van API's, het beheren van de API lifecycle van ideatie tot uitfasering en het beheren van het API ecosysteem. De capabilities binnen deze categorie zijn onderverdeeld in de volgende sub-categorieën:</p><ul>
<li><em>Realisatie</em>: capabilities met betrekking tot het aanbieden van nieuwe API endpoints en de doorontwikkeling van bestaande;</li>
<li><em>API Governance</em>: standaarden, afspraken en richtlijnen rondom het aanbieden van API's en de processen om hieraan te voldoen;</li>
<li><em>API Lifecycle beheer</em>: capabilities met betrekking tot de sturing op een uniform API portfolio en lifecycle management van de API's;</li>
<li><em>Platform beheer</em>: functionaliteiten met betrekking tot het kunnen beheren van het platform of ecosysteem waarin de API's opereren.</li>
</ul><section id="ontwerp"><h5 id="x2-3-2-1-ontwerp"><span class="secno">2.3.2.1 </span>Ontwerp</h5><p>Waar traditioneel webservices technisch werden ingestoken en veelal werden gebaseerd op de technische inrichting van het achterliggende IT landschap, is het bieden van een uitmuntende developer experience (DX) één van de belangrijkste doelen bij het aanbieden van API's.</p><p>Goed API ontwerp ligt daarbij aan de grondslag. Net als User Experience (UX) ontwerp zich richt op het bieden van de ultieme gebruikerservaring bij websites, worden API's ontworpen met de gebruikers (ontwikkelaars) centraal, in plaats van gebaseerd op de inrichting van back-ends. De API's fungeren daarbij als façade en maskeren de complexiteit van het achterlandschap voor gebruikers van de API's, zonder in te hoeven boeten op functionaliteit.</p><p>Aangezien het ontwerp van API's net als bij web-ontwerp een creatief proces is en er veel mogelijkheden zijn om dezelfde uitdagingen het hoofd te bieden, is er een lijst met API Design Rules opgenomen op de ‘Pas toe of leg uit-lijst’ van het Forum Standaardisatie opgenomen, welke API ontwerpers helpt goede ontwerpbeslissingen te maken op basis van best-practices in API ontwerp.</p></section><section id="ontwikkeling"><h5 id="x2-3-2-2-ontwikkeling"><span class="secno">2.3.2.2 </span>Ontwikkeling</h5><p>API ontwikkeling betreft het ontwikkelen van API endpoints op basis van API ontwerpen. Bij het inrichten van API ontwikkeling moeten een aantal keuzen worden gemaakt, waaronder waar API ontwikkeling plaatsvindt.</p><p>Een optie kan zijn dat API ontwikkeling in de API Gateway plaatsvindt; de meeste API Gateway producten bieden connectors om verschillende back-end systemen te ontsluiten, policies om protocollen te vertalen (bv SOAP &lt;-&gt; REST) en de mogelijkheid om API endpoints op basis van OAS te genereren. Een nadeel van API ontwikkeling in de API Gateway is dat het vaak specifieke productkennis vergt en daardoor de afhankelijkheid van experts van de gekozen API Gateway vergroot.</p><p>Alternatieven zijn API ontwikkeling in microservices, waarbij microservices API's aanbieden waarvan een deel via de API Gateway as-is wordt ontsloten, of het gebruik van een middleware oplossing. Hierbij moet er rekening mee worden gehouden dat het gebruik van middleware dezelfde nadelen heeft met betrekking tot specifieke productkennis als het ontwikkelen van API's in de API Gateway, maar kan het zijn dat deze kennis reeds in de teams aanwezig is.</p><p>Wanneer bij het API Ontwerp gebruik gemaakt wordt van de OAS standaard, bieden zowel API Gateway oplossingen en programmeertalen vaak goede ondersteuning voor het automatisch genereren van code op basis van de API specificatie, wat de snelheid van ontwikkeling vergroot en de foutgevoeligheid verkleint. Hierbij moet worden opgemerkt dat enkele OAS constructies (nog) niet kunnen worden gebruikt, omdat deze fouten geven bij code generatie.</p></section><section id="test"><h5 id="x2-3-2-3-test"><span class="secno">2.3.2.3 </span>Test</h5><p>Dit betreft het testen van API endpoints tegen de specificatie. Waar mogelijk gebeurt dit geautomatiseerd. Op het gebied van <em>syntactische</em> tests biedt veel test tooling ondersteuning voor het importeren van Open API Specificaties; voor het uitvoeren van <em>semantische</em> tests is het vaak noodzakelijk dat testdata wordt geprepareerd en use cases worden uitgewerkt in test cases.</p></section><section id="policy-definitie"><h5 id="x2-3-2-4-policy-definitie"><span class="secno">2.3.2.4 </span>Policy Definitie</h5><p>Dit betreft het definiëren van generieke API policies, welke worden toegepast op alle API's of door een aantal API's kunnen worden uitgevoerd. Voorbeelden van API policies zijn:</p><ul>
<li>Validatie van API verzoeken tegen een API specificatie;</li>
<li>het vertalen van JSON berichten naar een ander berichtformaat op basis van content negotiation;</li>
<li>het vertalen van (delen van) berichten;</li>
<li>het filteren van headers in response berichten;</li>
<li>het 'throttlen' van inkomende API verzoeken om back-ends te ontlasten;</li>
<li>het afdwingen van gautoriseerde API verzoeken;</li>
<li>etc.</li>
</ul></section><section id="afspraken-standaarden-en-richtlijnen"><h5 id="x2-3-2-5-afspraken-standaarden-en-richtlijnen"><span class="secno">2.3.2.5 </span>Afspraken, Standaarden en Richtlijnen</h5><p>Een set van afspraken, standaarden en richtlijnen om ervoor te zorgen dat een uniforme set van API's wordt aangeboden, dat aansluit bij de API strategie van de API aanbiedende organisatie (en breder, in het geval van organisatie-overstijgende API's). Hieronder vallen ook processen om ervoor te zorgen dat aan deze afspraken, standaarden en richtlijnen wordt voldaan en om organisaties de mogelijkheid te bieden gecreëerde afspraken en richtlijnen te verheffen naar landelijk niveau.</p></section><section id="governance-policy-handhaving"><h5 id="x2-3-2-6-governance-policy-handhaving"><span class="secno">2.3.2.6 </span>Governance policy handhaving</h5><p>Dit betreffen policies die waarborgen dat de juiste stakeholders bij business transacties betrokken worden. Voorbeelden van business transacties zijn:</p><ul>
<li>Het wijzigen van een policy voor een bestaande API-versie;</li>
<li>Het updaten van documentatie van een API;</li>
<li>Het veranderen van de status in de levenscyclus van een API-versie;</li>
<li>Het abonneren op een API.</li>
</ul></section><section id="api-lifecycle-beheer"><h5 id="x2-3-2-7-api-lifecycle-beheer"><span class="secno">2.3.2.7 </span>API Lifecycle beheer</h5><p>Dit omvat functionaliteiten rondom het beschikbaar maken van nieuwe API endpoints, bijvoorbeeld door ze in een API Gateway te registreren, het maken van non-breaking changes en het uiteindelijk uitfaseren van API endpoints omdat deze niet meer nodig zijn of door een nieuwere API versie worden vervangen.</p><p>Het is belangrijk gebruikers van API's duidelijk inzicht te geven in de processen en tijdslijnen rondom lifecycle management, zodat zij zich goed op eventuele wijzigingen voor kunnen bereiden. Voorbeelden van transparante communicatie hierover zijn het al bij beschikbaarstelling van API endpoints definieren en communiceren van deprecation en sunset datums. Deze kunnen bijvoorbeeld in de API documentatie en/of API headers worden gecommuniceerd. In de periode tussen deprecation van een API worden veelal alleen essentiele updates doorgevoerd en worden nieuwe functionaliteiten alleen toegevoegd op nieuwe API versies.</p></section><section id="versionering"><h5 id="x2-3-2-8-versionering"><span class="secno">2.3.2.8 </span>Versionering</h5><p>Versionering van API's zorgt ervoor dat het voor afnemers van API's duidelijk is op welke API wordt aangesloten en welke eigenschappen daarbij horen. Voor aanbieders van API's zorgt het ervoor dat ze wendbaar kunnen zijn door nieuwe API versies te introduceren, zonder dat dit direct impact heeft op API clients.</p><p>Bij het toepassen van API versionering hoort ook het duidelijk inzichtelijk maken van hoe lang een specifieke API versie ondersteund wordt, wanneer een nieuwe versie wordt geintroduceerd en hoe de overgangsfase eruit ziet.</p><p>De tendens bij API's op het gebied van versionering is om zeer terughoudend te zijn met het introduceren van nieuwe major versies door, welke nodig zijn bij het maken van breaking changes. Om toch wendbaar te kunnen zijn, wordt veelal semantic versioning (semver) toegepast en worden API's aangepast middels niet-breaking minor changes en patches, totdat er een noodzaak is om breaking changes, en daarmee een major versie upgrade, uit te voeren.</p></section><section id="toegangsbeheer"><h5 id="x2-3-2-9-toegangsbeheer"><span class="secno">2.3.2.9 </span>Toegangsbeheer</h5><p>Het registreren en beheren van API endpoints gebeurt zo veel mogelijk op basis van self-service door teams die API's ontwikkelen. Daarnaast worden centrale policies en API Gateway configuratie vaak centraal uitgevoerd.</p><p>Hiervoor is het belangrijk dat het API &amp; Gateway beheer op basis van gebruikers en een autorisatie matrix verloopt.</p></section><section id="gateway-beheer"><h5 id="x2-3-2-10-gateway-beheer"><span class="secno">2.3.2.10 </span>Gateway beheer</h5><p>Hieronder vallen alle werkzaamheden met betrekking tot het beheren van de API Gateway zelf. Hierbij kan worden gedacht aan de technische inrichting van het platform, het uitvoeren van upgrades, het beheren van gebruikers, rollen en autorisaties en het oplossen van problemen die volgen uit monitoring en alerting.</p></section><section id="sleutelbeheer"><h5 id="x2-3-2-11-sleutelbeheer"><span class="secno">2.3.2.11 </span>Sleutelbeheer</h5><p>Voor een veilige uitwisseling van gegevens tussen API Gateway en client (en eventuele externe Authorisatie Servers) spelen ondertekening en versleuteling van berichten een belangrijke rol. Hiervoor is het belangrijk dat de API aanbieder het sleutelmateriaal dat hiervoor wordt gebruikt op een veilige manier kan opslaan en waar nodig kan distribueren naar aansluitende API clients.</p></section></section><section id="verkeersstroom-beheer"><h4 id="x2-3-3-verkeersstroom-beheer"><span class="secno">2.3.3 </span>Verkeersstroom beheer</h4><p>Verkeersstroom beheer gaat over de functionaliteiten die te maken hebben met verwerken van daadwerkelijk verkeer tussen de API client en aanbieder en het verwerken daarvan binnen het API landschap.</p><p>De capabilities binnen deze categorie zijn onderverdeeld in de volgende sub-categorieën:</p><ul>
<li><em>Mediatie &amp; Orkestratie</em>: het verwerken, valideren, routeren en  bewerken van API verzoeken en antwoorden om een gebruiksvriendelijke en uniforme beleving aan API clients te kunnen bieden;</li>
<li><em>Telemetrie &amp; Inzicht</em>: het meten en inzichtelijk maken van API verzoeken en antwoorden om inzicht te krijgen in het gebruik van API's en de gezondheid van het platform;</li>
<li><em>Servicelevel Beheer</em>: het definieren en afdwingen van afspraken rondom beschikbaarheid en de toegestane hoeveelheid API verzoeken dat een API client mag doen, eventueel gebaseerd op staffels voor doorbelasting;</li>
<li><em>Beveiliging</em>: functionaliteiten rondom de beveiliging van API endpoints en de data en processen die hiermee ontsloten worden.</li>
</ul><section id="mediatie-orkestratie"><h5 id="x2-3-3-1-mediatie-orkestratie"><span class="secno">2.3.3.1 </span>Mediatie &amp; Orkestratie</h5><p>In het geval back-end systemen niet de mogelijkheden hebben te communiceren volgens de gespecificeerde API contracten of als een API betrekking heeft op meerdere back-end systemen, kan het noodzakelijk zijn data transformaties toe te passen om toch de gebruiksvriendelijke API's aan afnemers te kunnen bieden. In dit geval wordt API Mediatie, ook wel data transformatie of orkestratie, toegepast met als doel de API's die aan API Clients geboden worden zo gebruiksvriendelijk mogelijk te laten zijn, zonder afhankelijk te zijn van implementatiedetails en technologische beperkingen van back-end systemen. API Mediatie kan plaatsvinden in microservices, een integratielaag in de back-end of in de API Gateway.</p></section><section id="routering"><h5 id="x2-3-3-2-routering"><span class="secno">2.3.3.2 </span>Routering</h5><p>In het geval de back-end functionaliteit wordt ingevuld door meerdere back-end systemen of microservices, dienen inkomende API verzoeken te worden gerouteerd naar de juiste systemen. In het eenvoudigste geval kan dit betekenen dat verzoeken voor verschillende API endpoints naar verschillende back-end systemen worden gerouteerd, maar in ingewikkeldere situaties kan het ook noodzakelijk zijn te routeren op basis van informatie uit het verzoek, zoals bijvoorbeeld afzender of inhoud.</p></section><section id="data-transformaties"><h5 id="x2-3-3-3-data-transformaties"><span class="secno">2.3.3.3 </span>Data Transformaties</h5><p>Dit betreft functionaliteiten rondom het vertalen van API endpoints naar het achterliggende datamodel. Dit kan plaatsvinden in de API Gateway, integratietoepassingen in de back-end of in back-end (micro)services. </p><p>Data transformaties worden, wanneer benodigd, bij voorkeur lokaal in back-end (micro)services toegepast. Niet-domein-specifieke transformaties (bijvoorbeeld voor het vertalen tussen interne en externe representaties of het digitaal ondertekenen van berichten) kunnen ook eventueel centraal in de API Gateway plaatsvinden.</p></section><section id="foutafhandeling"><h5 id="x2-3-3-4-foutafhandeling"><span class="secno">2.3.3.4 </span>Foutafhandeling</h5><p>In het geval dat er fouten optreden in de API's, bijvoorbeeld door niet-functionerende back-end systemen, moeten API Clients worden voorzien van duidelijke foutmeldingen en moeten betrokkenen bij de API aanbieder voorzien worden van voldoende informatie om de oorzaak van de fouten op te kunnen lossen en te verhelpen, indien nodig.</p></section><section id="caching"><h5 id="x2-3-3-5-caching"><span class="secno">2.3.3.5 </span>Caching</h5><p>Een belangrijk onderdeel van developer experience bij API's is de performance ervan. Caching zorgt ervoor dat niet voor elke aanroep het achterlandschap geraadpleegd hoeft te worden. RESTful API's lenen zich zeer goed voor het toepassen van caching door toepassing van het Proxy architectuur patroon, echter dient zorg te worden gedragen dat gewijzigde broninformatie leidt tot invalidatie van de informatie in de cache, zodat API Clients geen achterhaalde informatie ophalen.</p></section><section id="protocol-conversie"><h5 id="x2-3-3-6-protocol-conversie"><span class="secno">2.3.3.6 </span>Protocol conversie</h5><p>Om operabiliteit te vergroten zodat meer API Clients aan kunnen sluiten, kan het nuttig zijn API's aan te bieden in andere protocollen en architectuurstijlen dan REST / JSON. Zonder specifieke code in back-end systemen kan bijvoorbeeld de API Gateway API's op basis van REST en JSON omvormen naar API's op basis van SOAP en XML. Hierdoor kunnen API Clients die geen JSON ondersteunen worden bediend, zonder dat dit leidt tot extra ontwikkel effort aan de back-end / microservices kant (het is overigens meestal wel benodigd de API Gateway van instructies te voorzien voor de conversie, bijvoorbeeld middels XSLT specificaties).</p><p>Ook kan protocol conversie nodig zijn om back-end systemen die gebruik maken van verouderde protocollen toch via API's aan te bieden.</p></section><section id="logging-audit-trail"><h5 id="x2-3-3-7-logging-audit-trail"><span class="secno">2.3.3.7 </span>Logging &amp; Audit trail</h5><p>Geeft inzicht in de verkeersstromen tussen API Clients, API Gateway en het achterliggende applicatie landschap en zorgt ervoor dat alle handelingen herleidbaar zijn door inzicht te geven in historische verkeersstromen, ten behoeve van audit doeleinden (i.h.k.v. privacy, beveiliging en transparantie).  </p><p>Onder andere de volgende informatie kan inzichtelijk worden gemaakt:</p><ul>
<li>Wie heeft data geraadpleegd?</li>
<li>Welke data is geraadpleegd?</li>
<li>Waarom de data is geraadpleegd? Doelbinding wordt vastgelegd.</li>
<li>Wanneer de data is geraadpleegd</li>
<li>Hoe de data is geraadpleegd?</li>
</ul></section><section id="monitoring-alerting"><h5 id="x2-3-3-8-monitoring-alerting"><span class="secno">2.3.3.8 </span>Monitoring &amp; Alerting</h5><p>API Monitoring &amp; Alerting geeft inzicht in de technische staat van de API's en informeert (via RCS, SMS en/of e-mail) betrokken groepen of personen indien bepaalde gebeurtenissen optreden. Voorbeelden van gebeurtenissen zijn onbeschikbaarheid van bepaalde gegevensverbindingen of certificaten die op korte termijn zullen verlopen.</p></section><section id="analytics-dashboarding"><h5 id="x2-3-3-9-analytics-dashboarding"><span class="secno">2.3.3.9 </span>Analytics &amp; Dashboarding</h5><p>Naast onder andere productvisie en input van afnemers is API Analytics een belangrijke aandrijver bij het bepalen van de richting van API doorontwikkeling. Op basis van actueel API gebruik kan het resultaat van Key Performance Indicators (KPI's) worden vastgesteld. Dit kan leiden tot inzicht in welke API functionaliteiten succesvol zijn en welke minder succesvol, en zodoende kan leiden tot aanscherping of aanpassing van de productvisie.</p></section><section id="rate-limiting-throttling"><h5 id="x2-3-3-10-rate-limiting-throttling"><span class="secno">2.3.3.10 </span>Rate limiting / throttling</h5><p>Rate limiting (throttling) biedt bescherming tegen een bovenmatig aantal verzoeken die worden afgevuurd op de omgeving van de API aanbieder, waardoor er storingen op de backend systemen kunnen optreden. Dit kan bij reguliere bedrijfsuren het 'spitsuur' zijn waardoor deze beveiliging moet worden ingeschakeld. Rate limiting is ook een manier om een SLA af te dwingen op basis van een contract.</p><p>Rate limiting kan worden ingesteld op verschillende tijdseenheden, bijvoorbeeld het aantal toegestane verzoeken per uur of per maand, en er kunnen verschillende profielen of plannen worden aangemaakt waarin deze quota worden geconfigureerd. Of het toekennen van voorrang op de afhandeling van bepaalde verzoeken (requests) is mogelijk, bijvoorbeeld door bulk-processen voor een korte periode voorrang te verlenen boven andere verzoeken. Hierdoor is gecontroleerd traffic management mogelijk, waardoor eventuele verstoringen op een later moment door piekbelasting juist kunnen worden voorkomen. Een profiel of plan is te koppelen aan een specifieke API.</p></section><section id="doorbelasting"><h5 id="x2-3-3-11-doorbelasting"><span class="secno">2.3.3.11 </span>Doorbelasting</h5><p>In sommige gevallen kan er voor gekozen worden om API gebruik door te belasten. Dit is voor overheden interessant om zo eventuele kosten door te belasten op de afzonderlijke organisaties, maar ook richting ketenpartners.</p><p>Er bestaan verschillende doorbelastingsmodellen, welke vallen onder de volgende hoofdcategorieën:</p><ul>
<li><em>Vrij:</em> de API is vrij te gebruiken zonder kosten.</li>
<li><em>Betaald:</em> gebruikers van de API moeten betalen voor het gebruik ervan. Onder deze categorie vallen verschillende subcategorieën, zoals Freemium, Tiered, Pay-as-you-go en doorbelasting op basis van een vaste prijs per tijdseenheid.</li>
<li><em>Indirect:</em> gebruikers van de API betalen niet direct voor het gebruik ervan, maar dragen indirect bij aan het business model van de API aanbieder, waardoor API gebruik geld oplevert voor de API aanbieder.</li>
<li><em>Affiliate:</em> vergelijkbaar met indirect, behalve dat de API aanbieder gebruikers van API's betaalt om het gebruik van de API's zoveel mogelijk te stimuleren.</li>
</ul></section><section id="identificatie-authenticatie"><h5 id="x2-3-3-12-identificatie-authenticatie"><span class="secno">2.3.3.12 </span>Identificatie &amp; Authenticatie</h5><p>Hieronder vallen de identificatie en authenticatie van API Clients, eindgebruikers en organisaties. Identificatie en authenticatie van eindgebruikers is overigens niet altijd nodig, bijvoorbeeld bij back-office en batchprocessen die niet in de context van een eindgebruiker werken.</p></section><section id="autorisatie"><h5 id="x2-3-3-13-autorisatie"><span class="secno">2.3.3.13 </span>Autorisatie</h5><p>Dit betreft de autorisatie van API toegang op basis van de geauthentiseerde API Client end eindgebruiker.</p><p>Bij autorisaties op basis van API's wordt vaak onderscheid gemaakt tussen grofmazige, role based, en fijnmazig, domein-specifieke autorisatie. Hierbij worden grofmazige, role based, autorisaties vaak centraal ingeregeld, bijvoorbeeld middels de API Gateway. Dit geeft mede invulling aan de eisen die worden gesteld vanuit wet- en regelgeving, namelijk dat autorisatie is ingericht conform doelbinding.</p><p>Fijnmazige, domein specifieke, autorisatie wordt idealiter afgehandeld door de domein applicatie. Echter ondersteunen verschillende gebruikers niet de correcte manier van API's aanroepen en doelbindingsregisters ontbreken veelal nog (en soms bieden de bronhouders nog niet de benodigde API's). Ook is IAM in veel overheidsorganisaties niet in die mate op orde dat hierin volledig sturing aan gegeven kan worden. Fijnmazige autorisatie kan hierdoor eventueel nog niet door de backend worden afgehandeld. Een alternatief hiervoor is dat er per doelbinding een andere API wordt aangeboden vanuit de API Gateway of dat de integratielaag functionaliteit biedt om aan de fijnmazige autorisatie invulling te geven.</p></section><section id="policy-handhaving"><h5 id="x2-3-3-14-policy-handhaving"><span class="secno">2.3.3.14 </span>Policy handhaving</h5><p>API Policy handhaving gaat over het toepassen van de ontwikkelde API policies op API endpoints. Hierbij kan onderscheid worden gemaakt tussen policies die altijd van toepassing zijn en policies die afhankelijk van de aangeroepen API of de afgesproken service levels worden toegepast. Voorbeelden van policies zijn syntactische en semantische validaties van inkomende en uitgaande API aanroepen, maar ook autorisatie en throttling worden veelal geïmplementeerd als verkeersstroom policies.</p></section><section id="anomalie-detectie"><h5 id="x2-3-3-15-anomalie-detectie"><span class="secno">2.3.3.15 </span>Anomalie detectie</h5><p>Het detecteren van verdacht gebruik van API endpoints, bijvoorbeeld ten behoeve van het opsporen van fraude of malware.</p></section></section></section><section id="api-management-functionaliteit"><h3 id="x2-4-api-management-functionaliteit"><span class="secno">2.4 </span>API Management Functionaliteit</h3><section id="inleiding-api-management"><h4 id="x2-4-1-inleiding-api-management"><span class="secno">2.4.1 </span>Inleiding API Management</h4><p>In dit hoofdstuk wordt aandacht besteed aan de positionering van API-Management binnen de informatie architectuur van een overheidsorganisatie. Daarbij wordt stilgestaan bij de functies die verschillende tools moeten invullen om API-Management goed op te kunnen zetten. De kaders en richtlijnen die in dit hoofdstuk worden benoemd zijn in lijn met landelijke geldende architectuurrichtlijnen (zoals NORA, GEMMA en Common Ground), hiermee kan dit document worden gezien als een referentiearchitectuur op het gebied van API-Management.</p></section><section id="informatie-architectuur"><h4 id="x2-4-2-informatie-architectuur"><span class="secno">2.4.2 </span>Informatie architectuur</h4><p>Alle overheden hebben een uitdaging op het gebied van data integratie<a href="#_ftn1">[1]</a>. Hoe faciliteer je gegevensuitwisseling tussen bronnen en afnemers op een efficiënte en beheersbare manier die voldoet aan de eisen van wet- en regelgeving?</p><p>Een overheidsinstantie geeft hier het beste invulling aan door organisatiebreed een zogenaamde 'integratielaag' binnen de infrastructuur te positioneren. Dit kan je beschouwen als de gereedschapskist waarbinnen verschillende tools beschikbaar zijn voor data-integratie. Gezien de wereldwijde ontwikkelingen in het gebruik van API's, kan API-Management tooling hierbinnen niet ontbreken. Het is voor overheden essentiële functionaliteit om in lijn met de NORA te kunnen opereren (of specifieker in lijn met Common Ground).</p><section id="referentiecomponenten"><h5 id="x2-4-2-1-referentiecomponenten"><span class="secno">2.4.2.1 </span>Referentiecomponenten</h5><p>API-Management tooling omvat de referentiecomponenten API-Gateway, API-Manager en een API-Portaal. Hieronder is beknopt beschreven wat overheidsorganisaties hieronder kunnen verstaan:</p><ul>
<li>API-Gateway: hiermee worden gegevensverbindingen technisch gefaciliteerd, beveiligd en gemonitord. Alleen de applicaties (afnemers en aanbieders van API's) gebruiken de gateway.</li>
</ul><p>Een API-Gateway wordt ingezet als poort tot het achterliggende datalandschap.</p><p>In cloud-native implementaties zie je steeds vaker een meer gedistribueerd model met behulp van micro gateways (als ingang voor iedere Cloud-omgeving) in plaats van een corporate API-Gateway die alles regelt, eventueel in combinatie met een service mesh<a href="#_ftn2">[2]</a>. Een hybride opstelling is ook mogelijk.</p><ul>
<li><p>API-Manager: zorgt voor de configuratie van de gateway en het beheer van de API's, op basis van patronen en zogenaamde policies.</p>
</li>
<li><p>API-Portaal: een portaal waarin de aangeboden API's aan het brede publiek worden gepresenteerd. Via de specificaties kunnen ze een proeftuin creëren. Gebruikers zijn medewerkers geïnteresseerd in de ontwikkeling en het gebruik van API's. Dit kunnen zowel medewerkers van de overheid zijn, als ook externen (bijvoorbeeld van software leveranciers of ketenpartners).</p>
</li>
</ul><p><em>Note</em>: Landelijke ontwikkelingen op dit vlak i.r.t. developer.overheid.nl kunnen er voor zorgen dat deze functionaliteit op termijn centraal landelijk beschikbaar is.</p><p>In het API-Capability model zijn de functionaliteiten in detail beschreven.
<a href="#api-capability-model">API-Capability model</a></p><p><img src="../media/API-Management.jpg" alt=""></p><p>Figuur 5: Functionaliteit binnen API-Management</p></section><section id="rol-van-de-servicebus"><h5 id="x2-4-2-2-rol-van-de-servicebus"><span class="secno">2.4.2.2 </span>Rol van de servicebus</h5><p>Binnen de integratielaag opereert veelal ook een organisatiebrede servicebus, vaak is er veel energie gestoken in het faciliteren van gegevensstromen via de servicebus (met name op basis van StUF<a href="#_ftn3">[3]</a>). De API-Management tooling komt naast de servicebus te staan en kan zo aanvullende functionaliteit bieden binnen de integratielaag. Het is voor overheden geen doel om bestaande verbindingen via de servicebus te elimineren of de servicebus uit te faseren.</p><p>Wel lijkt gezien de wereldwijde ontwikkelingen de aandacht van integratievraagstukken te gaan verschuiven van de inzet van een organisatiebrede servicebus naar een landschap waarin lightweight API-Management tooling een belangrijke rol speelt. Nieuwe verbindingen (met name voor het ophalen van data) zullen vaker gelegd gaan worden via enkel een API Gateway en de inzet van de servicebus wordt teruggedrongen. Enkel op het gebied waar de huidige servicebus specifieke toegevoegde waarde levert, wordt deze voor overheden nog ingezet voor nieuwe verbindingen (eventueel in combinatie met een API Gateway). Dit zal naar verwachting voor overheden de meest voor de hand liggende oplossing zijn, gezien het huidige applicatielandschap. </p><p>Toegevoegde waarde servicebus i.r.t. API-Gateway:</p><ul>
<li>StUF-koppelvlakken</li>
<li>Complexe transformaties</li>
<li>Orkestratie/logica</li>
<li>Gegevensautorisatie op doelbinding (bij gemeentelijke servicebussen vaak geïntegreerd)</li>
</ul><hr><p><a href="#_ftnref1">[1]</a> Verder aangeduid als 'integratie', van ook bijvoorbeeld informatie.</p><p><a href="#_ftnref2">[2]</a> <a href="https://en.wikipedia.org/wiki/Service_mesh">Service mesh - Wikipedia</a></p><p><a href="#_ftnref3">[3]</a> Zie <a href="https://www.gemmaonline.nl/index.php/StUF_Berichtenstandaard">StUF Berichtenstandaard - GEMMA Online</a></p><hr></section></section></section><section id="informatiemodel-api"><h3 id="x2-5-informatiemodel-api"><span class="secno">2.5 </span>Informatiemodel &amp; API</h3><p>In dit hoofdstuk wordt ingegaan op de relatie tussen informatiemodel en API</p><section id="informatiemodellen"><h4 id="x2-5-1-informatiemodellen"><span class="secno">2.5.1 </span>Informatiemodellen</h4><p>Een informatiemodel beschrijft een werkelijkheid. We onderscheiden vier niveaus variërend van een zo getrouw mogelijke beschrijving van die werkelijkheid tot een specificatie van de wijze van vastlegging van die werkelijkheid in een database of uitwisselformaat <a href="https://www.geonovum.nl/geo-standaarden/metamodel-informatiemodellering-mim">MIM</a> <a href="https://www.geonovum.nl/geo-standaarden/nen-3610-basismodel-voor-informatiemodellen">NEN3610</a> :</p><p><strong>Niveau 1 - Model van begrippen:</strong> een model van begrippen waarin de werkelijkheid wordt beschreven door middel van de daarin gehanteerde begrippen en de relaties tot elkaar.</p><p><strong>Niveau 2 - Conceptueel informatiemodel:</strong> een conceptueel informatiemodel waarin de werkelijkheid wordt beschreven door middel van de informatie die voor dit domein relevant is, onafhankelijk van het ontwerp en de implementatie in systemen. Het geeft een zo getrouw mogelijke beschrijving van die werkelijkheid en is in natuurlijke taal geformuleerd.</p><p><strong>Niveau 3: - Logisch informatie- of gegevensmodel:</strong> een logisch informatie- of gegevensmodel waarin de werkelijkheid wordt beschreven door middel van de representatie van de informatie in de systemen en de uitwisseling tussen systemen en gebruikers. Een logisch informatiemodel is implementatie onafhankelijk en kan in meerdere technische modellen worden geïmplementeerd.</p><p><strong>Niveau 4: - Fysiek of technisch gegevens- of datamodel:</strong> een fysiek of technisch gegevens- of datamodel waarin de werkelijkheid wordt beschreven door middel van de structuur en eigenschappen van de technologie die wordt gebruikt bij de opslag of uitwisseling. Een fysiek of technisch datamodel is afhankelijk van de gekozen techniek of tooling die wordt gebruikt en kan daarvoor geoptimaliseerd zijn.</p><p>(Zie ook <a href="https://www.noraonline.nl/wiki/Vijflaagsmodel#Laag_3:_Informatielaag">NORA Informatielaag</a>)</p></section><section id="definities"><h4 id="x2-5-2-definities"><span class="secno">2.5.2 </span>Definities</h4><p>De volgende begrippen worden gehanteerd in dit hoofdstuk:</p><ul>
<li><em>Informatiemodel</em> : Niveau 3 - Logisch gegevensmodel / datamodel </li>
<li><em>Resource model</em> :  Niveau 4 - Fysiek / technisch datamodel (directe datamodel van een API)</li>
<li><em>Applicatie data model</em> : Niveau 4 - Fysiek / technisch datamodel (datamodel van een achterliggend systeem)</li>
</ul></section><section id="api-informatiemodel-en-resource-model"><h4 id="x2-5-3-api-informatiemodel-en-resource-model"><span class="secno">2.5.3 </span>API, Informatiemodel en Resource model</h4><p>Via een API ontsluit een applicatie data en functionaliteit. Hierbij helpt het om onderscheid te maken tussen het 'interne' Applicatie Data Model en het Resource Model dat via de API wordt aangeboden.</p><p>Het Resource Model is als het ware een logische view op het achterliggende Data Model.</p><p><img src="https://github.com/Geonovum/KP-APIs/raw/master/overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/API-Informatiemodel.png" alt="alt text"></p><p>Figuur 6: Resource Model</p><p>Wanneer het Resource Model 1 op 1 gelijk is aan het achterliggende Data Model is de vertaling/mapping eenvoudig en kan dit ook geautomatiseerd worden : het Resource Model en de API kunnen bijvoorbeeld worden gegenereerd vanuit het Applicatie Data Model.</p><section id="ontkoppeling"><h5 id="x2-5-3-1-ontkoppeling"><span class="secno">2.5.3.1 </span>Ontkoppeling</h5><p>Door Applicatie Data Model en Resource Model te ontkoppelen kunnen deze apart van elkaar evolueren. Dit heeft een aantal voordelen:</p><section id="breaking-changes"><h6 id="x2-5-3-1-1-breaking-changes"><span class="secno">2.5.3.1.1 </span>Breaking changes</h6><p>Liefst wil je voorkomen dat een aanpassing aan het Applicatie Data Model welke verder geen waarde heeft voor de afnemers / clients van de data leidt tot verplichte aanpassingen/updates. Door te ontkoppelen kunnen breaking changes worden voorkomen voor bestaande clients;</p></section><section id="verbergen-complexiteit"><h6 id="x2-5-3-1-2-verbergen-complexiteit"><span class="secno">2.5.3.1.2 </span>Verbergen complexiteit</h6><p>Voor complexe Domeinen of gecombineerde Diensten waarbij meerdere bronnen worden gecombineerd is het waardevol om het Resource Model zo eenvoudig en duidelijk mogelijk te houden. In het Resource Model kan de achterliggende complexiteit verborgen blijven en kan de interface gebruikersvriendelijk worden gemaakt. Het Resource model is hier dan een abstraherende laag die alleen die zaken aanbiedt die de gebruiker nodig heeft en die aansluiten op de belevingswereld van de gebruiker.</p></section><section id="integreren-innoveren"><h6 id="x2-5-3-1-3-integreren-innoveren"><span class="secno">2.5.3.1.3 </span>Integreren &amp; Innoveren</h6><p>Het Resource Model als logische view op achterliggende datamodellen heeft ook als voordeel dat op de laag van het Resource Model al integratie van data modellen kan plaatsvinden nog voordat de achterliggende modellen zijn aangepast of volledig geïntegreerd. Een (nieuw) geïntegreerd Resource model over meerdere achterliggende datamodellen heen kan zo databronnen integreren en aanbieden. Met behulp van een geïntegreerd resourcemodel op het niveau van API's kan sneller gestandaardiseerd worden en kan men ook sneller innoveren.</p><p><img src="https://github.com/Geonovum/KP-APIs/raw/master/overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/API-Infomodel2.png" alt="alt text"></p><p>Figuur 7: Geïntegreerd Resource Model</p></section></section></section><section id="aanbevelingen"><h4 id="x2-5-4-aanbevelingen"><span class="secno">2.5.4 </span>Aanbevelingen</h4><section id="verbindt-het-resource-model-met-een-informatiemodel"><h5 id="x2-5-4-1-verbindt-het-resource-model-met-een-informatiemodel"><span class="secno">2.5.4.1 </span>Verbindt het Resource Model met een  Informatiemodel</h5><p>Bij het aanbieden van data via een API is het van groot belang om de verbinding met een informatiemodel te hebben en deze verbinding ook te beschrijven en te publiceren bij de API documentatie.</p><ul>
<li>Dit bevordert begrip bij afnemers, zodat zij de ruwe data goed kunnen interpreteren.</li>
<li>Dit houdt de API beheersbaar en zorgt dat de API gemakkelijker kan mee-evolueren met het informatielandschap (immers wijzigingen in het informatiemodel kunnen dan gerelateerd worden aan wijzigingen in de API).</li>
<li>Wanneer een API informatie uit een stelsel van gegevensbronnen ontsluit bevordert dit interoperabiliteit in het stelsel.</li>
</ul><p>Het Resource Model van een API is een (of mogelijk meerdere, afhankelijk van uitwisselformaat) Niveau 4 - Fysiek / technisch datamodel(len). Het is namelijk een model van de uitwisseling van gegevens in een concreet uitwisselformaat. Bijvoorbeeld gespecificeerd in een OAS document. <a href="https://www.openapis.org/">OAS</a>.
Het is echter belangrijk om de verbinding met een Niveau 3: - Logisch informatie- of gegevensmodel uit te drukken, omdat dit een implementatie-onafhankelijk model is, wat begrip, maar ook interoperabiliteit, bevordert. Het bevordert interoperabiliteit met andere Niveau 3 informatiemodellen in een stelsel, maar biedt ook één overkoepelend informatiemodel wanneer er sprake is van gegevensuitwisseling conform verschillende Niveau 4 informatiemodellen gebaseerd op hetzelfde Niveau 3 informatiemodel.</p></section></section></section><section id="api-security-architectuur"><h3 id="x2-6-api-security-architectuur"><span class="secno">2.6 </span>API Security Architectuur</h3><p>ICT beveiliging is over het algemeen gebaseerd op de aspecten <em>beschikbaarheid</em>, <em>integriteit</em> en <em>vertrouwelijkheid</em>. Dit hoofdstuk gaat allereerst in op deze drie aspecten en hun relaties met API beveiliging, waarna een aantal aan API beveiliging gerelateerde architectuurprincipes en architectuurpatronen zullen worden beschreven.</p><section id="beschikbaarheid"><h4 id="x2-6-1-beschikbaarheid"><span class="secno">2.6.1 </span>Beschikbaarheid</h4><p>Beschikbaarheid gaat erover om te allen tijde bij informatie en informatiebronnen te kunnen en dat de beschikbaarheid van diensten voldoen aan gemaakte continuïteitsafspraken. Beschikbaarheid van gegevens en systeemfuncties wordt over het algemeen gegarandeerd door vermeerdering van systeemfuncties, door herstelbaarheid en beheersing van verwerkingen, door voorspelling van discontinuïteit en handhaving van de functionaliteit. Binnen de NORA is beschikbaarheid opgenomen als afgeleid principe <a href="https://www.noraonline.nl/wiki/Beschikbaarheid">AP41</a>.</p><p>In de context van API's gaat beschikbaarheid erover dat consumenten van aangeboden API's juist worden geinformeerd over de afspraken omtrent (on)beschikbaarheid van de API's, dat de beschikbare capaciteit wordt verdeeld over de aangesloten API Clients en dat onvoorziene onbeschikbaarheid voor zowel aanbieders als consumenten van API's inzichtelijk wordt gemaakt, zodat daar juist op ingespeeld kan worden.</p><p>Aan beschikbaarheid gerelateerde API capabilities zijn <em>Caching</em>, <em>Rate limiting / Throttling</em>, <em>SLA Management</em>, <em>API Monitoring / Alerting</em> en <em>Foutafhandeling</em>. De onderstaande sectie <em>Componenten</em> beschrijft deze in meer detail en geeft aan waar deze worden toegepast in een API architectuur.</p></section><section id="integriteit"><h4 id="x2-6-2-integriteit"><span class="secno">2.6.2 </span>Integriteit</h4><p>Integriteit gaat over het waarborgen van de integriteit van gegevens en systeemfuncties. Dit wordt over het algemeen bereikt door validatie en beheersing van gegevensverwerking en geautoriseerde toegang tot gegevens en systeemfuncties, door scheiding van systeemfuncties, door controle op communicatiegedrag en gegevensuitwisseling en door beperking van functionaliteit. Binnen de NORA is integriteit opgenomen als afgeleid principe <a href="https://www.noraonline.nl/wiki/Integriteit">AP42</a>.</p><p>In de context van API's gaat integriteit over het versleutelen en ondertekenen van berichten en gegevens, het "tamper-proof" maken van API's (API Hardening) middels validatie van API verzoeken en de vastlegging van de gegevensuitwisseling tussen API aanbieders en consumenten.</p><p>Aan integriteit gerelateerde API capabilities zijn <em>Logging / Audit Trail</em>, <em>Policy Enforcement</em>, <em>Identificatie / Authenticatie / Autorisatie</em> en <em>Sleutelbeheer</em>. De onderstaande sectie <em>Componenten</em> beschrijft deze in meer detail en geeft aan waar deze worden toegepast in een API architectuur.</p></section><section id="vertrouwelijkheid"><h4 id="x2-6-3-vertrouwelijkheid"><span class="secno">2.6.3 </span>Vertrouwelijkheid</h4><p>Vertrouwelijkheid gaat over het geheimhouden van gegevens en gegevensbronnen. Dit wordt gegarandeerd door scheiding van systeemfuncties, door controle op communicatiegedrag en gegevensuitwisseling, door validatie op toegang tot gegevens en systeemfuncties en door versleuteling van gegevens. Binnen de NORA is vertrouwelijkheid opgenomen als afgeleid principe <a href="https://www.noraonline.nl/wiki/Vertrouwelijkheid_%28principe%29">AP43</a>.</p><p>In de context van API's gaat vertrouwelijkheid over het ervoor te zorgen dat tussen API aanbieder en consument uitgewisselde gegevens niet door onbevoegden kunnen worden ingezien en misbruikt.</p><p>Aan vertrouwelijkheid gerelateerde API capabilities zijn <em>Caching</em>, <em>Analytics</em>, <em>Logging / Audit Trail</em>, <em>Identificatie / Authenticatie / Autorisatie</em>, <em>Sleutelbeheer</em> en <em>Gebruiker / Rol beheer</em>. De onderstaande sectie <em>Componenten</em> beschrijft deze in meer detail en geeft aan waar deze worden toegepast in een API architectuur.</p></section><section id="standaard-componenten"><h4 id="x2-6-4-standaard-componenten"><span class="secno">2.6.4 </span>Standaard componenten</h4><p>Onderstaande afbeelding geeft een overzicht van standaard componenten in een API architectuur. Deze sectie beschrijft de aan API beveiliging gerelateerde componenten in dit diagram.</p><p><img src="https://github.com/Geonovum/KP-APIs/raw/master/overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/api-security-architecture.png" alt="API Security Architectuur diagram"></p><p>Figuur 8: API Security</p><section id="actors-en-clients"><h5 id="x2-6-4-1-actors-en-clients"><span class="secno">2.6.4.1 </span>Actors en Clients</h5><p>Onderstaand overzicht beschrijft de actoren en API Clients welke een rol spelen bij API beveiliging uit bovenstaand diagram. </p><ul>
<li><strong>Eindgebruikers:</strong> Eindgebruikers welke door middel van devices en client apps gebruik maken van API's.</li>
<li><strong>Client ontwikkelaars:</strong> Ontwikkelaars van client API gebruikende client apps voor verschillende devices.</li>
<li><strong>Web Applicatie:</strong> een API client die op een server draait, welke door eindgebruikers wordt gebruikt middels een web interface.</li>
<li><strong>System-to-System (S2S) Applicatie:</strong> een API client die op een server draait, welke namens zichzelf (in plaats van namens een eindgebruiker) API's benadert middels een system-to-system koppeling, in plaats van namens een eindgebruiker.</li>
<li><strong>Native App:</strong> een API client die als native applicatie op het device van de eindgebruiker draait en zelfstandig API's benadert.</li>
<li><strong>Browser-based App:</strong> een API client die volledig in de browser draait en zelfstandig API's benadert, bijvoorbeeld op basis van JavaScript.</li>
</ul></section><section id="beveiligings-componenten"><h5 id="x2-6-4-2-beveiligings-componenten"><span class="secno">2.6.4.2 </span>Beveiligings componenten</h5><p>Onderstaand overzicht beschrijft de componenten welke een rol spelen bij API beveiliging uit bovenstaand diagram.</p><ul>
<li><strong>Identity Provider:</strong> Biedt de mogelijkheid aan eindgebruikers en Client applicaties om zichzelf te identificeren en Authentiseert deze. Geeft een authenticatie token af aan de Client applicatie waarmee deze API endpoints kan benaderen.</li>
<li><strong>API Gateway:</strong> De toegangspoort tot het achterliggende applicatie landschap. Alle API interactie verloopt via de API Gateway, waardoor de API Gateway een centrale rol heeft in de API beveiliging. Over het algemeen bevat de API Gateway een aantal traffic policies (zie volgend punt) welke bij elk API verzoek worden gevalideerd en voert de API Gateway initiële autorisatie van API verzoeken uit. Deze autorisatie omvat minimaal een controle of de ontvangen verzoeken van correcte Access Tokens zijn voorzien en kan eventueel role-based autorisaties toepassen. De API Gateway kan een verbinding met de Identity Provider hebben voor het geval door de Identity Provider afgegeven tokens onvoldoende informatie bevatten om autorisaties toe te passen.</li>
<li><strong>Traffic Policies:</strong> Een verzameling policies welke worden toegepast op al het API verkeer, of een specifiek deel daarvan. Voorbeelden zijn <em>Rate Limiting / Throttling</em>, <em>SLA Management</em> en <em>Input validatie</em>. Over het algemeen bieden API Gateways de mogelijkheden om traffic policies direct in te bouwen.</li>
<li><strong>Gebruiker / client / rol beheer:</strong> Het beheren van gebruikers van de API tooling, zoals beheerders, API developers en client developers, geregistreerde Client applicaties en een mapping van eindgebruikers identiteiten en rollen naar specifieke autorisaties. Dit is <em>niet</em> de identity store welke credentials van eindgebruikers bevat; dat gedeelte is de verantwoordelijkheid van de Identity Provider.</li>
<li><strong>Sleutel beheer:</strong> Beheert het sleutelmateriaal dat wordt gebruikt voor versleuteling en ondertekening van berichten welke worden uitgewisseld tussen API Gateway, Identity Provider en Client applicaties.</li>
<li><strong>Logging, Monitoring, Analytics, Caching:</strong> Cross-cutting functionaliteiten welke op verschillende en/of meerdere plekken in het landschap geïmplementeerd kunnen worden. Voor al deze functionaliteiten is het van belang dat deze in lijn met AVG richtlijnen worden opgezet. Bij caching is het daarnaast belangrijk cache invalidaties te implementeren om te voorkomen dat verouderde cache data kan worden teruggehaald, zeker als daar privacy gevoelige informatie in kan staan.</li>
<li><strong>Back-end Services:</strong> Applicaties die de daadwerkelijke resources implementeren. </li>
</ul></section></section><section id="principes"><h4 id="x2-6-5-principes"><span class="secno">2.6.5 </span>Principes</h4><p>De volgende basisprincipes voor API beveiliging moeten worden toegepast bij het aanbieden van API dienstverlening:</p><ul>
<li>Beschouw elke API alsof deze potentieel als externe API aangeboden wordt, zelfs als daar momenteel nog geen plannen voor zijn.</li>
<li>Zero-trust networking: elk applicatie-component gedraagt zich alsof deze aan het publieke netwerk zit.</li>
<li>Gebruik generieke methoden voor authenticatie en authorisatie over alle API's, bij voorkeur op basis van bestaande componenten. Voorkom specifieke oplossingen voor individuele API's.</li>
<li>Versleutel alle data in opslag (at rest) en in uitwisseling (in transit).</li>
<li>Least privilege: API clients krijgen alleen de toegang die zij minimaal nodig hebben om hun functie uit te oefenen.</li>
</ul><p>Verder moeten de aanbevelingen in de volgende externe documenten worden overwogen bij API ontwikkeling:</p><ul>
<li><a href="https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet">OWASP Top Ten Cheat Sheet</a></li>
<li><a href="https://www.owasp.org/index.php/REST_Security_Cheat_Sheet">OWASP REST Security Cheat Sheet</a></li>
<li><a href="https://www.owasp.org/index.php/OWASP_API_Security_Project">OWASP API Security Project</a></li>
</ul></section><section id="architectuurpatronen"><h4 id="x2-6-6-architectuurpatronen"><span class="secno">2.6.6 </span>Architectuurpatronen</h4><section id="gedelegeerde-identificatie-en-authenticatie"><h5 id="x2-6-6-1-gedelegeerde-identificatie-en-authenticatie"><span class="secno">2.6.6.1 </span>Gedelegeerde Identificatie en Authenticatie</h5><p>Authenticatie beschrijft het met een bepaalde zekerheid vaststellen of een persoon of systeem echt degene is die deze zegt te zijn. </p><p>In de context van API's is authenticatie van toepassing op de API Client, oftewel de applicatie die de API resources benadert, en de eindgebruiker, oftewel de persoon namens wie de API Client de API resources benadert.</p><p>Waar authenticatie van de API Client bij de API resources plaats kan vinden, bijvoorbeeld door middel van asymmetrische versleuteling of gedeelde geheimen, wordt authenticatie van eindgebruikers over het algemeen gedelegeerd aan een externe Identity Provider, bijvoorbeeld door middel van OAuth2 of OpenID Connect.</p><p>Bij gedelegeerde Authenticatie identificeren de API Client en eindgebruiker zichzelf en ontvangt de API Client, na succesvolle authenticatie, een token waarmee de API resources kunnen worden bevraagd.</p></section><section id="token-based-autorisatie"><h5 id="x2-6-6-2-token-based-autorisatie"><span class="secno">2.6.6.2 </span>Token-based Autorisatie</h5><p>Autorisatie beschrijft het vaststellen wat een geauthenticeerd persoon of systeem mag, of juist niet mag.</p><p>Door de toepassing van gedelegeerde identificatie en authenticatie in combinatie met tokens, wordt het ingewikkelder om applicatie-specifieke autorisatie toe te passen. De API aanbieder moet bijvoorbeeld autorisatie beslissingen nemen op basis van de beperkte set aan data in het ontvangen token.</p><p>Voor gevallen dat het token onvoldoende informatie biedt om een autorisatie beslissing op te baseren, kan het benodigd zijn om token introspection toe te passen. In dit geval vraagt de API aanbieder op basis van het ontvangen token meer informatie over de geauthenticeerde gebruiker bij de Identity Provider.</p><p>Een belangrijk component bij autorisaties in de context van API's is de API Gateway. Op basis van een door de Identity Provider afgegeven access token kan de API Gateway beslissen of API aanroepen zijn toegestaan of niet. Hierbij kan de API Gateway <em>role-based access control (RBAC)</em> toepassen; <em>domein-specifieke autorisaties</em> worden over het algemeen toegepast door de back-ends om implementatie van business logica in de API Gateway te voorkomen.</p><p>Voor de implementatie van <em>domein-specifieke autorisaties</em> in de back-ends kunnen tevens microgateways of een service mesh oplossing worden gekozen. Bijkomend voordeel van het gebruik van een service mesh is dat deze standaard werken op basis van zero-trust networking.</p></section></section><section id="referenties"><h4 id="x2-6-7-referenties"><span class="secno">2.6.7 </span>Referenties</h4><ul>
<li><a href="https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet">OWASP Top Ten Cheat Sheet</a></li>
<li><a href="https://www.owasp.org/index.php/REST_Security_Cheat_Sheet">OWASP REST Security Cheat Sheet</a></li>
<li><a href="https://owasp.org/www-project-api-security">OWASP - API Security Project</a></li>
<li><a href="https://www.noraonline.nl/wiki/Beschikbaarheid">NORA - Beschikbaarheid principe</a></li>
<li><a href="https://www.noraonline.nl/wiki/Integriteit">NORA - Integriteit principe</a></li>
<li><a href="https://www.noraonline.nl/wiki/Vertrouwelijkheid_%28principe%29">NORA - Vertrouwelijkheid principe</a></li>
</ul></section></section><section id="event-driven-architecture-eda"><h3 id="x2-7-event-driven-architecture-eda"><span class="secno">2.7 </span>Event Driven Architecture (EDA)</h3><section id="inleiding-0"><h4 id="x2-7-1-inleiding"><span class="secno">2.7.1 </span>Inleiding</h4><p>Event-driven architectuur (EDA) is een software design pattern dat bij de ontwikkeling van systemen uitgaat van uitwisseling van gebeurtenissen tussen componenten. Dit type architectuur wint aan populariteit omdat dit bepaalde voordelen met zich meebrengt, vooral als het gaat om schaalbaarheid en flexibiliteit.
Event-driven Architecture heeft een relatie met API Architectuur in de zin dat dataresource API’s zich kunnen bevinden in een Event Driven omgeving en ook worden doorgaans API’s gebruikt om gebeurtenissen aan te maken en te verwerken. </p></section><section id="event-driven-architectuur-concepten"><h4 id="x2-7-2-event-driven-architectuur-concepten"><span class="secno">2.7.2 </span>Event Driven Architectuur concepten</h4><p>Een EDA bestaat uit event producenten die events produceren en doorgeven aan event consumers welke luisteren naar de events en hierop reageren.</p><p><img src="media/api-eda.png" alt="Event Driven Architectuur diagram"></p><p>Figuur 9: Basispatroon waarbij een Producer gebruik maakt van een Intermediair voor het verstrekken van notificaties aan Consumers</p><ul>
<li><p>De "Producer" is een specifieke instantie, proces of apparaat dat de Gebeurtenis aangeeeft</p>
</li>
<li><p>Een ‘Consument’ ontvangt de gebeurtenis en handelt ernaar. Het gebruikt de context en gegevens om een bepaalde logica uit te voeren, wat kan leiden tot het optreden van nieuwe gebeurtenissen. </p>
</li>
<li><p>Een "Intermediair" ontvangt een bericht met daarin een gebeurtenis, met als doel dit door te sturen naar de volgende ontvanger, die een andere tussenpersoon of een consument kan zijn. Een typische taak voor een tussenpersoon is om de gebeurtenis naar ontvangers te routeren op basis van de informatie in de context.</p>
</li>
</ul><p>Het Publish-Subscribe patroon is een bekend en veel toegepaste patroon bij EDA.
Dit patroon beschrijft in de kern hoe:</p><ul>
<li>Aanbieders/Producers gegevens publiceren over plaatsgevonden gebeurtenissen (‘Publish’)
en</li>
<li>Afnemers/Consumers zich abonneren (‘Subscribe’) om na het publiceren van gegevens over bepaalde gebeurtenissen notificaties te ontvangen. </li>
</ul></section><section id="voordelen-eda"><h4 id="x2-7-3-voordelen-eda"><span class="secno">2.7.3 </span>Voordelen EDA</h4><p>EDA brengt voordelen met zich mee op het gebied van flexibiliteit en robuustheid van de IT-Architectuur van een organisatie door de mate van ontkoppeling en asynchrone verwerking die deze architectuur mogelijk maakt.</p><p>Hieronder een aantal voordelen</p><ul>
<li><p>Ontkoppeling van systemen : Deze architectuur is van nature losjes gekoppeld, omdat applicaties met elkaar communiceren via gebeurtenissen (en een tussenlaag). Dat maakt het eenvoudiger om applicaties onafhankelijk van elkaar te ontwikkelen, testen en implementeren.</p>
</li>
<li><p>Asynchrone communicatie : In een EDA hoeven aanvragen niet op elkaar te wachten. </p>
</li>
<li><p>Schaalbaarheid en gemak van het toevoegen van nieuwe consumenten : EDA maakt het gemakkelijk om nieuwe applicaties of diensten te implementeren en te integreren zonder de bestaande te beïnvloeden.</p>
</li>
<li><p>Hoge doorvoer en low latency : Een gebeurtenis gestuurde architectuur kan een groot aantal gebeurtenissen met een low latency verwerken.</p>
</li>
</ul></section><section id="uitdagingen"><h4 id="x2-7-4-uitdagingen"><span class="secno">2.7.4 </span>Uitdagingen</h4><ul>
<li>Complexiteit : De samenwerking tussen grote aantallen kleine componenten maakt het moeilijker om proces-flows te monitoren ;</li>
<li>Testen : Door asynchrone verwerking en complexiteit is het moeilijker om een testomgeving en acceptatie omgeving te maken die gelijk is aan de productieomgeving</li>
</ul></section><section id="meer-informatie"><h4 id="x2-7-5-meer-informatie"><span class="secno">2.7.5 </span>Meer informatie</h4><p>Zie ook de gedetailleerde uitwerking van EDA in de context van het project Notificatieservices en de CloudEvents standaard:</p><ul>
<li><a href="../../overleggen/Werkgroep%20API%20architectuur/uitwerkingen/media/notificatieservices_architectuur.pdf">Notificatie services &amp; EDA</a></li>
<li><a href="https://logius.nl/domeinen/gegevensuitwisseling/nl-gov-profile-cloudevents">CloudEvents standaard</a></li>
</ul></section></section></section>
  

<p role="navigation" id="back-to-top"><a href="#title">
  <abbr title="Naar begin">↑</abbr></a></p><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>