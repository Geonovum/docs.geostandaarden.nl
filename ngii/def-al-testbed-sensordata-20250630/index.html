<!DOCTYPE html><html lang="en"><head>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<meta name="generator" content="ReSpec 35.3.0">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
  
  
  
  
  
  
  
<script>document.title = respecConfig.title</script>
<title>Testbed sensordata report</title>
  
<title>Geonovum testbed sensordata 2025</title>
  
<link rel="shortcut icon" type="image/x-icon" href="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.ico">
  
  
<link rel="stylesheet" type="text/css" href="https://tools.geostandaarden.nl/publication/organisation/geonovum/base.css">
  
  
<style>
div.imageinfo img {max-width: none;}
</style>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:italic}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline;position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-.7em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<style id="respec-nlgov">
img.license{float:left;padding-right:5px;background:0 0}
</style>
<meta name="color-scheme" content="light">
<meta name="description" content="This is the 2025 Geonovum testbed sensordata report. It contains the results of Geonovum's investigation into OGC sensordata standards. This was done with market participation. Using a public tender process, three parties were selected to investigate one research question each:">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>

  .sidelabel {
    position: fixed;
    -webkit-transform-origin: top right;
    right: 100%;
    top: 0;
    -webkit-transform: rotate(-90deg);
    padding: 4px 50px 4px 10px;
    color: white;
    white-space: nowrap;
    z-index: 1;
    background-color: #045D9F;
  }
</style>
<script type="text/javascript">
   /* Any custom mermaid.js scripts will go here. */
  </script>
<style>

  /* Any custom mermaid.js scripts will go here. */
  }
</style>
<script id="initialUserConfig" type="application/json">{
  "nl_organisationName": "Geonovum",
  "nl_organisationStylesURL": "https://tools.geostandaarden.nl/respec/style/",
  "nl_organisationPublishURL": "https://docs.geostandaarden.nl/",
  "logos": [
    {
      "src": "https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg",
      "alt": "Geonovum",
      "id": "Geonovum",
      "height": 67,
      "width": 132,
      "url": "https://www.geonovum.nl/geo-standaarden"
    }
  ],
  "postProcess": [
    null
  ],
  "latestVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "shortName",
    "/"
  ],
  "thisVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "specStatus",
    "-",
    "specType",
    "-",
    "shortName",
    "-",
    "publishDate"
  ],
  "prevVersion": [
    "nl_organisationPublishURL",
    "pubDomain",
    "/",
    "previousMaturity",
    "-",
    "specType",
    "-",
    "shortName",
    "-",
    "previousPublishDate"
  ],
  "useLogo": true,
  "useLabel": true,
  "license": "cc-by",
  "addSectionLinks": true,
  "localizationStrings": {
    "en": {
      "wv": "Editor's draft",
      "cv": "Candidate recommendation",
      "vv": "Proposed recommendation",
      "def": "Recommendation",
      "ld": "Living document",
      "basis": "Document",
      "no": "Norm",
      "st": "Standard",
      "im": "Information model",
      "pr": "Practical guideline",
      "hr": "Guide",
      "wa": "Work process agreement",
      "al": "General",
      "bd": "Governance documentation",
      "bp": "Best practice"
    },
    "nl": {
      "wv": "Werkversie",
      "cv": "Consultatieversie",
      "vv": "Versie ter vaststelling",
      "def": "Vastgestelde versie",
      "ld": "Levend document",
      "basis": "Document",
      "no": "Norm",
      "st": "Standaard",
      "im": "Informatiemodel",
      "pr": "Praktijkrichtlijn",
      "hr": "Handreiking",
      "wa": "Werkafspraak",
      "al": "Algemeen",
      "bd": "Beheerdocumentatie",
      "bp": "Best practice"
    }
  },
  "sotdText": {
    "nl": {
      "sotd": "Status van dit document",
      "def": "Dit is de definitieve versie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "wv": "Dit is een werkversie die op elk moment kan worden gewijzigd, verwijderd of vervangen door andere documenten. Het is geen stabiel document.",
      "cv": "Dit is een consultatieversie.",
      "vv": "Dit is de definitieve conceptversie van dit document. Wijzigingen naar aanleiding van consultaties zijn doorgevoerd.",
      "basis": "Dit is een document zonder officiële status.",
      "ld": "Dit is een levend document dat regelmatig gewijzigd wordt."
    },
    "en": {
      "sotd": "Status of this document",
      "def": "This is the definitive version of this document. Edits resulting from consultations have been applied.",
      "wv": "This is a working draft that can be changed, removed or replaced by other documents at any time. It is not a stable document.",
      "cv": "This is a stable draft, published for public comment.",
      "vv": "This is the final draft of this document. Edits resulting from consultations have been applied.",
      "basis": "This document has no official standing.",
      "ld": "This is a living document, which is updated regularly."
    }
  },
  "labelColor": {
    "def": "#045D9F",
    "wv": "#FF0000",
    "cv": "#045D9F",
    "vv": "#045D9F",
    "basis": "#80CC28",
    "ld": "#80CC28"
  },
  "licenses": {
    "cc0": {
      "name": "Creative Commons 0 Public Domain Dedication",
      "short": "CC0",
      "url": "https://creativecommons.org/publicdomain/zero/1.0/",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/CC-Licentie.svg"
    },
    "cc-by": {
      "name": "Creative Commons Attribution 4.0 International Public License",
      "short": "CC-BY",
      "url": "https://creativecommons.org/licenses/by/4.0/legalcode",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg"
    },
    "cc-by-nd": {
      "name": "Creative Commons Naamsvermelding-GeenAfgeleideWerken 4.0 Internationaal",
      "short": "CC-BY-ND",
      "url": "https://creativecommons.org/licenses/by-nd/4.0/legalcode.nl",
      "image": "https://tools.geostandaarden.nl/respec/style/logos/cc-by-nd.svg"
    }
  },
  "localBiblio": {
    "SemVer": {
      "href": "https://semver.org",
      "title": "Semantic Versioning 2.0.0",
      "authors": [
        "T. Preston-Werner"
      ],
      "date": "June 2013"
    },
    "MIM12": {
      "id": "MIM12",
      "title": "MIM - Metamodel Informatie Modellering (Versie 1.2)",
      "href": "https://docs.geostandaarden.nl/mim/def-st-mim-20240613/",
      "status": "Definitief",
      "publisher": "Geonovum",
      "date": "2024-06-13"
    },
    "3DTILES": {
      "title": "3D Tiles Specification 1.0",
      "href": "http://docs.opengeospatial.org/cs/18-053r2/18-053r2.html",
      "status": "Approved for public release",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Patrick Cozzi",
        "Sean Lilley",
        "Gabby Getz"
      ],
      "date": "2019-01-31",
      "id": "3DTILES"
    },
    "adr-mod-geo": {
      "title": "API Design rules Module: Geospatial",
      "href": "https://docs.geostandaarden.nl/api/API-Strategie-mod-geo/",
      "status": "Consultatieversie",
      "publisher": "Geonovum",
      "editors": [
        "Linda van den Brink"
      ],
      "authors": [
        "Pieter Bresters",
        "Linda van den Brink",
        "Paul van Genuchten",
        "George Mathijssen",
        "Mark Strijker"
      ],
      "date": "2022-09-30",
      "id": "adr-mod-geo"
    },
    "CIS10": {
      "title": "ISO 19123-2:2018 Geographic information — Schema for coverage geometry and functions — Part 2: Coverage implementation schema",
      "href": "https://www.iso.org/standard/70948.html",
      "status": "Published",
      "publisher": "ISD",
      "date": "2018-10-01",
      "id": "CIS10"
    },
    "CityGML2": {
      "title": "OGC City Geography Markup Language (CityGML) Encoding Standard",
      "href": "https://portal.ogc.org/files/?artifact_id=47842",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Gerhard Gröger",
        "Thomas H. Kolbe",
        "Claus Nagel",
        "Karl-Heinz Häfele"
      ],
      "date": "2012-04-04",
      "id": "CityGML2"
    },
    "CityGML3": {
      "title": "OGC City Geography Markup Language (CityGML) Part 1: Conceptual Model Standard v3.0",
      "href": "https://docs.ogc.org/is/20-010/20-010.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Thomas H. Kolbe",
        "Tatjana Kutzner",
        "Carl Stephen Smyth",
        "Claus Nagel",
        "Carsten Roensdorf",
        "Charles Heazel"
      ],
      "date": "2021-09-13",
      "id": "CityGML3"
    },
    "CityJSON": {
      "title": "CityJSON Community Standard 1.0",
      "href": "https://docs.ogc.org/cs/20-072r2/20-072r2.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Hugo Ledoux"
      ],
      "date": "2021-08-13",
      "id": "CityJSON"
    },
    "COVJSON": {
      "title": "OGC CoverageJSON Community Standard 1.0-draft_0.2.2",
      "href": "https://portal.ogc.org/files/102051",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Chris Little",
        "Jon Blower",
        "Maik Riechert"
      ],
      "id": "COVJSON"
    },
    "CSW2APISO": {
      "title": "OpenGIS Catalogue Services Specification 2.0.2 - ISO Metadata Application Profile",
      "href": "http://portal.opengeospatial.org/files/?artifact_id=21460",
      "status": [
        "Adopted specification"
      ],
      "publisher": "Open Geospatial Consortium",
      "id": "CSW2APISO"
    },
    "CSWISOAP": {
      "title": "OGC 07-045r2: OGC Catalogue Services Specification 2.0.2 - ISO Metadata Application Profile: Corrigendum, version 1.0.2",
      "href": "https://portal.ogc.org/files/80534",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Uwe Voges",
        "Kristian Senkler"
      ],
      "date": "2020-11-19",
      "id": "CSWISOAP"
    },
    "DCAT-AP-2.1.1": {
      "title": "DCAT Application Profile for data portals in Europe 2.1.1",
      "href": "https://joinup.ec.europa.eu/collection/semantic-interoperability-community-semic/solution/dcat-application-profile-data-portals-europe/releases",
      "publisher": "European Commission",
      "date": "2022-06-24",
      "id": "DCAT-AP-2.1.1"
    },
    "epsg": {
      "title": "EPSG Geodetic Parameter Dataset",
      "href": "https://epsg.org/home.html",
      "status": "Published",
      "publisher": "Geodesy Subcommittee of the IOGP Geomatics Committee",
      "id": "epsg"
    },
    "FE20": {
      "title": "OGC 09-026r2: OGC Filter Encoding 2.0 Encoding Standard - With Corrigendum, Version 2.0.3",
      "href": "http://docs.opengeospatial.org/is/09-026r2/09-026r2.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": "Panagiotis (Peter) A. Vretanos",
      "date": "2014-08-18",
      "id": "FE20"
    },
    "GeoPackage": {
      "title": "OGC GeoPackage Encoding Standard - with Corrigendum, v1.3.1",
      "href": "https://www.geopackage.org/spec131/",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Jeff Yutzler"
      ],
      "date": "2021-11-16",
      "id": "GeoPackage"
    },
    "GEOSPARQL11": {
      "title": "OGC GeoSPARQL - A Geographic Query Language for RDF Data",
      "href": "https://opengeospatial.github.io/ogc-geosparql/geosparql11/spec.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Nicholas J. Car",
        "Timo Homburg",
        "Matthew Perry",
        "John Herring",
        "Frans Knibbe",
        "Simon J.D. Cox",
        "Joseph Abhayaratna",
        "Mathias Bonduel"
      ],
      "date": "2022",
      "id": "GEOSPARQL11"
    },
    "GeoTIFF": {
      "title": "OGC GeoTIFF standard v1.1",
      "href": "http://docs.opengeospatial.org/is/19-008r4/19-008r4.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Emmanuel Devys",
        "Ted Habermann",
        "Chuck Heazel",
        "Roger Lott",
        "Even Rouault"
      ],
      "date": "2019-09-14",
      "id": "GeoTIFF"
    },
    "GIMEG": {
      "href": "https://docs.geostandaarden.nl/nen3610/gimeg",
      "publisher": "Geonovum",
      "status": "Vastgesteld",
      "authors": [
        "Linda van den Brink",
        "Paul Janssen",
        "Wilko Quak"
      ],
      "title": "Geometrie in model en GML",
      "date": "2021-03-26",
      "id": "GIMEG"
    },
    "GML31": {
      "title": "OpenGIS® Geography Markup Language (GML) Implementation Specification, v3.1.1",
      "href": "https://portal.ogc.org/files/?artifact_id=4700",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Simon Cox",
        "Paul Daisey",
        "Ron Lake",
        "Clemens Portele",
        "Arliss Whiteside"
      ],
      "date": "2004-02-07",
      "id": "GML31"
    },
    "GML33": {
      "title": "OGC® Geography Markup Language (GML) — Extended schemas and encoding rules, v3.3",
      "href": "https://portal.ogc.org/files/?artifact_id=46568",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Clemens Portele"
      ],
      "date": "2012-02-07",
      "id": "GML33"
    },
    "GMLJPEG2000": {
      "title": "OGC® GML in JPEG 2000 (GMLJP2) Encoding Standard Part 1: Core v.2.1",
      "href": "http://docs.opengeospatial.org/is/08-085r8/08-085r8.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Lucio Colaiacomo",
        "Joan Masó",
        "Emmanuel Devys",
        "Eric Hirschorn"
      ],
      "date": "2018-08-27",
      "id": "GMLJPEG2000"
    },
    "GMLSF": {
      "title": "Geography Markup Language (GML) simple features profile (with Corrigendum) (2.0)",
      "href": "https://portal.ogc.org/files/?artifact_id=42729",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Linda van den Brink",
        "Clemens Portele",
        "Panagiotis (Peter) A. Vretanos"
      ],
      "date": "2012-04-05",
      "id": "GMLSF"
    },
    "HDF5": {
      "title": "OGC Hierarchical Data Format Version 5 (HDF5®) Core Standard",
      "href": "http://docs.opengeospatial.org/is/18-043r3/18-043r3.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Aleksandar Jelenak",
        "Ted Habermann",
        "Gerd Heber"
      ],
      "date": "2019-03-27",
      "id": "HDF5"
    },
    "HDFEOS": {
      "title": "HDF-EOS5 Data Model, File Format and Library (v1.1)",
      "href": "https://www.earthdata.nasa.gov/sites/default/files/imported/ESDS-RFC-008-v1.1.pdf",
      "status": "Recommended",
      "publisher": "NASA",
      "editors": [
        "Larry Klein",
        "Abe Taaheri"
      ],
      "date": "2016-05-01",
      "id": "HDFEOS"
    },
    "HRCRS": {
      "title": "Handreiking Gebruik coördinaatreferentiesystemen bij uitwisseling en visualisatie van geo-informatie",
      "href": "https://docs.geostandaarden.nl/crs/crs/",
      "status": "Definitief",
      "publisher": "Geonovum",
      "editors": [
        "Friso Penninga",
        "Lennard Huisman"
      ],
      "date": "2022-03-14",
      "id": "HRCRS"
    },
    "HRLFG": {
      "title": "Geometrie in uitwisselingsformaten",
      "href": "https://docs.geostandaarden.nl/g4w/geox/#inleiding",
      "status": "Definitief",
      "publisher": "Geonovum",
      "editors": [
        "Linda van den Brink",
        "Gabriella Wiersma"
      ],
      "date": "2022-02-04",
      "id": "HRLFG"
    },
    "HRTOEG": {
      "title": "Handreiking digitaal toegankelijk locatiedata",
      "href": "https://docs.geostandaarden.nl/visu/toeg/",
      "status": "Vastgesteld",
      "publisher": "Geonovum",
      "editors": [
        "Edward Mac Gillavry",
        "Sjors Slaats",
        "Theo OVerduin",
        "Thijs Brentjens",
        "Victor Zuydweg"
      ],
      "date": "2021-08-02",
      "id": "HRTOEG"
    },
    "HRWC": {
      "title": "Handreiking webcartografie",
      "href": "https://www.geonovum.nl/uploads/standards/downloads/handreiking%20webcartografie%201.0.1_0.pdf",
      "status": "Definitief",
      "publisher": "Geonovum",
      "date": "2010-11-18",
      "id": "HRWC"
    },
    "I3S": {
      "title": "OGC Indexed 3d Scene Layer (I3S) and Scene Layer Package (*.slpk) Format Community Standard Version 1.2",
      "href": "http://docs.opengeospatial.org/cs/17-014r8/17-014r8.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Carl Reed",
        "Tamrat Belayneh"
      ],
      "date": "2021-05-11",
      "id": "I3S"
    },
    "IMMetingen": {
      "title": "Informatiemodel Metingen",
      "href": "https://www.sikb.nl/datastandaarden/richtlijnen/sikb0101",
      "status": "Vastgesteld",
      "publisher": "SIKB en IHW",
      "id": "IMMetingen"
    },
    "INSGPGeopackage": {
      "title": "GeoPackage encoding of INSPIRE datasets. INSPIRE good practise",
      "href": "https://inspire.ec.europa.eu/good-practice/geopackage-encoding-inspire-datasets",
      "status": "Candidate",
      "publisher": "INSPIRE",
      "id": "INSGPGeopackage"
    },
    "INSGPOAPIF": {
      "title": "OGC API - Features as an INSPIRE download service",
      "href": "https://inspire.ec.europa.eu/good-practice/ogc-api-%E2%80%93-features-inspire-download-service",
      "status": "Endorsed Good Practice",
      "publisher": "IOC TF",
      "id": "INSGPOAPIF"
    },
    "INSGPSTA": {
      "title": "OGC SensorThings API as an INSPIRE download service",
      "href": "https://inspire.ec.europa.eu/good-practice/ogc-sensorthings-api-inspire-download-service",
      "status": "Endorsed good practice",
      "publisher": "INSPIRE Maintenance and Implementation Group (MIG)",
      "id": "INSGPSTA"
    },
    "inspire-19115-19119": {
      "title": "INSPIRE Metadata Implementing Rules: Technical Guidelines based on EN ISO 19115 and EN ISO 19119",
      "href": "http://inspire.ec.europa.eu/documents/Metadata/INSPIRE_MD_IR_and_ISO_v1_2_20100616.pdf",
      "authors": [
        "Drafting Team Metadata and European Commission Joint Research Centre"
      ],
      "publisher": "European Commission Joint Research Centre",
      "date": "2007-10-26",
      "id": "inspire-19115-19119"
    },
    "inspire-cirmd": {
      "title": "Corrigendum to INSPIRE Metadata Regulation",
      "href": "https://eur-lex.europa.eu/legal-content/NL/TXT/PDF/?uri=CELEX:32008R1205R(02)&from=EN",
      "authors": [
        "Drafting Team Metadata and European Commission Joint Research Centre"
      ],
      "publisher": "European Commission Joint Research Centre",
      "date": "2010-01-15",
      "id": "inspire-cirmd"
    },
    "inspire-crs": {
      "title": "INSPIRE Data Specification on Coordinate Reference Systems - Technical Guidelines",
      "href": "https://inspire.ec.europa.eu/id/document/tg/rs",
      "status": "Published",
      "publisher": "INSPIRE Thematic Working Group Coordinate Reference Systems & Geographical Grid Systems",
      "date": "2014-04-16",
      "id": "inspire-crs"
    },
    "inspire-gcm": {
      "title": "Generic Conceptual Model of the INSPIRE data specifications",
      "href": "https://inspire.ec.europa.eu/documents/inspire-generic-conceptual-model",
      "status": "Published",
      "publisher": "INSPIRE Drafting Team Data Specifications",
      "date": "2014-04-07",
      "id": "inspire-gcm"
    },
    "inspire-gen": {
      "title": "Guidelines for the encoding of spatial data",
      "href": "https://inspire.ec.europa.eu/documents/guidelines-encoding-spatial-data",
      "status": "Published",
      "publisher": "INSPIRE Drafting Team Data Specifications",
      "date": "2014-04-08",
      "id": "inspire-gen"
    },
    "inspire-ggs": {
      "title": "Guidelines INSPIRE Data Specification on Geographical Grid Systems - Technical Guidelines",
      "href": "https://inspire.ec.europa.eu/id/document/tg/gg",
      "status": "Published",
      "publisher": "INSPIRE Thematic Working Group Coordinate Reference Systems & Geographical Grid Systems",
      "date": "2014-04-16",
      "id": "inspire-ggs"
    },
    "inspire-irmd": {
      "title": "Implementing Rules for Metadata",
      "href": "http://eur-lex.europa.eu/legal-content/EN/ALL/?uri=CELEX:32008R1205",
      "authors": [
        "Drafting Team Metadata and European Commission Joint Research Centre"
      ],
      "publisher": "European Commission Joint Research Centre",
      "date": "2008-12-03",
      "id": "inspire-irmd"
    },
    "inspire-mds": {
      "title": "Methodology for the development of data specifications: baseline version (D 2.6, Version 3.0)",
      "href": "https://inspire.ec.europa.eu/documents/methodology-development-data-specifications-baseline-version-d-26-version-30",
      "status": "Published",
      "publisher": "INSPIRE Drafting Team Data Specifications",
      "date": "2008-04-06",
      "id": "inspire-mds"
    },
    "inspire-TG-metadata": {
      "title": "Technical Guidance for the implementation of INSPIRE dataset and service metadata based on ISO/TS 19139:2007",
      "href": "https://github.com/INSPIRE-MIF/technical-guidelines/blob/2022.2/metadata/metadata-iso19139/metadata-iso19139.adoc",
      "status": [
        "Tehnical Guidance"
      ],
      "authors": [
        "Temporary MIWP 2021-2024 sub-group 2.3.1"
      ],
      "publisher": "INSPIRE Maintenance and Implementation Group (MIG)",
      "date": "2022-08-01",
      "id": "inspire-TG-metadata"
    },
    "INSTGDiS": {
      "title": "Technical Guidance for the implementation of Inspire Discovery Service, version 3.1",
      "href": "https://inspire.ec.europa.eu/documents/technical-guidance-implementation-inspire-discovery-services-0",
      "status": "Approved",
      "publisher": "IOC TF",
      "date": "2011-11-07",
      "id": "INSTGDiS"
    },
    "INSTGDS": {
      "title": "Technical Guidance for the implementation of Inspire Download Services",
      "href": "https://inspire.ec.europa.eu/documents/technical-guidance-implementation-inspire-download-services",
      "status": "Approved",
      "publisher": "IOC TF",
      "date": "2013-08-09",
      "id": "INSTGDS"
    },
    "INSTGDSSOS": {
      "title": "Technical Guidance for implementing download services using the OGC Sensor Observation Service and ISO 19143 Filter Encoding, version 1.0",
      "href": "https://inspire.ec.europa.eu/id/document/tg/download-sos",
      "status": "Approved",
      "publisher": "INSPIRE Maintenance and Implementation Group (MIG)",
      "date": "2016-12-16",
      "id": "INSTGDSSOS"
    },
    "INSTGDSWCS": {
      "title": "Technical Guidance for the implementation of Inspire Download Services using Web Coverage Services (WCS), version 1.0",
      "href": "https://inspire.ec.europa.eu/id/document/tg/download-wcs",
      "status": "Approved",
      "publisher": "INSPIRE Maintenance and Implementation Group (MIG)",
      "date": "2016-12-16",
      "id": "INSTGDSWCS"
    },
    "INSTGVS": {
      "title": "Technical Guidance for the implementation of Inspire View Service",
      "href": "https://inspire.ec.europa.eu/documents/technical-guidance-implementation-inspire-view-services-1",
      "status": "Definitief",
      "publisher": "IOC TF",
      "date": "2022-08-01",
      "id": "INSTGVS"
    },
    "ISO15836": {
      "title": "ISO 15836: 2004, Information and documentation - The Dublin Core metadata element set",
      "href": "https://www.iso.org/standard/37629.htm",
      "publisher": "International Organization for Standardization",
      "date": "2004",
      "id": "ISO15836"
    },
    "ISO19101": {
      "title": "ISO 19101-1:2014 Geographic information — Reference model — Part 1: Fundamentals",
      "href": "https://www.iso.org/standard/59164.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2014-11-01",
      "id": "ISO19101"
    },
    "ISO19103": {
      "title": "ISO 19103:2015 Geographic information — Conceptual schema language",
      "href": "https://www.iso.org/standard/56734.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2015-12-01",
      "id": "ISO19103"
    },
    "ISO19107": {
      "title": "ISO 19107:2019 Geographic information — Spatial schema",
      "href": "https://www.iso.org/standard/66175.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2019-12-01",
      "id": "ISO19107"
    },
    "ISO19108": {
      "title": "ISO 19108:2002 Geographic information — Temporal schema",
      "href": "https://www.iso.org/standard/26013.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2012-12-08",
      "id": "ISO19108"
    },
    "ISO19109": {
      "title": "ISO 19109:2015 Geographic information — Rules for application schema",
      "href": "https://www.iso.org/standard/59193.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2015-12-01",
      "id": "ISO19109"
    },
    "ISO19110": {
      "title": "ISO 19110:2016 Geographic information — Methodology for feature cataloguing",
      "href": "https://www.iso.org/standard/57303.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2016-12-01",
      "id": "ISO19110"
    },
    "ISO19111": {
      "title": "ISO 19111:2019 Geographic information — Referencing by coordinates",
      "href": "https://www.iso.org/standard/74039.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2019-01-01",
      "id": "ISO19111"
    },
    "ISO19115-2003": {
      "title": "ISO 19115:2003  Geographic information -- Metadata",
      "href": "https://www.iso.org/standard/26020.html",
      "status": [
        "Adopted specification"
      ],
      "publisher": "International Organization for Standardization",
      "date": "2003-05-01",
      "id": "ISO19115-2003"
    },
    "ISO19115-2006": {
      "title": "ISO 19115:2003/Cor 1:2006 Geographic information — Metadata — Technical Corrigendum 1",
      "href": "https://www.iso.org/standard/26020.html",
      "status": [
        "Adopted specification"
      ],
      "publisher": "International Organization for Standardization",
      "date": "2006-06-01",
      "id": "ISO19115-2006"
    },
    "ISO19115-2009": {
      "title": "ISO 19115-2:2009 Geographic information — Metadata — Part 2: Extensions for imagery and gridded data",
      "href": "https://www.iso.org/standard/39229.html",
      "publisher": "International Organization for Standardization",
      "date": "2009-02-01",
      "id": "ISO19115-2009"
    },
    "ISO19115-2014": {
      "title": "ISO 19115-1:2014 Geographic information — Metadata — Part 1: Fundamentals",
      "href": "https://www.iso.org/standard/53798.html",
      "publisher": "International Organization for Standardization",
      "date": "2014-04-01",
      "id": "ISO19115-2014"
    },
    "ISO19117": {
      "title": "ISO 19117:2012 Geographic Information - Portrayal",
      "href": "https://www.iso.org/standard/46226.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2012-12-01",
      "id": "ISO19117"
    },
    "ISO19118": {
      "title": "ISO 19118:2011 Geographic information — Encoding",
      "href": "https://www.iso.org/standard/44212.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2011-10-01",
      "id": "ISO19118"
    },
    "ISO19119": {
      "title": "Geographic information - Services",
      "href": "https://www.iso.org/standard/39890.html",
      "publisher": "International Organization for Standardization",
      "date": "2005-02-01",
      "id": "ISO19119"
    },
    "ISO19119-2005": {
      "title": "ISO 19119:2005 Geographic information — Services",
      "href": "https://www.iso.org/standard/39890.html",
      "publisher": "International Organization for Standardization",
      "date": "2005-02-01",
      "id": "ISO19119-2005"
    },
    "ISO19119-2008": {
      "title": "ISO 19119:2005/Amd 1:2008 Geographic information — Services — Amendment 1: Extensions of the service metadata model",
      "href": "https://www.iso.org/standard/44268.html",
      "publisher": "International Organization for Standardization",
      "date": "2008-05-01",
      "id": "ISO19119-2008"
    },
    "ISO19126-2009": {
      "title": "ISO 19126:2009 Geographic information - Feature concept dictionaries and registers",
      "href": "https://www.iso.org/standard/44875.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2009-11-01",
      "id": "ISO19126-2009"
    },
    "ISO19131": {
      "title": "ISO 19131:2022 Geographic information — Data product specifications",
      "href": "https://www.iso.org/standard/85092.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2022-11-01",
      "id": "ISO19131"
    },
    "ISO19136": {
      "title": "ISO 19136-1:2020 Geographic information — Geography Markup Language (GML) — Part 1: Fundamentals",
      "href": "https://www.iso.org/standard/75676.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2020-01-01",
      "id": "ISO19136"
    },
    "ISO19139": {
      "title": "ISO/TS 19139:2007 Geographic information - Metadata - XML schema implementation",
      "href": "https://www.iso.org/standard/32557.html",
      "status": [
        "Adopted specification"
      ],
      "publisher": "International Organization for Standardization",
      "date": "2007-04-01",
      "id": "ISO19139"
    },
    "ISO6709": {
      "title": "ISO 6709:2022 Standard representation of geographic point location by coordinates",
      "href": "https://www.iso.org/standard/75147.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2022-09-01",
      "id": "ISO6709"
    },
    "ISOJPEG2000": {
      "title": "ISO/IEC 15444-1:2019 Information technology — JPEG 2000 image coding system — Part 1: Core coding system",
      "href": "https://www.iso.org/standard/78321.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2019-10-01",
      "id": "ISOJPEG2000"
    },
    "ISOts19127": {
      "title": "ISO/TS 19127 Geographic Information - Geodetic codes and parameters",
      "href": "https://www.iso.org/standard/41784.html",
      "status": "Published",
      "publisher": "ISO",
      "date": "2005-06-01",
      "id": "ISOts19127"
    },
    "JSON-FG": {
      "title": "OGC Features and Geometries JSON - Part 1: Core",
      "href": "https://docs.ogc.org/DRAFTS/21-045.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Clemens Portele",
        "Panagiotis (Peter) A. Vretanos"
      ],
      "id": "JSON-FG"
    },
    "MBS": {
      "title": "Mapbox GL JS Style Specification",
      "href": "https://docs.mapbox.com/mapbox-gl-js/style-spec/",
      "status": "Unofficial",
      "publisher": "Mapbox",
      "id": "MBS"
    },
    "MIM": {
      "title": "MIM - Metamodel Informatie Modellering",
      "href": "https://docs.geostandaarden.nl/mim/mim/",
      "status": "Vastgesteld",
      "publisher": "Geonovum",
      "editors": [
        "Dick Krijtenburg",
        "Paul Janssen",
        "Lennart van Bergen"
      ],
      "authors": [
        "Lennart van Bergen",
        "Thies Mesdag",
        "Marco Brattinga",
        "Paul Janssen",
        "Pano Maria",
        "Johan Boer"
      ],
      "date": "2022-02-17",
      "id": "MIM"
    },
    "NEN3610": {
      "title": "NEN 3610:2022 nl - BBasismodel geo-informatie - Termen, definities, relaties en algemene regels voor de uitwisseling van informatie over aan de aarde gerelateerde ruimtelijke objecten",
      "href": "https://www.nen.nl/nen-3610-2022-nl-296137",
      "status": "Definitief",
      "publisher": "NEN",
      "date": "2022-05-31",
      "id": "NEN3610"
    },
    "NETCDF": {
      "title": "OGC Network Common Data Form (NetCDF) Core Encoding Standard version 1.0",
      "href": "https://portal.ogc.org/files/?artifact_id=43732",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Ben Domenico"
      ],
      "date": "2011-04-05",
      "id": "NETCDF"
    },
    "NLAPIS": {
      "title": "API Strategie Algemeen (Nederlandse API Strategie I)",
      "href": "https://docs.geostandaarden.nl/api/API-Strategie/",
      "status": "Vastgesteld",
      "publisher": "Geonovum",
      "date": "2022-03-09",
      "id": "NLAPIS"
    },
    "NLDP": {
      "title": "NEN 3610 - Linked Data",
      "href": "https://docs.geostandaarden.nl/nen3610/nldp/",
      "status": "Vastgesteld",
      "publisher": "Geonovum",
      "editors": [
        "Paul Janssen"
      ],
      "authors": [
        "Linda van den Brink",
        "Marco Brattinga",
        "Marinus Vonhof",
        "Niels Hoffmann",
        "Pano Maria",
        "Hans Schevers",
        "Ronald van Lanen",
        "Joep van Genuchten"
      ],
      "date": "2020-03-23",
      "id": "NLDP"
    },
    "NLISO19115": {
      "title": "Nederlands metadata profiel op ISO 19115 voor geografie versie 2.1.0",
      "href": "https://docs.geostandaarden.nl/md/mdprofiel-iso19115/",
      "status": "Vastgestelde versie",
      "publisher": "Geonovum",
      "date": "2020-06-30",
      "id": "NLISO19115"
    },
    "NLISO19119": {
      "title": "Nederlands metadata profiel op ISO 19119 voor services versie 2.1.0",
      "href": "https://docs.geostandaarden.nl/md/mdprofiel-iso19119/",
      "status": "Vastgestelde versie",
      "publisher": "Geonovum",
      "date": "2020-06-30",
      "id": "NLISO19119"
    },
    "NLWFS": {
      "title": "Nederlands profiel op ISO 19142 Geographic information — Web Feature Service, Versie 1.1",
      "href": "https://www.geonovum.nl/geo-standaarden/services/nederlands-wfs-profiel-11-op-iso-19142-voor-web-feature-services-20",
      "status": "Definitief",
      "publisher": "Geonovum",
      "date": "2015-04-24",
      "id": "NLWFS"
    },
    "NLWMS": {
      "title": "Nederlands profiel op ISO 19128 Geographic information — Web Map Server Interface",
      "href": "https://www.geonovum.nl/uploads/documents/nederlands_profiel_op_iso_19128_wms_1.3_-_versie_1.0.pdf",
      "status": "Vastgesteld",
      "publisher": "Geonovum",
      "date": "2015-04-24",
      "id": "NLWMS"
    },
    "OaMt1": {
      "title": "OGC Timeseries Profile of Observations and Measurements v1.0",
      "href": "http://docs.opengeospatial.org/is/15-043r3/15-043r3.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "James Tomkins",
        "Dominic Lowe"
      ],
      "id": "OaMt1"
    },
    "OaMx2": {
      "title": "Observations and Measurements - XML Implementation v2.0",
      "href": "https://portal.ogc.org/files/?artifact_id=41510",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Simon Cox"
      ],
      "id": "OaMx2"
    },
    "OAPIC": {
      "title": "OGC 19-087: OGC API - Coverages - Part 1: Core, version 0.0.6",
      "href": "http://docs.ogc.org/DRAFTS/19-087.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Charles Heazel",
        "Jerome St-Louis"
      ],
      "id": "OAPIC"
    },
    "OAPIEDR": {
      "title": "OGC 19-086r5: OGC API - Environmental Data Retrieval Standard, Version 1.0.1",
      "href": "https://docs.ogc.org/is/19-086r5/19-086r5.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Mark Burgoyne",
        "David Blodgett",
        "Charles Heazel",
        "Chris Little"
      ],
      "date": "2022-08-05",
      "id": "OAPIEDR"
    },
    "OAPIF1": {
      "title": "OGC 17-069r4: OGC API - Features - Part 1: Core corrigendum, Version 1.0.1",
      "href": "https://docs.opengeospatial.org/is/17-069r4/17-069r4.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Panagiotis (Peter) A. Vretanos",
        "Clemens Portele",
        "Charles Heazel"
      ],
      "date": "2022-05-11",
      "id": "OAPIF1"
    },
    "OAPIF2": {
      "title": "OGC 18-058: OGC API - Features - Part 2: Coordinate Reference Systems by Reference, Version 1.0",
      "href": "https://docs.opengeospatial.org/is/18-058r1/18-058r1.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Panagiotis (Peter) A. Vretanos",
        "Clemens Portele"
      ],
      "date": "2020-11-02",
      "id": "OAPIF2"
    },
    "OAPIF3": {
      "title": "OGC 19-079r1: OGC API - Features - Part 3: Filtering, Version 1.0.0-rc1",
      "href": "http://docs.ogc.org/DRAFTS/19-079r1.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Panagiotis (Peter) A. Vretanos",
        "Clemens Portele"
      ],
      "id": "OAPIF3"
    },
    "OAPIF4": {
      "title": "OGC 20-002: OGC API - Features - Part 4: Create, Replace, Update and Delete, Version 1.0.0 snapshot (editor's draft",
      "href": "http://docs.ogc.org/DRAFTS/20-002.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Panagiotis (Peter) A. Vretanos",
        "Clemens Portele"
      ],
      "id": "OAPIF4"
    },
    "OAPIMAPS": {
      "title": "OGC 20-058: OGC API - Maps - Part 1: Core, Version 0.1.0",
      "href": "http://docs.ogc.org/DRAFTS/20-058.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": "Joan Masó",
      "date": "2022-06-06",
      "id": "OAPIMAPS"
    },
    "OAPIRECORDS1": {
      "title": "OGC 20-224: OGC API - Records - Part 1: Core",
      "href": "http://docs.ogc.org/DRAFTS/20-004.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Panagiotis (Peter) A. Vretanos",
        "Tom Kralidis",
        "Charles Heazel"
      ],
      "date": "2020-01-13",
      "id": "OAPIRECORDS1"
    },
    "OAPISTYLES": {
      "title": "OGC 20-009: OGC API Styles",
      "href": "http://docs.opengeospatial.org/DRAFTS/20-009.html",
      "status": "Draft",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": "C. Portele",
      "id": "OAPISTYLES"
    },
    "OAPITILES1": {
      "title": "OGC 20-057: OGC API - Tiles - Part 1: Core",
      "href": "https://docs.ogc.org/is/20-057/20-057.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Joan Masó",
        "Jérôme St-Louis"
      ],
      "date": "26-08-2022",
      "id": "OAPITILES1"
    },
    "OMS3": {
      "title": "OGC Abstract Specification Topic 20: Observations, measurements and samples v3.0.0",
      "href": "https://docs.ogc.org/as/20-082r4/20-082r4.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Katharina Schleidt",
        "Ilkka Rinne"
      ],
      "date": "2023-05-26",
      "id": "OMS3"
    },
    "OREFCO": {
      "title": "OGC Abstract Specification Topic 2: Referencing by coordinates",
      "href": "http://docs.opengeospatial.org/as/18-005r4/18-005r4.html",
      "status": "OGC® Publicly Available Standard",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Roger Lott"
      ],
      "date": "2019-02-08",
      "id": "OREFCO"
    },
    "SE11": {
      "title": "OGC 05-077r4: OpenGIS Symbology Encoding Implementation Specification, version 1.1",
      "href": "https://portal.ogc.org/files/?artifact_id=16700",
      "status": "Final version",
      "publisher": "Open Geospatial Consortium (OGC)",
      "date": "2006-07-21",
      "id": "SE11"
    },
    "SensorML": {
      "title": "OGC SensorML: Model and XML Encoding Standard v2.1",
      "href": "http://docs.ogc.org/is/12-000r2/12-000r2.html",
      "status": "Published",
      "publisher": "Open Geospatial Consortium",
      "editors": [
        "Mike Botts",
        "Alexandre Robin",
        "Eric Hirschorn"
      ],
      "date": "2020-08-10",
      "id": "SensorML"
    },
    "SLD11": {
      "title": "OGC 05-078r4: Styled Layer Descriptor profile of the Web Map Service Implementation Specification, Version 1.1",
      "href": "http://portal.opengeospatial.org/files/?artifact_id=22364",
      "status": "Final version",
      "publisher": "Open Geospatial Consortium (OGC)",
      "date": "2007-06-29",
      "id": "SLD11"
    },
    "STAS": {
      "title": "OGC 18-088: OGC SensorThings API Part 1 - Sensing, Version 1.1",
      "href": "https://docs.ogc.org/is/18-088/18-088.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Steve Liang",
        "Tania Khalafbeigi",
        "Hylke van der Schaaf"
      ],
      "date": "2021-08-04",
      "id": "STAS"
    },
    "STAT": {
      "title": "OGC 17-079r1: OGC SensorThings API Part 1 - Tasking Core, Version 1.0",
      "href": "http://docs.opengeospatial.org/is/17-079r1/17-079r1.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": [
        "Steve Liang",
        "Tania Khalafbeigi"
      ],
      "date": "2019-01-08",
      "id": "STAT"
    },
    "WCS21": {
      "title": "OGC 17-089r1: OGC Web Coverage Service (WCS) 2.1 Interface Standard - Core",
      "href": "http://docs.opengeospatial.org/is/17-089r1/17-089r1.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "date": "2018-08-16",
      "id": "WCS21"
    },
    "WFS11": {
      "title": "Web Feature Service Implementation Specification with Corrigendum, Version 1.1.3",
      "href": "http://docs.opengeospatial.org/is/04-094r1/04-094r1.html",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": "Panagiotis A. Vretanos",
      "date": "2016-10-26",
      "id": "WFS11"
    },
    "WMC11": {
      "title": "OpenGIS 05-005: Web Map Context Documents Implementation Specification, version 1.1",
      "href": "https://portal.ogc.org/files/?artifact_id=8618",
      "status": "Adopted specification",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": "J. Sonnet",
      "date": "2005-01-19",
      "id": "WMC11"
    },
    "WMCC11": {
      "title": "OpenGIS 08-050: Corrigendum for OpenGIS Implementation Standard Web Map Context Documents - Corrigendum 1",
      "href": "https://portal.ogc.org/files/?artifact_id=27286",
      "status": "Approved",
      "publisher": "Open Geospatial Consortium (OGC)",
      "editors": "T. Kralidis",
      "date": "2008-03-14",
      "id": "WMCC11"
    }
  },
  "title": "Testbed sensordata report",
  "specStatus": "def",
  "specType": "AL",
  "pubDomain": "ngii",
  "shortName": "testbed-sensordata",
  "publishDate": "2025-06-30",
  "editors": [
    {
      "name": "Frank Terpstra",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    }
  ],
  "authors": [
    {
      "name": "Frank Terpstra",
      "company": "Geonovum",
      "companyURL": "https://www.geonovum.nl"
    },
    {
      "name": "Lex van Dolderen",
      "company": "Nelen & Schuurmans",
      "companyURL": "https://www.nelen-schuurmans.nl"
    },
    {
      "name": "Richard Kettelerij",
      "company": "Mindloops",
      "companyURL": "https://www.mindloops.nl"
    },
    {
      "name": "Hylke van der Schaaf",
      "company": "Fraunhofer IOSB",
      "companyURL": "https://www.iosb.fraunhofer.de/"
    }
  ],
  "github": "https://github.com/Geonovum/Testbed-sensordata"
}</script>
<link rel="stylesheet" href="https://tools.geostandaarden.nl/respec/style/base.css"></head>

<body class="h-entry informative"><div class="head">
    <a class="logo" href="https://www.geonovum.nl/geo-standaarden"><img alt="Geonovum" height="67" id="Geonovum" src="https://tools.geostandaarden.nl/respec/style/logos/Geonovum.svg" width="132">
  </a> <h1 id="title" class="title">Testbed sensordata report</h1>
    
    <h2>
      Geonovum General<br>
      Recommendation
      <time class="dt-published" datetime="2025-06-30">June 30, 2025</time>
    </h2>
    <dl>
      
    <dt>This version</dt><dd><a class="u-url" href="https://docs.geostandaarden.nl/ngii/def-al-testbed-sensordata-20250630/">https://docs.geostandaarden.nl/ngii/def-al-testbed-sensordata-20250630/</a></dd>
	<dt>Latest published version:</dt><dd><a href="https://docs.geostandaarden.nl/ngii/testbed-sensordata">https://docs.geostandaarden.nl/ngii/testbed-sensordata</a></dd>    
      <dt>Latest editor's draft:</dt><dd><a href="https://geonovum.github.io/Testbed-sensordata/">https://geonovum.github.io/Testbed-sensordata/</a></dd>
      
      
      
      
      
      <dt>Editor:</dt>
      <dd class="editor p-author h-card vcard">
    <span class="p-name fn">Frank Terpstra</span> (<a class="p-org org h-org" href="https://www.geonovum.nl">Geonovum</a>)
  </dd>
      
      <dt>Authors:</dt><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Frank Terpstra</span> (<a class="p-org org h-org" href="https://www.geonovum.nl">Geonovum</a>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Lex van Dolderen</span> (<a class="p-org org h-org" href="https://www.nelen-schuurmans.nl">Nelen &amp; Schuurmans</a>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Richard Kettelerij</span> (<a class="p-org org h-org" href="https://www.mindloops.nl">Mindloops</a>)
  </dd><dd class="editor p-author h-card vcard">
    <span class="p-name fn">Hylke van der Schaaf</span> (<a class="p-org org h-org" href="https://www.iosb.fraunhofer.de/">Fraunhofer IOSB</a>)
  </dd>
      <dt>Participate:</dt><dd>
    <a href="https://github.com/Geonovum/Testbed-sensordata/">GitHub Geonovum/Testbed-sensordata</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/Testbed-sensordata/issues/">File an issue</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/Testbed-sensordata/commits/">Commit history</a>
  </dd><dd>
    <a href="https://github.com/Geonovum/Testbed-sensordata/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    
    <p class="copyright">
            This document is licensed under 
            <a rel="license" href="https://creativecommons.org/licenses/by/4.0/legalcode" class="subfoot"><img class="license" src="https://tools.geostandaarden.nl/respec/style/logos/cc-by.svg" alt="Logo Creative Commons Attribution 4.0 International Public License"><br> Creative Commons Attribution 4.0 International Public License</a>
          </p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory"><h2>Abstract</h2>
<p>This is the 2025 Geonovum testbed sensordata report. It contains the results of Geonovum's investigation into OGC sensordata standards. This was done with market participation. Using a public tender process, three parties were selected to investigate one research question each:</p>
<ul>
<li><p>Nelen &amp; Schuurmans investigated Communicating with a Collection of sensors</p>
</li>
<li><p>Mindloops investigated Visualization &amp; Analysis</p>
</li>
<li><p>Fraunhofer IOSB investigated initial device registration.</p>
</li>
</ul>
<p>This report contains their detailed findings. Geonovum started this testbed to learn more about the applicability of OGC sensordata standards in the Dutch public sector. Now that the testbed has concluded, the possibility of making one or more of these standards mandatory seems feasable, although there are some findings that need further investigation. An important point to be addressed is the mapping of the internal data model of local vendors to the Observations, Measurements and Samples based model of the OGC standards. Also, there is a need for gaining more experience in client use cases. For Initial device registration a viable and efficient solution was shown, which may eventually be proposed as an extension to the OGC standards; further experiments with sensors from Dutch stakeholders are a next step. Finally, before taking further steps towards a mandatory standard, Geonovum will consult with Dutch public sector stakeholders on the outcome of this testbed.</p>
</section>
  <section id="sotd" class="introductory"><h2>Status of this document</h2><p>This is the definitive version of this document. Edits resulting from consultations have been applied.</p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of this document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#goal-of-the-testbed"><bdi class="secno">1.1 </bdi>Goal of the testbed</a></li><li class="tocline"><a class="tocxref" href="#scope"><bdi class="secno">1.2 </bdi>Scope</a></li><li class="tocline"><a class="tocxref" href="#outcome"><bdi class="secno">1.3 </bdi>Outcome</a></li><li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">1.4 </bdi>Use cases</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#use-case-1-rivm-air-quality"><bdi class="secno">1.4.1 </bdi>Use case #1: RIVM air quality</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#use-case-1a"><bdi class="secno">1.4.1.1 </bdi>Use case #1A</a></li><li class="tocline"><a class="tocxref" href="#use-case-1b"><bdi class="secno">1.4.1.2 </bdi>Use case #1B</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-case-2-municipality-of-rotterdam"><bdi class="secno">1.4.2 </bdi>Use case #2 Municipality of Rotterdam</a></li></ol></li><li class="tocline"><a class="tocxref" href="#research-questions"><bdi class="secno">1.5 </bdi>Research questions</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#research-topic-1-communicating-with-a-collection-of-sensors"><bdi class="secno">1.5.1 </bdi>Research topic #1: Communicating with a collection of sensors</a></li><li class="tocline"><a class="tocxref" href="#research-topic-2-visualisation-analysis"><bdi class="secno">1.5.2 </bdi>Research topic #2: Visualisation &amp; analysis</a></li><li class="tocline"><a class="tocxref" href="#research-topic-3-initial-device-registration"><bdi class="secno">1.5.3 </bdi>Research topic #3: Initial device registration</a></li></ol></li><li class="tocline"><a class="tocxref" href="#reading-guide"><bdi class="secno">1.6 </bdi>Reading guide</a></li></ol></li><li class="tocline"><a class="tocxref" href="#topic-1-communicating-with-a-collection-of-sensors"><bdi class="secno">2. </bdi>Topic 1: Communicating with a collection of sensors</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#content"><bdi class="secno">2.1 </bdi>Content</a></li><li class="tocline"><a class="tocxref" href="#scope-0"><bdi class="secno">2.2 </bdi>Scope</a></li><li class="tocline"><a class="tocxref" href="#goal"><bdi class="secno">2.3 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#use-case"><bdi class="secno">2.4 </bdi>Use case</a></li><li class="tocline"><a class="tocxref" href="#methodology"><bdi class="secno">2.5 </bdi>Methodology</a></li><li class="tocline"><a class="tocxref" href="#comparison-of-ogc-api-standards"><bdi class="secno">2.6 </bdi>Comparison of OGC API standards</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#datamodel"><bdi class="secno">2.6.1 </bdi>Datamodel</a></li><li class="tocline"><a class="tocxref" href="#api-setup-and-capabilities"><bdi class="secno">2.6.2 </bdi>API setup and capabilities</a></li></ol></li><li class="tocline"><a class="tocxref" href="#proof-of-concept"><bdi class="secno">2.7 </bdi>Proof of Concept</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#step-1-receiving-chirpstack-data"><bdi class="secno">2.7.1 </bdi>Step 1: Receiving Chirpstack data</a></li><li class="tocline"><a class="tocxref" href="#step-2-setting-up-frost-server-with-initial-configuration"><bdi class="secno">2.7.2 </bdi>Step 2: Setting up FROST-server with initial configuration</a></li><li class="tocline"><a class="tocxref" href="#step-3-processing-sensor-observations-in-sta"><bdi class="secno">2.7.3 </bdi>Step 3: Processing sensor observations in STA</a></li><li class="tocline"><a class="tocxref" href="#step-4-configuring-lizard"><bdi class="secno">2.7.4 </bdi>Step 4: Configuring Lizard</a></li><li class="tocline"><a class="tocxref" href="#step-5-processing-observations-from-sta-to-lizard"><bdi class="secno">2.7.5 </bdi>Step 5: Processing observations from STA to Lizard</a></li><li class="tocline"><a class="tocxref" href="#learnings-from-poc-and-comparison-with-cs-api"><bdi class="secno">2.7.6 </bdi>Learnings from PoC and comparison with CS API</a></li></ol></li><li class="tocline"><a class="tocxref" href="#potential-of-api-extensions-for-working-with-collections-of-observations"><bdi class="secno">2.8 </bdi>Potential of API extensions for working with collections of Observations</a></li><li class="tocline"><a class="tocxref" href="#conclusions"><bdi class="secno">2.9 </bdi>Conclusions</a></li><li class="tocline"><a class="tocxref" href="#discussion"><bdi class="secno">2.10 </bdi>Discussion</a></li><li class="tocline"><a class="tocxref" href="#recommendations"><bdi class="secno">2.11 </bdi>Recommendations</a></li></ol></li><li class="tocline"><a class="tocxref" href="#research-question-2-visualisation-analysis"><bdi class="secno">3. </bdi>Research question 2: Visualisation &amp; Analysis</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#goal-0"><bdi class="secno">3.1 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#use-case-0"><bdi class="secno">3.2 </bdi>Use case</a></li><li class="tocline"><a class="tocxref" href="#about-the-researchers"><bdi class="secno">3.3 </bdi>About the researchers</a></li><li class="tocline"><a class="tocxref" href="#design-and-approach"><bdi class="secno">3.4 </bdi>Design and approach</a></li><li class="tocline"><a class="tocxref" href="#results"><bdi class="secno">3.5 </bdi>Results</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#demo-of-dashboard-application"><bdi class="secno">3.5.1 </bdi>Demo of Dashboard application</a></li><li class="tocline"><a class="tocxref" href="#demo-of-web-viewer"><bdi class="secno">3.5.2 </bdi>Demo of Web viewer</a></li></ol></li><li class="tocline"><a class="tocxref" href="#findings"><bdi class="secno">3.6 </bdi>Findings</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#overall"><bdi class="secno">3.6.1 </bdi>Overall</a></li><li class="tocline"><a class="tocxref" href="#rivm-api"><bdi class="secno">3.6.2 </bdi>RIVM API</a></li><li class="tocline"><a class="tocxref" href="#dashboard-application"><bdi class="secno">3.6.3 </bdi>Dashboard application</a></li><li class="tocline"><a class="tocxref" href="#bespoke-web-viewer"><bdi class="secno">3.6.4 </bdi>Bespoke web viewer</a></li></ol></li><li class="tocline"><a class="tocxref" href="#conclusion"><bdi class="secno">3.7 </bdi>Conclusion</a></li><li class="tocline"><a class="tocxref" href="#recommendations-0"><bdi class="secno">3.8 </bdi>Recommendations</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#rivm-api-0"><bdi class="secno">3.8.1 </bdi>RIVM API</a></li><li class="tocline"><a class="tocxref" href="#sensorthings-standard"><bdi class="secno">3.8.2 </bdi>SensorThings standard</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#research-question-3-device-registration"><bdi class="secno">4. </bdi>Research question 3: Device Registration</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#goal-1"><bdi class="secno">4.1 </bdi>Goal</a></li><li class="tocline"><a class="tocxref" href="#about-the-researchers-0"><bdi class="secno">4.2 </bdi>About the researchers</a></li><li class="tocline"><a class="tocxref" href="#state-of-research"><bdi class="secno">4.3 </bdi>State of Research</a></li><li class="tocline"><a class="tocxref" href="#opencitysense"><bdi class="secno">4.4 </bdi>OpenCitySense</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#data-model"><bdi class="secno">4.4.1 </bdi>Data Model</a></li><li class="tocline"><a class="tocxref" href="#onboarding-workflow"><bdi class="secno">4.4.2 </bdi>Onboarding Workflow</a></li><li class="tocline"><a class="tocxref" href="#demo"><bdi class="secno">4.4.3 </bdi>Demo</a></li><li class="tocline"><a class="tocxref" href="#future"><bdi class="secno">4.4.4 </bdi>Future</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#conclusion-0"><bdi class="secno">5. </bdi>Conclusion</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#suitability-sensordata-standards-for-dutch-public-sector"><bdi class="secno">5.1 </bdi>Suitability Sensordata Standards for Dutch public sector</a></li><li class="tocline"><a class="tocxref" href="#future-work"><bdi class="secno">5.2 </bdi>Future work</a></li></ol></li><li class="tocline"><a class="tocxref" href="#tof"><bdi class="secno">6. </bdi>List of Figures</a></li></ol></nav>

  
  <section id="introduction"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div>
<p>Sensordata is becoming increasingly important in the Dutch public sector. Smart city initiatives, citizen
science projects as well as nationwide sensor networks for specific tasks (e.g. environmental monitoring)
have been increasing the amount of available sensordata. Being able to make sense of this data and
combining data from diverse source in applications such as digital twins is increasing the need to standardize
sensorplatforms and sensordata. </p>
<section id="goal-of-the-testbed"><div class="header-wrapper"><h3 id="x1-1-goal-of-the-testbed"><bdi class="secno">1.1 </bdi>Goal of the testbed</h3><a class="self-link" href="#goal-of-the-testbed" aria-label="Permalink for Section 1.1"></a></div>
<p>We want to explore how standards for sensors can help the public sector better organize and leverage their
available sensordata and sensorplatforms.
We want to address these questions based upon typical use cases and user questions we have identified.
Geonovum, in line with its mission, is keen to get the answers; and it seeks to involve the market to do so.
The actual questions and issues to be addressed are described in this document, as well as the report on the answers, combined into three research topics.</p>
</section><section id="scope"><div class="header-wrapper"><h3 id="x1-2-scope"><bdi class="secno">1.2 </bdi>Scope</h3><a class="self-link" href="#scope" aria-label="Permalink for Section 1.2"></a></div>
<p>In this testbed we are looking at implementing standards that apply to sensordata such as <a href="https://ogcapi.ogc.org/sensorthings/">OGC SensorThings API</a>, <a href="https://ogcapi.ogc.org/connectedsystems/">OGC API Connected Systems</a> and their collective underlying data model, <a href="https://www.ogc.org/standards/om/">OGC Observations, Measurements and Samples</a>. We have two use cases, including sensordata, that can be used to help anwser the questions.</p>
</section><section id="outcome"><div class="header-wrapper"><h3 id="x1-3-outcome"><bdi class="secno">1.3 </bdi>Outcome</h3><a class="self-link" href="#outcome" aria-label="Permalink for Section 1.3"></a></div>
<p>The results of the testbed are intended to contribute to expand and innovate the Dutch public sector Spatial
Data Infrastructure in a direction that takes into account the possibilities in the market today. Based on the
outcome of this testbed we may take steps to make one or more sensor related standards mandatory within
the Dutch public sector, in order to promote interoperability between sensor networks and encourage reuse.
To this end implementations of standards realized within this testbed will be kept online and available for
further experimentations for 6 months after the testbed ends.</p>
</section><section id="use-cases"><div class="header-wrapper"><h3 id="x1-4-use-cases"><bdi class="secno">1.4 </bdi>Use cases</h3><a class="self-link" href="#use-cases" aria-label="Permalink for Section 1.4"></a></div>
<p>This section describes use cases that were employed within the testbed.</p>
<section id="use-case-1-rivm-air-quality"><div class="header-wrapper"><h4 id="x1-4-1-use-case-1-rivm-air-quality"><bdi class="secno">1.4.1 </bdi>Use case #1: RIVM air quality</h4><a class="self-link" href="#use-case-1-rivm-air-quality" aria-label="Permalink for Section 1.4.1"></a></div>
<section id="use-case-1a"><div class="header-wrapper"><h5 id="x1-4-1-1-use-case-1a"><bdi class="secno">1.4.1.1 </bdi>Use case #1A</h5><a class="self-link" href="#use-case-1a" aria-label="Permalink for Section 1.4.1.1"></a></div>
<p>RIVM has the obligation, according to the EU legislation INSPIRE, to deliver the hourly air quality data for
specific depositions. This data is generated out of the AQ database on a hourly basis, harvested with a
python script and saved on the specific <a href="https://inspire.rivm.nl/sos/eaq/#map">SOS inspire webserver</a>. 
The <a href="https://github.com/52North/SOS/">SOS software</a> was created by <a href="https://52north.org/">52North</a> as a tool for ArcGIS Server and adapted for the RIVM
to operate on a Apache Tomcat instance as Open Source Software tool.
Since the implementation of the software in 2013 this software has never been down except for maintenance.
To be future proof as an organization and to comply to the newer Open Standards available, RIVM
would like to investigate the options, possibilities and risks to replace their SOS instance with a OGC
SensorThings API standard, OGC connected systems API or even better an Observations Measurements and
Sampling (OMS) solution.</p>
</section><section id="use-case-1b"><div class="header-wrapper"><h5 id="x1-4-1-2-use-case-1b"><bdi class="secno">1.4.1.2 </bdi>Use case #1B</h5><a class="self-link" href="#use-case-1b" aria-label="Permalink for Section 1.4.1.2"></a></div>
<p>In an effort to support citizen science in The Netherlands, RIVM also hosts the ‘Samen Meten’ platform: a
data infrastructure that brings together official hourly air quality measurements and sensor-based civil
measurements of local air quality. These sensor data are currently made available to the public through a
<a href="https://api-samenmeten.rivm.nl/v1.0">STA v1.0 API server</a>. A brief introduction to this service may be
found at one of the following two webpages:</p>
<ul>
<li><a href="https://www.samenmeten.nl/international/API">English</a></li>
<li><a href="https://www.samenmeten.nl/dataportaal/api-application-programming-interface">Dutch</a></li>
</ul>
<p>RIVM offers this service as an example of how a STA can be used in practice and as a dataset to query or import
as part of this testbed. Further, RIVM would like to investigate how this API service could be improved to
provide better metadata, for instance through an implementation of the <a href="https://docs.ogc.org/is/22-022r1/22-022r1.html">STAplus extension</a> or an exploration of appropriate metadata standards.</p>
</section></section><section id="use-case-2-municipality-of-rotterdam"><div class="header-wrapper"><h4 id="x1-4-2-use-case-2-municipality-of-rotterdam"><bdi class="secno">1.4.2 </bdi>Use case #2 Municipality of Rotterdam</h4><a class="self-link" href="#use-case-2-municipality-of-rotterdam" aria-label="Permalink for Section 1.4.2"></a></div>
<p>The municipality of Rotterdam has a multitude of sensors transmitting on LoRa via chirpstack that produce
raw JSON. These sensors measure groundwater levels, soil moisture, soil Ph and temperature, water leakage;
in addition there are people counting sensors as well as 12-1 weather stations, measuring 12 weather
related parameters. These are documented in more detail (including example JSON) in an attachment
provided with this invitation to tender. Rotterdam would like to gain experience in having these sensors exposed through interoperable standards such
as Sensorthings API or connected systems API. </p>
</section></section><section id="research-questions"><div class="header-wrapper"><h3 id="x1-5-research-questions"><bdi class="secno">1.5 </bdi>Research questions</h3><a class="self-link" href="#research-questions" aria-label="Permalink for Section 1.5"></a></div>
<p>The research topics, although overlapping in scope, are specifically chosen to address different leading
perspectives and goals. Below these are spelled out, for each of the three research topics.</p>
<section id="research-topic-1-communicating-with-a-collection-of-sensors"><div class="header-wrapper"><h4 id="x1-5-1-research-topic-1-communicating-with-a-collection-of-sensors"><bdi class="secno">1.5.1 </bdi>Research topic #1: Communicating with a collection of sensors</h4><a class="self-link" href="#research-topic-1-communicating-with-a-collection-of-sensors" aria-label="Permalink for Section 1.5.1"></a></div>
<p>There are many use cases where one type of sensor is placed in many locations. There is great utility in
querying all of these sensors at the same time with one simple operation. For example "give me all current
temperature readings from the collection of temperature sensors in the municipality of Rotterdam". We want
to know how this can be achieved using different OGC API standards and what the benefits and negatives
for each standard are in practice.</p>
</section><section id="research-topic-2-visualisation-analysis"><div class="header-wrapper"><h4 id="x1-5-2-research-topic-2-visualisation-analysis"><bdi class="secno">1.5.2 </bdi>Research topic #2: Visualisation &amp; analysis</h4><a class="self-link" href="#research-topic-2-visualisation-analysis" aria-label="Permalink for Section 1.5.2"></a></div>
<p>An important aspect of working with sensor data is, of course, being able to get the data and load it into an
application for visualisation and analysis. This research question is about demonstrating that this works,
both in a web viewer and in a dashboard application (e.g. Grafana).</p>
</section><section id="research-topic-3-initial-device-registration"><div class="header-wrapper"><h4 id="x1-5-3-research-topic-3-initial-device-registration"><bdi class="secno">1.5.3 </bdi>Research topic #3: Initial device registration</h4><a class="self-link" href="#research-topic-3-initial-device-registration" aria-label="Permalink for Section 1.5.3"></a></div>
<p>Initial device (aka Thing) registration in a system is not well documented or standardized and hinders
uniformization and encourages bespoke solutions.
‘Things’ are made in the factory by the thousands, all with the same firmware specified by the manufacturer.
The Things have several sensors (possibly different ones) on - board that will measure values. When the
thing is first turned on, it will try to connect to a service (over eg a LoRaWAN Network or the internet over
a 3G network) specified in the firmware.
When this connection is established, the thing must register itself with that service. The thing ‘comes ashore’
for the first time.</p>
</section></section><section id="reading-guide"><div class="header-wrapper"><h3 id="x1-6-reading-guide"><bdi class="secno">1.6 </bdi>Reading guide</h3><a class="self-link" href="#reading-guide" aria-label="Permalink for Section 1.6"></a></div>
<p>The rest of this document contains the results of all three research topics, written by the participants. It ends with the Conclusion chapter, which describes the main findings and the way forward as perceived by Geonovum.</p>
</section></section>
  <section class="informative" id="topic-1-communicating-with-a-collection-of-sensors"><div class="header-wrapper"><h2 id="x2-topic-1-communicating-with-a-collection-of-sensors"><bdi class="secno">2. </bdi>Topic 1: Communicating with a collection of sensors</h2><a class="self-link" href="#topic-1-communicating-with-a-collection-of-sensors" aria-label="Permalink for Section 2."></a></div><p><em>This section is non-normative.</em></p>
<section id="content"><div class="header-wrapper"><h3 id="x2-1-content"><bdi class="secno">2.1 </bdi>Content</h3><a class="self-link" href="#content" aria-label="Permalink for Section 2.1"></a></div>
<p>This report describes the research that is done for research topic 1 in the Geonovum Testbed Sensordata. Part of the research was making a proof of concept, which is available on:</p>
<ul>
<li>GitHub: <a href="https://github.com/nens/sensordata-demo">NenS sensordata-demo</a></li>
<li>FROST-Server implementation of SensorThings API: <a href="https://sensordata-demo-frost.staging.lizard.net/FROST-Server/">FROST-Server</a></li>
<li>Lizard data warehouse: <a href="https://nxt3.staging.lizard.net/viewer/favourites/86542561-3feb-4035-aa39-299bfc80a693">Lizard staging</a></li>
</ul>
</section><section id="scope-0"><div class="header-wrapper"><h3 id="x2-2-scope"><bdi class="secno">2.2 </bdi>Scope</h3><a class="self-link" href="#scope-0" aria-label="Permalink for Section 2.2"></a></div>
<p>The implementation of sensors for measuring things in the field has grown over the years and will continue growing. It is a challenge to handle the vast amount of collected data and keep grasp on the internal relationships within the data. </p>
<p>Different uses of the data require different views on them. Registration of measurements is done based on the sensor that collects them. For other purposes, e.g. for dashboards or digital twins, you are often interested in the current situation for a collection of features of interest that are measured by sensors.</p>
<p>It is also interesting to see how such an API standard fits to existing applications. If an existing application would have to expose its data through a new standard, what difficulties can be foreseen?</p>
</section><section id="goal"><div class="header-wrapper"><h3 id="x2-3-goal"><bdi class="secno">2.3 </bdi>Goal</h3><a class="self-link" href="#goal" aria-label="Permalink for Section 2.3"></a></div>
<p>OGC has multiple API standards that cover observations and measurements. Geonovum is interested in the applicability in the Dutch domain of two of these: OGC SensorThings API (STA) and OGC Connected Systems API (CS API). </p>
<p>In this research topic the focus is on what options there are to query combinations of observations. How to store data based on a datafeed from a sensor platform and how to expose them through an API, supporting different uses.</p>
</section><section id="use-case"><div class="header-wrapper"><h3 id="x2-4-use-case"><bdi class="secno">2.4 </bdi>Use case</h3><a class="self-link" href="#use-case" aria-label="Permalink for Section 2.4"></a></div>
<p>The municipality of Rotterdam would like to see their live sensordata exposed using standards such as SensorThings API and Connected Systems API and learn what this would mean in practice. For instance how would groundwater levels, which are derived by calculation from the raw sensordata, be exposed. How would sensors that measure multiple values (12-1 weather station) be represented. Can the sensors benefit from being exposed in an Observations Measurements and Sampling (OMS) solution?</p>
<p>They are also looking for a scalable and accessible solution to store their sensor data in and make it available for further use. For groundwater levels Nelen &amp; Schuurmans Lizard data warehouse is already used as a system integrator. What role can the OGC standards play in data exchange between systems?</p>
</section><section id="methodology"><div class="header-wrapper"><h3 id="x2-5-methodology"><bdi class="secno">2.5 </bdi>Methodology</h3><a class="self-link" href="#methodology" aria-label="Permalink for Section 2.5"></a></div>
<p>We first familiarized ourselves with the standards at hand by doing a desk study on available documentation. What concepts are used, how are datamodels designed and what is the setup of the API's?</p>
<p>Next, we set up a proof of concept application that makes use of the data made available by Rotterdam and process it through the API standards to our own data warehouse Lizard. By using the API we learn:</p>
<ul>
<li>How the mapping between sensor input and the API datamodel needs to be configured</li>
<li>What query options there are in the API standard</li>
<li>How API outputs can be shaped to the desired output for different use cases</li>
<li>What mapping is needed to supply data from the API standard to another data platform</li>
</ul>
<p>Unfortunately, we didn't succeed in installing the CS API, because there were technical issues with the available docker images of the 52North package (reported <a href="https://github.com/52North/connected-systems-pygeoapi/issues/7">here</a>). For the functional comparison with STA we used an existing implementation based on <a href="https://opengeospatial.github.io/ogcapi-connected-systems/redoc/?url=../api/part2/openapi/openapi-connectedsystems-2.yaml#tag/Observations">OGC CS API Docs</a>, which refers to the
<a href="https://api.georobotix.io/ogc/t18/api">GeoRobotix OGC testbed 18 CS API</a>.</p>
</section><section id="comparison-of-ogc-api-standards"><div class="header-wrapper"><h3 id="x2-6-comparison-of-ogc-api-standards"><bdi class="secno">2.6 </bdi>Comparison of OGC API standards</h3><a class="self-link" href="#comparison-of-ogc-api-standards" aria-label="Permalink for Section 2.6"></a></div>
<p>Although they have an overlap in underlying definitions, the two API standards have slightly different backgrounds and therefore different design choices. STA focusses on IoT devices where CS API is more generically applicable. Also, there is a difference is age. The first version of STA has been approved in 2016, while CS API is currently still in draft.</p>
<p>The relevant aspects for comparison for this research topic are:</p>
<ul>
<li><strong>Datamodel</strong>: The datamodel design determines to a large extent how an API can be interacted with and how incoming data should be mapped. What entities should be configured to set up a usable system? Which entity relations are required?</li>
<li><strong>API setup and capabilities</strong>: How can data be retrieved? What options are available to shape the output to a desired format?</li>
</ul>
<p>Items that are explicitly excluded from the comparison are:</p>
<ul>
<li><strong>Tasking Core/Actuators</strong>: The research is about sensor observations and not about the capabilities to interact with sensors.</li>
<li><strong>API extensions</strong>: STA for instance has a <a href="https://www.opengis.net/doc/is/sensorthings-staplus/1.0">PLUS extension</a>. We will only consider this in the assessment of possible ways to improve the applicability of the standards.</li>
</ul>
<section id="datamodel"><div class="header-wrapper"><h4 id="x2-6-1-datamodel"><bdi class="secno">2.6.1 </bdi>Datamodel</h4><a class="self-link" href="#datamodel" aria-label="Permalink for Section 2.6.1"></a></div>
<p>
      </p><figure id="fig-datamodels-of-sta-and-cs-api">
        <img src="./media/DatamodelComparison.png" alt="Datamodel Comparison">
        <figcaption><a class="self-link" href="#fig-datamodels-of-sta-and-cs-api">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">Datamodels of STA and CS API.</span></figcaption>
      </figure>
    <p></p>
<p>Similarities relevant to this research topic:</p>
<ul>
<li>Measured results are stored as Observations with Datastreams as their main grouping mechanism.</li>
<li>There are entities to describe the object that is observed with/from.</li>
<li>An Observation concerns a Feature of Interest.</li>
</ul>
<p>Differences relevant to this research topic:</p>
<ul>
<li>The entities Sensor and Thing from STA are generalized in CS API to the entity System.</li>
<li>In STA the UltimateFeatureOfInterest is only linked to the Observation. CS API also has a more direct link from the UltimateFeatureOfInterest to a Datastream, through the SamplingFeature.</li>
</ul>
</section><section id="api-setup-and-capabilities"><div class="header-wrapper"><h4 id="x2-6-2-api-setup-and-capabilities"><bdi class="secno">2.6.2 </bdi>API setup and capabilities</h4><a class="self-link" href="#api-setup-and-capabilities" aria-label="Permalink for Section 2.6.2"></a></div>
<p>The two standards are both based on REST, but have different capabilities when it comes to querying data and shaping responses. Our focus is on Observations, as those are most relevant to use in applications.</p>
<p>Relevant similarities:</p>
<ul>
<li>Support for limiting the list of returned properties per object with the <code>select</code> option. This is useful to reduce the size of the response, especially for use cases in e.g dashboards.</li>
<li>Neither standard has built-in aggregation options, which can have a lot of added value when it comes to using data in other applications.</li>
</ul>
<p>Relevant differences:</p>
<ul>
<li>CS API by default returns all related entities of a requested object. STA only covers properties of the selected entity, but has options to extend on that with <code>expand</code> to add related entities.</li>
<li>STA supports more forms of nested filtering. This reduces the number of queries that need to be done to find the right collection of results.</li>
<li>STA is based on OData 4.0, a protocol for requesting entities. This may be a complicating factor when it comes to applying STA to an extisting application, compared to CS API, which is based on OGC API Common and API Features.</li>
</ul>
</section></section><section id="proof-of-concept"><div class="header-wrapper"><h3 id="x2-7-proof-of-concept"><bdi class="secno">2.7 </bdi>Proof of Concept</h3><a class="self-link" href="#proof-of-concept" aria-label="Permalink for Section 2.7"></a></div>
<figure id="PoC Dataflow">

<pre><svg id="diagram-1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="max-width: 397.91668701171875px;" viewBox="0.000003814697265625 0 397.91668701171875 60"><style>
#diagram-1 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#diagram-1 .error-icon{fill:#552222;}#diagram-1 .error-text{fill:#552222;stroke:#552222;}#diagram-1 .edge-thickness-normal{stroke-width:2px;}#diagram-1 .edge-thickness-thick{stroke-width:3.5px;}#diagram-1 .edge-pattern-solid{stroke-dasharray:0;}#diagram-1 .edge-pattern-dashed{stroke-dasharray:3;}#diagram-1 .edge-pattern-dotted{stroke-dasharray:2;}#diagram-1 .marker{fill:#333333;stroke:#333333;}#diagram-1 .marker.cross{stroke:#333333;}#diagram-1 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#diagram-1 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#diagram-1 .cluster-label text{fill:#333;}#diagram-1 .cluster-label span{color:#333;}#diagram-1 .label text,#diagram-1 span{fill:#333;color:#333;}#diagram-1 .node rect,#diagram-1 .node circle,#diagram-1 .node ellipse,#diagram-1 .node polygon,#diagram-1 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#diagram-1 .node .label{text-align:center;}#diagram-1 .node.clickable{cursor:pointer;}#diagram-1 .arrowheadPath{fill:#333333;}#diagram-1 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#diagram-1 .flowchart-link{stroke:#333333;fill:none;}#diagram-1 .edgeLabel{background-color:#e8e8e8;text-align:center;}#diagram-1 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#diagram-1 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#diagram-1 .cluster text{fill:#333;}#diagram-1 .cluster span{color:#333;}#diagram-1 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#diagram-1 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath LS-Chirpstack LE-STA" id="L-Chirpstack-STA" style="opacity: 1;"><path class="path" d="M103.22916412353516,30L110.64583079020183,30C118.06249745686848,30,132.8958307902018,30,147.72916412353516,30C162.5624974568685,30,177.3958307902018,30,184.8124974568685,30L192.22916412353516,30" marker-end="url(#arrowhead14)" style="fill:none"></path><defs><marker id="arrowhead14" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath LS-STA LE-Lizard" id="L-STA-Lizard" style="opacity: 1;"><path class="path" d="M237.10416412353516,30L244.5208307902018,30C251.9374974568685,30,266.77083079020184,30,281.60416412353516,30C296.43749745686847,30,311.27083079020184,30,318.68749745686847,30L326.10416412353516,30" marker-end="url(#arrowhead15)" style="fill:none"></path><defs><marker id="arrowhead15" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(147.72916412353516,30)" style="opacity: 1;"><g transform="translate(-19.5,-12)" class="label"><rect rx="0" ry="0" width="39" height="24"></rect><foreignObject width="39" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-Chirpstack-STA" class="edgeLabel L-LS-Chirpstack' L-LE-STA">map1</span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(281.60416412353516,30)" style="opacity: 1;"><g transform="translate(-19.5,-12)" class="label"><rect rx="0" ry="0" width="39" height="24"></rect><foreignObject width="39" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span id="L-L-STA-Lizard" class="edgeLabel L-LS-STA' L-LE-Lizard">map2</span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-Chirpstack-3" transform="translate(55.61458206176758,30)" style="opacity: 1;"><rect rx="0" ry="0" x="-47.614585876464844" y="-22" width="95.22917175292969" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-37.614585876464844,-12)"><foreignObject width="75.22917175292969" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Chirpstack</div></foreignObject></g></g></g><g class="node default" id="flowchart-STA-4" transform="translate(214.66666412353516,30)" style="opacity: 1;"><rect rx="0" ry="0" x="-22.4375" y="-22" width="44.875" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-12.4375,-12)"><foreignObject width="24.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">STA</div></foreignObject></g></g></g><g class="node default" id="flowchart-Lizard-5" transform="translate(358.01041412353516,30)" style="opacity: 1;"><rect rx="0" ry="0" x="-31.90625" y="-22" width="63.8125" height="44" class="label-container"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-21.90625,-12)"><foreignObject width="43.8125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Lizard</div></foreignObject></g></g></g></g></g></g></svg></pre>
<figcaption><a class="self-link" href="#PoC Dataflow">Figure <bdi class="figno">2</bdi></a> <span class="fig-title">PoC Dataflow based on SensorThings API</span></figcaption>
</figure>

<section id="step-1-receiving-chirpstack-data"><div class="header-wrapper"><h4 id="x2-7-1-step-1-receiving-chirpstack-data"><bdi class="secno">2.7.1 </bdi>Step 1: Receiving Chirpstack data</h4><a class="self-link" href="#step-1-receiving-chirpstack-data" aria-label="Permalink for Section 2.7.1"></a></div>
<p>In Chirpstack an HTTP-feed has been set up, sending messages from a group of sensors to an external URL. We've set up a service that receives this feed and processes the input as log messages.</p>
</section><section id="step-2-setting-up-frost-server-with-initial-configuration"><div class="header-wrapper"><h4 id="x2-7-2-step-2-setting-up-frost-server-with-initial-configuration"><bdi class="secno">2.7.2 </bdi>Step 2: Setting up FROST-server with initial configuration</h4><a class="self-link" href="#step-2-setting-up-frost-server-with-initial-configuration" aria-label="Permalink for Section 2.7.2"></a></div>
<p>We've installed the FROST-server in our staging environment. This worked pretty much out-of-the-box. Mostly, some settings needed to be changed to adjust authentication and authorisation (see <code>docker-compose.yml</code>).</p>
<p>
      </p><figure id="fig-example-of-a-post-request-in-the-frost-server-interface">
        <img src="./media/FROSTserverPOST.png" alt="FROST-server POST">
        <figcaption><a class="self-link" href="#fig-example-of-a-post-request-in-the-frost-server-interface">Figure <bdi class="figno">3</bdi></a> <span class="fig-title">Example of a POST request in the FROST-server interface.</span></figcaption>
      </figure>
    <p></p>
<p>With the service running we could use the API to configure all required entities to process the Chripstack feed. The following entities needed to be configured:</p>
<ul>
<li>Sensors (with name that corresponds to the device name in Chirpstack)</li>
<li>Locations</li>
<li>Things</li>
<li>ObservedProperties (with name that corresponds to observation in Chirpstack)</li>
<li>Datastreams</li>
</ul>
<p>We chose not to configure FeaturesOfInterest, because STA generates and reuses those automatically based on the Thing related to the Datastream an Observation is POSTed to.</p>
</section><section id="step-3-processing-sensor-observations-in-sta"><div class="header-wrapper"><h4 id="x2-7-3-step-3-processing-sensor-observations-in-sta"><bdi class="secno">2.7.3 </bdi>Step 3: Processing sensor observations in STA</h4><a class="self-link" href="#step-3-processing-sensor-observations-in-sta" aria-label="Permalink for Section 2.7.3"></a></div>
<p>The Chirpstack feed consists of JSON with a couple of relevant attributes that we need to process the Observations. The table shows an overview of the typical message content in the JSON. </p>
<p>
      </p><figure id="fig-mapping-of-chirpstack-message-attributes-to-sta-entity-properties">
        <img src="./media/ChirpstackMapping.png" alt="Chirpstack mapping">
        <figcaption><a class="self-link" href="#fig-mapping-of-chirpstack-message-attributes-to-sta-entity-properties">Figure <bdi class="figno">4</bdi></a> <span class="fig-title">Mapping of Chirpstack message attributes to STA entity properties.</span></figcaption>
      </figure>
    <p></p>
<p>For each incoming message we check whether it contains observations. If so, we try to find the Datastream based on the Sensor and the ObservedProperty. If it is found, the Observations are POSTed to that Datastream.</p>
</section><section id="step-4-configuring-lizard"><div class="header-wrapper"><h4 id="x2-7-4-step-4-configuring-lizard"><bdi class="secno">2.7.4 </bdi>Step 4: Configuring Lizard</h4><a class="self-link" href="#step-4-configuring-lizard" aria-label="Permalink for Section 2.7.4"></a></div>
<p>The datamodel of Lizard for timeseries has quite some similarities to that of Datastreams. The main difference is a lack of differentiation between Sensor/System, Thing and FoI. This is "flattened" to a Location, optionally linked to an Asset.</p>
<figure id="Lizard Datamodel">

<pre><svg id="diagram-2" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 764.5162963867188px;" viewBox="0 0 764.5162963867188 640" role="img" aria-labelledby="chart-title-diagram-2 chart-desc-diagram-2"><title id="chart-title-diagram-2"></title><desc id="chart-desc-diagram-2"></desc><style>
#diagram-2 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#diagram-2 .error-icon{fill:#552222;}#diagram-2 .error-text{fill:#552222;stroke:#552222;}#diagram-2 .edge-thickness-normal{stroke-width:2px;}#diagram-2 .edge-thickness-thick{stroke-width:3.5px;}#diagram-2 .edge-pattern-solid{stroke-dasharray:0;}#diagram-2 .edge-pattern-dashed{stroke-dasharray:3;}#diagram-2 .edge-pattern-dotted{stroke-dasharray:2;}#diagram-2 .marker{fill:#333333;stroke:#333333;}#diagram-2 .marker.cross{stroke:#333333;}#diagram-2 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#diagram-2 .entityBox{fill:#ECECFF;stroke:#9370DB;}#diagram-2 .attributeBoxOdd{fill:#ffffff;stroke:#9370DB;}#diagram-2 .attributeBoxEven{fill:#f2f2f2;stroke:#9370DB;}#diagram-2 .relationshipLabelBox{fill:hsl(80, 100%, 96.2745098039%);opacity:0.7;background-color:hsl(80, 100%, 96.2745098039%);}#diagram-2 .relationshipLabelBox rect{opacity:0.5;}#diagram-2 .relationshipLine{stroke:#333333;}#diagram-2 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
</style><g></g><defs><marker id="ONLY_ONE_START" refX="0" refY="9" markerWidth="18" markerHeight="18" orient="auto"><path stroke="gray" fill="none" d="M9,0 L9,18 M15,0 L15,18"></path></marker></defs><defs><marker id="ONLY_ONE_END" refX="18" refY="9" markerWidth="18" markerHeight="18" orient="auto"><path stroke="gray" fill="none" d="M3,0 L3,18 M9,0 L9,18"></path></marker></defs><defs><marker id="ZERO_OR_ONE_START" refX="0" refY="9" markerWidth="30" markerHeight="18" orient="auto"><circle stroke="gray" fill="white" cx="21" cy="9" r="6"></circle><path stroke="gray" fill="none" d="M9,0 L9,18"></path></marker></defs><defs><marker id="ZERO_OR_ONE_END" refX="30" refY="9" markerWidth="30" markerHeight="18" orient="auto"><circle stroke="gray" fill="white" cx="9" cy="9" r="6"></circle><path stroke="gray" fill="none" d="M21,0 L21,18"></path></marker></defs><defs><marker id="ONE_OR_MORE_START" refX="18" refY="18" markerWidth="45" markerHeight="36" orient="auto"><path stroke="gray" fill="none" d="M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"></path></marker></defs><defs><marker id="ONE_OR_MORE_END" refX="27" refY="18" markerWidth="45" markerHeight="36" orient="auto"><path stroke="gray" fill="none" d="M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"></path></marker></defs><defs><marker id="ZERO_OR_MORE_START" refX="18" refY="18" markerWidth="57" markerHeight="36" orient="auto"><circle stroke="gray" fill="white" cx="48" cy="18" r="6"></circle><path stroke="gray" fill="none" d="M0,18 Q18,0 36,18 Q18,36 0,18"></path></marker></defs><defs><marker id="ZERO_OR_MORE_END" refX="39" refY="18" markerWidth="57" markerHeight="36" orient="auto"><circle stroke="gray" fill="white" cx="9" cy="18" r="6"></circle><path stroke="gray" fill="none" d="M21,18 Q39,0 57,18 Q39,36 21,18"></path></marker></defs><path class="er relationshipLine" d="M470,95L470,103.33333333333333C470,111.66666666666667,470,128.33333333333334,470,145C470,161.66666666666666,470,178.33333333333334,470,186.66666666666666L470,195" stroke="gray" fill="none" marker-end="url(#ZERO_OR_MORE_END)" marker-start="url(#ZERO_OR_ONE_START)"></path><path class="er relationshipLine" d="M470,270L470,278.3333333333333C470,286.6666666666667,470,303.3333333333333,480.10753032139365,320C490.21506064278736,336.6666666666667,510.4301212855748,353.3333333333333,520.5376516069684,361.6666666666667L530.6451819283621,370" stroke="gray" fill="none" marker-end="url(#ZERO_OR_MORE_END)" marker-start="url(#ONLY_ONE_START)"></path><path class="er relationshipLine" d="M682.2581367492676,270L682.2581367492676,278.3333333333333C682.2581367492676,286.6666666666667,682.2581367492676,303.3333333333333,672.1506064278739,320C662.0430761064803,336.6666666666667,641.8280154636929,353.3333333333333,631.7204851422991,361.6666666666667L621.6129548209054,370" stroke="gray" fill="none" marker-end="url(#ZERO_OR_MORE_END)" marker-start="url(#ONLY_ONE_START)"></path><path class="er relationshipLine" d="M576.1290683746338,445L576.1290683746338,453.3333333333333C576.1290683746338,461.6666666666667,576.1290683746338,478.3333333333333,576.1290683746338,495C576.1290683746338,511.6666666666667,576.1290683746338,528.3333333333334,576.1290683746338,536.6666666666666L576.1290683746338,545" stroke="gray" fill="none" marker-end="url(#ZERO_OR_MORE_END)" marker-start="url(#ONLY_ONE_START)"></path><g id="direction" transform="translate(20,20 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="100" height="75"></rect><text class="er entityLabel" id="entity-direction" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(50,37.5)">direction</text></g><g id="LR" transform="translate(220,20 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="100" height="75"></rect><text class="er entityLabel" id="entity-LR" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(50,37.5)">LR</text></g><g id="Asset" transform="translate(420,20 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="100" height="75"></rect><text class="er entityLabel" id="entity-Asset" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(50,37.5)">Asset</text></g><g id="Location" transform="translate(420,195 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="100" height="75"></rect><text class="er entityLabel" id="entity-Location" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(50,37.5)">Location</text></g><g id="Timeseries" transform="translate(526.1290683746338,370 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="100" height="75"></rect><text class="er entityLabel" id="entity-Timeseries" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(50,37.5)">Timeseries</text></g><g id="Observation_type" transform="translate(620,195 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="124.51628112792969" height="75"></rect><text class="er entityLabel" id="entity-Observation_type" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(62.258140563964844,37.5)">Observation_type</text></g><g id="Events" transform="translate(526.1290683746338,545 )"><rect class="er entityBox" fill="honeydew" fill-opacity="100%" stroke="gray" x="0" y="0" width="100" height="75"></rect><text class="er entityLabel" id="entity-Events" x="0" y="0" dominant-baseline="middle" text-anchor="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px" transform="translate(50,37.5)">Events</text></g><rect class="er relationshipLabelBox" x="470" y="145" width="0" height="0" fill="white" fill-opacity="85%"></rect><text class="er relationshipLabel" id="rel1" x="470" y="145" text-anchor="middle" dominant-baseline="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px"></text><rect class="er relationshipLabelBox" x="485.71099853515625" y="328.040283203125" width="0" height="0" fill="white" fill-opacity="85%"></rect><text class="er relationshipLabel" id="rel2" x="485.71099853515625" y="328.040283203125" text-anchor="middle" dominant-baseline="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px"></text><rect class="er relationshipLabelBox" x="666.5471801757812" y="328.040283203125" width="0" height="0" fill="white" fill-opacity="85%"></rect><text class="er relationshipLabel" id="rel3" x="666.5471801757812" y="328.040283203125" text-anchor="middle" dominant-baseline="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px"></text><rect class="er relationshipLabelBox" x="576.1290893554688" y="495" width="0" height="0" fill="white" fill-opacity="85%"></rect><text class="er relationshipLabel" id="rel4" x="576.1290893554688" y="495" text-anchor="middle" dominant-baseline="middle" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif;; font-size: 12px"></text></svg></pre>
<figcaption><a class="self-link" href="#Lizard Datamodel">Figure <bdi class="figno">5</bdi></a> <span class="fig-title">Lizard Datamodel for Timeseries.</span></figcaption>
</figure>
 
<p>For the mapping to Lizard we initially used the FeatureOfInterest in combination with ObservedProperty to map Datastreams to Lizard Timeseries. This turned out to be unpractical, due to the position of FoI in the STA datamodel. As it is only related to Observations it becomes harder to find the related Datastreams. Instead, we decided to use the Thing as point of entry for the mapping. This means that Lizard location codes where changed from <code>test_location#</code> (FoI name is taken from the Location) to <code>test_thing#</code>, so that the mapping could be switched to STA Things.</p>
<p>Observation_types were registered corresponding to STA ObservedProperties and for each Datastream a Timeseries is created. The last step is the creation of assets (i.e. groundwaterstations and measuringstations, depending on the type of measurements in Chirpstack). Assets are not required for the processing of Observations, but they serve as a represenation of locations on the map in the <a href="https://nxt3.staging.lizard.net/viewer/favourites/86542561-3feb-4035-aa39-299bfc80a693">Lizard Viewer</a>.</p>
</section><section id="step-5-processing-observations-from-sta-to-lizard"><div class="header-wrapper"><h4 id="x2-7-5-step-5-processing-observations-from-sta-to-lizard"><bdi class="secno">2.7.5 </bdi>Step 5: Processing observations from STA to Lizard</h4><a class="self-link" href="#step-5-processing-observations-from-sta-to-lizard" aria-label="Permalink for Section 2.7.5"></a></div>
<p>Based on the configuration in STA and Lizard and the mapping of Datastreams to Timeseries the Observations are retrieved from STA and POSTed to Lizard REST API. The sequence of requests to STA that are done to find the right Datastream and collect the Observations are:</p>
<ol>
<li>Find the Thing corresponding to the Lizard location: <code>/Things?$filter=name eq {liz_loc_code}</code></li>
<li>Find the ObservedProperty corresponding to the Timeseries observation_type: <code>/ObservedProperties?$filter=name eq {liz_ts_obstype}</code></li>
<li>Find the Datastream corresponding to the Timeseries: <code>/Datastreams?$filter=ObservedProperty/id eq {ObservedProperty_id} and Thing/id eq {Thing_id}</code></li>
<li>Retrieve all new Observations for that Datastream: <code>/Observations?$filter=Datastream/id eq Datastream_id and phenomenonTime gt {liz_ts_end}</code></li>
</ol>
</section><section id="learnings-from-poc-and-comparison-with-cs-api"><div class="header-wrapper"><h4 id="x2-7-6-learnings-from-poc-and-comparison-with-cs-api"><bdi class="secno">2.7.6 </bdi>Learnings from PoC and comparison with CS API</h4><a class="self-link" href="#learnings-from-poc-and-comparison-with-cs-api" aria-label="Permalink for Section 2.7.6"></a></div>
<p>We were successful in mapping data through the system the way we intended to do. STA has sufficient filter options to get the desired Observations from the API for data supply to another application. Because of the different entity relations it is important to choose the right "perspective" from which you do the mapping.</p>
<p>Translating this workflow the CS API, based on available documentation, we foresee no issues implementing CS API in the same fashion. Mapping from Chirpstack to CS API would be based on System and ObservedProperty. For the mapping to Lizard we could in this case use the FeatureOfInterest, as in CS API it is linked to the Datastream, again in combination with the ObservedProperty.</p>
</section></section><section id="potential-of-api-extensions-for-working-with-collections-of-observations"><div class="header-wrapper"><h3 id="x2-8-potential-of-api-extensions-for-working-with-collections-of-observations"><bdi class="secno">2.8 </bdi>Potential of API extensions for working with collections of Observations</h3><a class="self-link" href="#potential-of-api-extensions-for-working-with-collections-of-observations" aria-label="Permalink for Section 2.8"></a></div>
<p>There are two possible extensions that support grouping of Observations to improve the accessibility to similar Observations. This is relevant for the use of these API's in the support of applications like dashboards or digital twins, where you often want to know the state of a collection of objects at a certain time. The original setups of the API standards lack specialized filter or aggregation options to retrieve a single value in time per object, given that in most cases Observations are not neatly lined up in time.</p>
<p>STA PLUS has an ObservationGroup entity which can contain "a bag of Observation and/or relations". This extension is scoped on citizen science and focusses on the division of data under licenses and mechanisms to share data. In practice it is for example used to relate samples of water quality done in the same water body. It is not modeled and optimized to support more generic applications.</p>
<p>The ObservationCollection in the Observations, Measurements and Sampling (OMS) model does have a generic scope and therefore a little less overhead in attribution.</p>
<p>The suitability of these grouping mechanisms for our purpose seems questionable. One would have to maintain a registration of collections per relevant timestep that might be used by e.g. a dashboard. This will take a huge administrative workload to keep up to date. It makes much more sense to put an effort in aligning Observations in time, so they can be retrieved using basic filter options. </p>
</section><section id="conclusions"><div class="header-wrapper"><h3 id="x2-9-conclusions"><bdi class="secno">2.9 </bdi>Conclusions</h3><a class="self-link" href="#conclusions" aria-label="Permalink for Section 2.9"></a></div>
<p>On implementability of the API standards:</p>
<ul>
<li>The API standards are applicable in the Dutch domain, at least as stand-alone applications. Data can be exchanged between these standards and other applications.</li>
<li>Suitability depends on the purpose of an application. If it relies on information about the sensors/systems, e.g. for validation of Observations, it makes sense to use them. If not, these standards come with quite some overhead in entity relationships and configuration.</li>
<li>Due to overhead in the datamodels there is a risk of scalability issues for larger data systems. There is a limit to what can be solved by clever indexes, buckets and partitioning of Observations, their different possible types of results and entity relations.</li>
<li>Full support of these standards by existing data warehouse applications like Lizard, e.g. Delft-FEWS and HydroNET, will be tricky due to a mismatch in mapping of entities between datamodels. It would probably require specific boundary conditions for how data is stored and metadata is configured to make either API standard applicable for both data ingestion and publication. STA has some additional disadvantages because of the use of OData.</li>
</ul>
<p>On communication with a collection of sensors:</p>
<ul>
<li>STA supports query options to expand API responses with information of related entities and both have a <code>select</code> option to limt the response size. This can be used for dashboarding applications to retrieve results for multiple objects.</li>
<li>The accuracy of temporal queries on Observations depends on the measurement regime of a collection of sensors and the way properties like phenomenonTime and resultTime are stored. If not lined up neatly on rounded times and intervals, there is a big risk of returning multiple results per Datastream, which may be hard to deal with by the retrieving application.</li>
<li>Based on documentation, CS API has one advantage over STA when it comes to querying Observations for collections of Datastreams: The filter option <code>latest</code> on phenomenonTime and resultTime. Unfortunately, in the implementation that we tested with this did only work when requesting Observations for a single Datastream, which makes it irrelevant for dashboarding.</li>
<li>A mechanism like ObservationCollections makes querying groups of Observations much easier. Disadvantage is that it requires a lot of additional administration, to group Observations like that and to keep Collections up to date in time. For operational services this will likely give a lot of overhead.</li>
</ul>
</section><section id="discussion"><div class="header-wrapper"><h3 id="x2-10-discussion"><bdi class="secno">2.10 </bdi>Discussion</h3><a class="self-link" href="#discussion" aria-label="Permalink for Section 2.10"></a></div>
<p>We've discussed the outcomes of our research with specialist Hylke van der Schaaf from research topic 3. He had a couple of interesting comments:</p>
<ul>
<li>In version 2 of STA FeaturesOfInterest can be related to Datastreams directly, overcoming the difficulties we had mapping the Observations based on that perspective in comparison with CS API.</li>
<li>FROST-server logs queries that take longer than a certain treshold. This information can be used to improve database indexes and other data optimizations. Of course, the larger the storage size and the wider the use of an implementation it will become harder and harder to fine solutions for potential performance issues. He has good experiences with implementations that contain up to 850 million Observations.</li>
</ul>
</section><section id="recommendations"><div class="header-wrapper"><h3 id="x2-11-recommendations"><bdi class="secno">2.11 </bdi>Recommendations</h3><a class="self-link" href="#recommendations" aria-label="Permalink for Section 2.11"></a></div>
<p>For future research on the applicability of these and similar standards we have the following recommendations:</p>
<ul>
<li>Does the potential applicability reach further than stand-alone systems? To what extent could existing applications adopt these standards, e.g. when it comes to data exchange through underlying standards?</li>
<li>What role could temporal aggregation of observations play? This is something that is missing in these standards but is widely used in the field of timeseries data.</li>
</ul>
</section></section>
  <section class="informative" id="research-question-2-visualisation-analysis"><div class="header-wrapper"><h2 id="x3-research-question-2-visualisation-analysis"><bdi class="secno">3. </bdi>Research question 2: Visualisation &amp; Analysis</h2><a class="self-link" href="#research-question-2-visualisation-analysis" aria-label="Permalink for Section 3."></a></div><p><em>This section is non-normative.</em></p>
<section id="goal-0"><div class="header-wrapper"><h3 id="x3-1-goal"><bdi class="secno">3.1 </bdi>Goal</h3><a class="self-link" href="#goal-0" aria-label="Permalink for Section 3.1"></a></div>
<p>An important aspect of working with sensor data is, of course, being able to get the data and load it into an
application for visualisation and analysis. This research question is about demonstrating that this works,
both in a web viewer and in a dashboard application (e.g. Grafana).</p>
<p>Demonstrate the following steps in both types of application:</p>
<ol>
<li>The user searches for and finds different sensors that offer sensor data;</li>
<li>The users selects a subset of measurements based on several criteria. The following criteria must
be demonstrated as a minimum:</li>
</ol>
<ul>
<li>most recent measurement of one sensor;</li>
<li>all measurements at a certain location within a certain time period;</li>
<li>most recent measurement of a selection of sensors that are located within a bounding box.</li>
</ul>
<ol start="3">
<li>The application loads the selected measurements;</li>
<li>The user can view and use the measurements within the application.</li>
</ol>
</section><section id="use-case-0"><div class="header-wrapper"><h3 id="x3-2-use-case"><bdi class="secno">3.2 </bdi>Use case</h3><a class="self-link" href="#use-case-0" aria-label="Permalink for Section 3.2"></a></div>
<p>RIVM offers an existing SensorThings API (STA) endpoint (<a href="https://api-samenmeten.rivm.nl/v1.0">https://api-samenmeten.rivm.nl/v1.0</a>) which can serve input for analysis and visualization demonstrations. Further, we are interested to investigate if this endpoint offers
sufficient data and metadata detail to support connections to third party dashboards, or if (small) tweaks are required in order to enable easier integration of the offered data with other tools.</p>
</section><section id="about-the-researchers"><div class="header-wrapper"><h3 id="x3-3-about-the-researchers"><bdi class="secno">3.3 </bdi>About the researchers</h3><a class="self-link" href="#about-the-researchers" aria-label="Permalink for Section 3.3"></a></div>
<p>This research is conducted by <a href="https://mindloops.nl">Mindloops BV</a>. Mindloops is a boutique software consultancy specializing in software engineering. For nearly 10 years, Mindloops has proudly delivered solutions to clients such as the Dutch Police, the Dutch Railways (NS), The Netherlands’ Cadastre, Land Registry and Mapping Agency (Kadaster) and Dutch National Road Data Portal (NDW). Together with our clients and partners, Mindloops is committed to making a positive impact on society. Mindloops has a proven track record in building and running high-quality, mission-critical, bespoke software designed to last and evolve for decades. These data-intensive systems often require extensive integration with other systems, as well as data visualization.</p>
</section><section id="design-and-approach"><div class="header-wrapper"><h3 id="x3-4-design-and-approach"><bdi class="secno">3.4 </bdi>Design and approach</h3><a class="self-link" href="#design-and-approach" aria-label="Permalink for Section 3.4"></a></div>
<p>The viewers communicate with a SensorThings API and allow users to select sensors and view measurements. As a data source we used the <a href="https://www.samenmeten.nl/international/API">RIVM SamenMeten SensorThings API</a>. To prove that our viewer is able to handle SensorThings API in a generic way we’ve also added the <a href="https://airquality-frost.k8s.ilt-dmz.iosb.fraunhofer.de/v1.1/">Fraunhofer Airquality SensorThings API</a> (as a bonus).</p>
<p>
      </p><figure id="fig-architecture">
        <img src="media/rq2/architecture.png" alt="Architecture">
        <figcaption><a class="self-link" href="#fig-architecture">Figure <bdi class="figno">6</bdi></a> <span class="fig-title">Architecture</span></figcaption>
      </figure>
    <p></p>
<p>We’ve applied a risk-driven approach in which we tackled the most complex things early on. This maximises the desired outcome within the available time. Also we used an iterative and agile approach with short feedback cycles to validate our results, which aligned with the bi-weekly meetings with GeoNovum.</p>
</section><section id="results"><div class="header-wrapper"><h3 id="x3-5-results"><bdi class="secno">3.5 </bdi>Results</h3><a class="self-link" href="#results" aria-label="Permalink for Section 3.5"></a></div>
<p>We've implemented the requested features in a dashboard application and web viewer. Both are accessible on a publicly accessible URL, which will be available for demonstration purposes until 31-10-2025.</p>
<ul>
<li>Dashboard application (Grafana): <a href="https://sensordata-dashboard.mindloops.io/">https://sensordata-dashboard.mindloops.io/</a></li>
<li>Web viewer: <a href="https://sensordata-viewer.mindloops.io/">https://sensordata-viewer.mindloops.io/</a></li>
</ul>
<p>All source code needed to run both solutions in a local environment is delivered as open source under MIT license. 
See the README in each repository for details.</p>
<ul>
<li>Dashboard application (Grafana): <a href="https://github.com/mindloops/sensordata-dashboard">https://github.com/mindloops/sensordata-dashboard</a></li>
<li>Web viewer: <a href="https://github.com/mindloops/sensordata-web-ui">https://github.com/mindloops/sensordata-web-ui</a></li>
</ul>
<section id="demo-of-dashboard-application"><div class="header-wrapper"><h4 id="x3-5-1-demo-of-dashboard-application"><bdi class="secno">3.5.1 </bdi>Demo of Dashboard application</h4><a class="self-link" href="#demo-of-dashboard-application" aria-label="Permalink for Section 3.5.1"></a></div>
<ol>
<li>Selecting a specific sensor

      <figure id="fig-selecting-a-specific-sensor">
        <img src="media/rq2/grafana-1.png" alt="Selecting a specific sensor">
        <figcaption><a class="self-link" href="#fig-selecting-a-specific-sensor">Figure <bdi class="figno">7</bdi></a> <span class="fig-title">Selecting a specific sensor</span></figcaption>
      </figure>
    </li>
<li>Select an area on the map and list sensor data.

      <figure id="fig-select-an-area-on-the-map-and-list-sensor-data">
        <img src="media/rq2/grafana-3.png" alt="Select an area on the map and list sensor data">
        <figcaption><a class="self-link" href="#fig-select-an-area-on-the-map-and-list-sensor-data">Figure <bdi class="figno">8</bdi></a> <span class="fig-title">Select an area on the map and list sensor data</span></figcaption>
      </figure>
    </li>
<li>Show measurements of one or more sensors

      <figure id="fig-show-measurements-of-one-or-more-sensors">
        <img src="media/rq2/grafana-2.png" alt="Show measurements of one or more sensors">
        <figcaption><a class="self-link" href="#fig-show-measurements-of-one-or-more-sensors">Figure <bdi class="figno">9</bdi></a> <span class="fig-title">Show measurements of one or more sensors</span></figcaption>
      </figure>
    </li>
<li>Switch API source to use. Note: for the RIVM API the 'Use EWKT workaround' should be set on 'SRID=4326', while for the Fraunhofer API it should be empty.

      <figure id="fig-switch-api-source-to-use">
        <img src="media/rq2/grafana-0.png" alt="Switch API source to use">
        <figcaption><a class="self-link" href="#fig-switch-api-source-to-use">Figure <bdi class="figno">10</bdi></a> <span class="fig-title">Switch API source to use</span></figcaption>
      </figure>
    </li>
</ol>
</section><section id="demo-of-web-viewer"><div class="header-wrapper"><h4 id="x3-5-2-demo-of-web-viewer"><bdi class="secno">3.5.2 </bdi>Demo of Web viewer</h4><a class="self-link" href="#demo-of-web-viewer" aria-label="Permalink for Section 3.5.2"></a></div>
<ol>
<li>Selecting a specific sensor

      <figure id="fig-selecting-a-specific-sensor-0">
        <img src="media/rq2/viewer-1.png" alt="webviewer Selecting a specific sensor">
        <figcaption><a class="self-link" href="#fig-selecting-a-specific-sensor-0">Figure <bdi class="figno">11</bdi></a> <span class="fig-title">Selecting a specific sensor</span></figcaption>
      </figure>
    </li>
<li>Select an area on the map and list sensor data.

      <figure id="fig-select-an-area-on-the-map-and-list-sensor-data-0">
        <img src="media/rq2/viewer-3.png" alt="webviewer Select an area on the map and list sensor data">
        <figcaption><a class="self-link" href="#fig-select-an-area-on-the-map-and-list-sensor-data-0">Figure <bdi class="figno">12</bdi></a> <span class="fig-title">Select an area on the map and list sensor data</span></figcaption>
      </figure>
    </li>
<li>Show measurements of one or more sensors

      <figure id="fig-show-measurements-of-one-or-more-sensors-0">
        <img src="media/rq2/viewer-2.png" alt="webviewer Show measurements of one or more sensors">
        <figcaption><a class="self-link" href="#fig-show-measurements-of-one-or-more-sensors-0">Figure <bdi class="figno">13</bdi></a> <span class="fig-title">Show measurements of one or more sensors</span></figcaption>
      </figure>
    </li>
</ol>
</section></section><section id="findings"><div class="header-wrapper"><h3 id="x3-6-findings"><bdi class="secno">3.6 </bdi>Findings</h3><a class="self-link" href="#findings" aria-label="Permalink for Section 3.6"></a></div>
<section id="overall"><div class="header-wrapper"><h4 id="x3-6-1-overall"><bdi class="secno">3.6.1 </bdi>Overall</h4><a class="self-link" href="#overall" aria-label="Permalink for Section 3.6.1"></a></div>
<p>The SensorThings API (STA) provides a well-structured and easy to use API for consuming sensor data. There are several data structures in the API,
that are well interconnected and provide useful entries into a suite of sensor data. It is possible to query data in several useful ways, e.g.
based on observed properties, geo location and/or time range. Additionally, it is also possible to combine API results dynamically as part of the
OData standard that the SensorThings API is based on. This makes it possible to combine data in a single API call, even though this is not
predefined in the API specification. That is very useful, especially for more standardized tools like Grafana, 
that need all relevant data in a single API response to work properly.</p>
<p>We experienced no major shortcomings in the SensorThings API standard. We identified the following (minor) improvements:</p>
<ol>
<li><p>No standard for observed properties
Currently every STA defines its own observed properties. For example temperature is (re)defined in every single STA. There are no standard observed properties. The STA specification does allow observed properties to point to definitions but every STA implementation is free to pick their own definitions. This makes it harder for example to convert from one unit of measurement to another in a viewer.</p>
</li>
<li><p>No support for multiple languages
Descriptions for sensors and measured properties are not available in multiple languages by the SensorThings API. This seems missing in the specification. This may make it harder to use sensor data, especially when descriptions are provided in different languages depending on sensor location.</p>
</li>
</ol>
</section><section id="rivm-api"><div class="header-wrapper"><h4 id="x3-6-2-rivm-api"><bdi class="secno">3.6.2 </bdi>RIVM API</h4><a class="self-link" href="#rivm-api" aria-label="Permalink for Section 3.6.2"></a></div>
<p>We worked with the RIVM Samenmeten API as the primary datasource for this use case. The implementation is based on 1.0 of the specification. RIVM uses the open source <a href="https://github.com/gost/server">GOST server</a> which is currently not actively maintained and has several known issues. RIVM is aware of these issues and is planning to migrate to a different solution in the future.</p>
<p>We encountered the following issues during our research:</p>
<ol>
<li><p>The geospatial search filter did not work with a standard WKT string. It did work with an EWKT string, which contains an SRID and is specific to the Postgres database as used by RIVM. This means geospatial search was not interoperable with other APIs like Fraunhofer’s.</p>
</li>
<li><p>The paging feature of the API is activated when more than 200 results are returned. However, paging did not always work properly, meaning no results were returned or the wrong results, because the "top" and "skip" values were not processed correctly. In addition, when using the "$expand" feature, paging was often not possible at all even though results were still limited to 200. This makes it impossible to process all available data. The latter is a <a href="https://github.com/gost/server/issues/146">known issue in GOST</a>.</p>
</li>
<li><p>The "in" filter, a standard part of the API, was not implemented since it isn’t supported by GOST. For example: the following query failed: <a href="https://api-samenmeten.rivm.nl/v1.0/Datastreams?$filter=id%20in%20(10208,10209)">https://api-samenmeten.rivm.nl/v1.0/Datastreams?$filter=id%20in%20(10208,10209)</a>.
It does complete successfully in other STA implementations (e.g. FROST): <a href="https://airquality-frost.k8s.ilt-dmz.iosb.fraunhofer.de/v1.0/Datastreams?$filter=id%20in%20(4,5,6,7)">https://airquality-frost.k8s.ilt-dmz.iosb.fraunhofer.de/v1.0/Datastreams?$filter=id%20in%20(4,5,6,7)</a> </p>
</li>
<li><p>The RIVM API does not allow Cross-Origin Resource Sharing (<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS">CORS</a>). This makes it impossible to build a web-based viewer that communicates directly with the API (using XHR requests). Since the browser used by an end-user will enforce CORS by default. As a workaround we proxied the requests of our web-based viewer through our backend service. To be clear: this issue only applies to client-side web-applications.</p>
</li>
</ol>
</section><section id="dashboard-application"><div class="header-wrapper"><h4 id="x3-6-3-dashboard-application"><bdi class="secno">3.6.3 </bdi>Dashboard application</h4><a class="self-link" href="#dashboard-application" aria-label="Permalink for Section 3.6.3"></a></div>
<p>We’ve selected Grafana to implement the dashboard application since it’s the de facto application for complex time series data and well-suited to display sensor data. On the other hand Grafana is a generic dashboarding and visualisation tool, and is not specifically built for SensorThings API. As a consequence we needed to organise API calls and responses in such a way that it fits the Grafana way of working. This would also apply to other off-the-shelf visualisation tools like Kibana, Apache Superset or BI tools like PowerBI, Tableau, etc.</p>
<p>Our research revealed the following findings:</p>
<ol>
<li><p>We started out with the <a href="https://grafana.com/grafana/plugins/iosb-sensorthings-datasource/">FROST SensorThings Datasource plugin</a>. This data source was easy to use but limited in its capabilities. It is only capable of displaying observations. We switched to the more generic <a href="https://grafana.com/docs/plugins/yesoreyeram-infinity-datasource/latest/">Infinity Data Source</a> instead. This had the advantage of also being able to fetch other SensorThings endpoints like Locations, Things and ObservedProperties. We needed data from these endpoints to display maps and tables on our dashboard to allow the user to select one or more sensors. The Infinity data source is also more advanced compared to the FROST data  source as it supports other features of Grafana like alerting. Alerting is supported since the Infinity data source is a so-called <a href="https://grafana.com/developers/plugin-tools/key-concepts/backend-plugins">Grafana backend plugin</a>.</p>
</li>
<li><p>To meet the requirement for the interactive map, we were unable to use the <a href="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/">built-in Geomap component</a> of Grafana since it doesn’t allow user interaction. In Grafana,
it is more common to predefine a geographic visualisation and set-up different dashboards for different locations or areas (e.g. Netherlands/Germany). So it isn’t a common use case to let users draw a bounding box in Grafana. As an alternative we used the <a href="https://grafana.com/grafana/plugins/felixrelleum-geomapwms-panel/">GeoMap Panel WMS plugin</a>. Despite its name this geomap component isn't limited to WMS datasources, it supports the same datasources as the built-in Grafana geomap component like OpenStreetMap. The GeoMap Panel component worked perfectly and allows the user to draw a polygon and thereby select one or more sensors (things) on a map.</p>
</li>
</ol>
</section><section id="bespoke-web-viewer"><div class="header-wrapper"><h4 id="x3-6-4-bespoke-web-viewer"><bdi class="secno">3.6.4 </bdi>Bespoke web viewer</h4><a class="self-link" href="#bespoke-web-viewer" aria-label="Permalink for Section 3.6.4"></a></div>
<p>A bespoke web app allows for more freedom in customization and presenting the data visually. All components can be tailored to the SensorThings API use case. The downside is that this may require more technical expertise, and no customisation is possible by end-users.</p>
<p>Our research revealed the following findings:</p>
<ol>
<li><p>On request of GeoNovum we used AI code generation tools to help assist with the generation of several parts of the viewer. The AI tools we used (Anthropic, OpenAI, Google) all understood SensorThings API semantics in general and were able to provide initial implementations for them. It did require significant tuning, due to API implementation details sometimes missing or behaving differently, and AI tools not always properly providing solutions that had the right semantics. In summary, at the moment AI tools are useful for jumpstarting specific parts of the viewer, such as a table or map component, but are unlikely to provide meaningful results when tasked with creating an entire viewer from a single prompt. Still AI coding tools are very helpful and promising.</p>
</li>
<li><p>As mentioned in the RIVM paragraph due to the CORS limitation in RIVM API, we couldn’t connect the web viewer directly to the RIVM API. Instead, we used
an intermediate proxy on our own backend to work around this limitation.</p>
</li>
</ol>
</section></section><section id="conclusion"><div class="header-wrapper"><h3 id="x3-7-conclusion"><bdi class="secno">3.7 </bdi>Conclusion</h3><a class="self-link" href="#conclusion" aria-label="Permalink for Section 3.7"></a></div>
<p>All research goals were successfully achieved for both the dashboard application and the bespoke web viewer. The Sensordata API allows for a flexible way to interconnect sensor data with
different visualisation and analytics technologies. There are some caveats, e.g. issues in API implementations, and potentially vague or missing metadata in the generic API, that makes it necessary to customize or tune the viewer based on details outside the SensorThings API.</p>
</section><section id="recommendations-0"><div class="header-wrapper"><h3 id="x3-8-recommendations"><bdi class="secno">3.8 </bdi>Recommendations</h3><a class="self-link" href="#recommendations-0" aria-label="Permalink for Section 3.8"></a></div>
<section id="rivm-api-0"><div class="header-wrapper"><h4 id="x3-8-1-rivm-api"><bdi class="secno">3.8.1 </bdi>RIVM API</h4><a class="self-link" href="#rivm-api-0" aria-label="Permalink for Section 3.8.1"></a></div>
<ul>
<li>Upgrade the SensorThings server to a more actively maintained implementation. This would likely resolve all encountered issues. We’ve discussed this finding with RIVM, and RIVM is already planning to upgrade the server.</li>
<li>Enable CORS to allow web viewers to interact directly with the API without needing a backend. This involves including the <code>Access-Control-Allow-Origin: *</code> HTTP header in every response.</li>
</ul>
</section><section id="sensorthings-standard"><div class="header-wrapper"><h4 id="x3-8-2-sensorthings-standard"><bdi class="secno">3.8.2 </bdi>SensorThings standard</h4><a class="self-link" href="#sensorthings-standard" aria-label="Permalink for Section 3.8.2"></a></div>
<ul>
<li>Investigate ways to standardize observed properties and/or support conversions between units of measurement. For example, allow the user to specify the desired unit of temperature as Fahrenheit in a query parameter and let the API take care of Celsius to Fahrenheit conversion.</li>
<li>Investigate ways to allow for internationalization (i18n). This can be achieved by supporting the <code>Accept-Language</code> HTTP request header in line with <a href="https://docs.ogc.org/is/19-072/19-072.html#_98ff4350-10c4-454e-b5da-6802f1ad70d7">OGC API Common</a>.</li>
</ul>
</section></section></section>
  <section class="informative" id="research-question-3-device-registration"><div class="header-wrapper"><h2 id="x4-research-question-3-device-registration"><bdi class="secno">4. </bdi>Research question 3: Device Registration</h2><a class="self-link" href="#research-question-3-device-registration" aria-label="Permalink for Section 4."></a></div><p><em>This section is non-normative.</em></p>
<section id="goal-1"><div class="header-wrapper"><h3 id="x4-1-goal"><bdi class="secno">4.1 </bdi>Goal</h3><a class="self-link" href="#goal-1" aria-label="Permalink for Section 4.1"></a></div>
<p>The OGC SensorThings API is a very convenient API for accessing sensor data.
But to access sensor data, the data has to be added to a service first.
Most sensors no not <em>talk</em> SensorThings, but some other standard, like LoRa-WAN, NB-IoT or 5G.
What needs to happen to have a sensor be registered in a SensorThings service, and have the data from the sensor appear there too, is device registration, or onboarding.
This research topic explores the issue of device registration.</p>
</section><section id="about-the-researchers-0"><div class="header-wrapper"><h3 id="x4-2-about-the-researchers"><bdi class="secno">4.2 </bdi>About the researchers</h3><a class="self-link" href="#about-the-researchers-0" aria-label="Permalink for Section 4.2"></a></div>
<p>This research is done by the <a href="https://www.iosb.fraunhofer.de/en.html">Fraunhofer Institute of Optronics, System Technologies and Image Exploitation IOSB</a>, specifically the department <a href="https://www.iosb.fraunhofer.de/en/competences/system-technology/information-management-and-production-control.html">Information Management and Production Control</a> (ILT).
The department Information Management and Production Control develops open and secure architectures, software components and solutions for information, control and test systems in Internet of Things (IoT) application areas.</p>
</section><section id="state-of-research"><div class="header-wrapper"><h3 id="x4-3-state-of-research"><bdi class="secno">4.3 </bdi>State of Research</h3><a class="self-link" href="#state-of-research" aria-label="Permalink for Section 4.3"></a></div>
<p>Device registration, and following that, device management, is an ongoing research topic.
Not just in the context of the Internet of Things, but everywhere where sensors are deployed and managed.
The complexity stems from the fact that there are very many different sensors and sensor types, used in very many different use cases, feeding their data into very many different sensor data management systems over many different communication protocols.
The manufacturer of a Sensor system can’t know in advance the use cases the sensor will be used for, or the sensor data management systems it will need to feed data to.</p>
<p>When deploying a new sensor for a given use case, communicating over an existing communication infrastructure, sending data to an existing sensor data management system, information from four different sources needs to be combined:</p>
<ul>
<li>The sensor hardware, such as:<ul>
<li>Sensor identification</li>
<li>Measured parameters</li>
</ul>
</li>
<li>Communication Infrastructure, such as:<ul>
<li>Authentication and Authorisation</li>
<li>Addresses of brokers or gateways</li>
</ul>
</li>
<li>Sensor data management system, such as:<ul>
<li>Authentication and Authorisation</li>
<li>API endpoints</li>
</ul>
</li>
<li>Use case, such as:<ul>
<li>Feature the sensor observes</li>
<li>Location of the sensor</li>
<li>Responsible party</li>
</ul>
</li>
</ul>
<p>The initial configuration of sensor devices is manufacturer specific and needs to be done directly on the device
For instance, many manufacturers of LoRaWAN sensor devices provide a smartphone app that uses Near-Field-Communication (NFC) to directly change the configuration of their devices.
Next to the initial configuration of the device itself, the device also has to be registered on the communication network.
On the case of LoRa, this is often the global network “The Things Network”, but many organisations have their own local LoRa instance using the “Chirpstack” software implementation.
Once the initial configuration is completed, and the device is connected to a LoRa network, the configuration of many devices can also be changed using Over-The-Air updates.</p>
<p>The sensor also has to be registered in the sensor data management system of the organisation that deploys the sensor, so that the data from the sensor can be used for the purpose it was deployed for.
There are many different systems for this, many custom-built for their use case, some based on standards such as O&amp;M, OMS or the SensorThings API.</p>
<p>Because of the enormous diversity in each of the layers involved, the concept of connectors is used to transfer data between the communication infrastructure and the information management system.
A Connector is a piece of software with Extract, Transform, Load (ETL) functionality, that takes data from a source system, transforms the data into the format of the target system, and then loads the data into the target system.
A common piece of software used for this purpose is <a href="https://nodered.org/">NodeRed</a>, that features a browser-based, drag-and-drop interface for creating ETL flows.</p>
<p>One problem with this architecture is directly clear from figure 1: The data from a single sensor has to be managed and kept synchronised over multiple systems.</p>
<p>
      </p><figure id="fig-generic-iot-architecture-with-many-different-admin-interfaces">
        <img src="media/Generic-IoT-Architecture.drawio.png" alt="Generic IoT Architecture with many different Admin interfaces">
        <figcaption><a class="self-link" href="#fig-generic-iot-architecture-with-many-different-admin-interfaces">Figure <bdi class="figno">14</bdi></a> <span class="fig-title">Generic IoT Architecture with many different Admin interfaces</span></figcaption>
      </figure>
    <p></p>
<p>Taking a typical LoRa device, using NodeRed as ETL stack, the process looks something like this:</p>
<ol>
<li><strong>Device</strong>: Configure the device by setting the identifiers and secrets used to join the LoRa network and configure the intervals in which measurements are made.</li>
<li><strong>LoRa Network</strong>: Register the device<ol>
<li>Create a device object in the LoRa network stack with the identifiers and secrets from the previous step.</li>
<li>Set up a low-level decoder to decode the payload of the sensor into a generic JSON object.
If multiple devices of the same type are used, this generally only needs to be done once.</li>
</ol>
</li>
<li><strong>SensorThings Service</strong>: Create entities for managing the sensor data<ol>
<li>Create a Thing with a Location</li>
<li>For each Sensor on the device, create an ObservedProperty instance if a suitable one is not already present.</li>
<li>For each Sensor on the device, create a Sensor instance if a suitable one is not already present.</li>
<li>For each Sensor on the device, create a Datastream, linked to the Thing, a Sensor and an ObservedProperty.</li>
</ol>
</li>
<li><strong>NodeRed</strong>: Create the workflow that can decode the generic JSON object and insert each value into the correct Datastream for the device.</li>
</ol>
<p>Device Registration is also only the first step in the long process of device management.
Devices can break, be moved around, and be decommissioned.
Battery lifetime needs to be tracked to ensure they are exchanged in time and sensors need to be monitored to ensure they still work as expected.
It is quite likely that the admin in the diagram will start using a spreadsheet to keep track of his sensors, thus adding a fifth location that contains data for a sensor that needs to be kept in sync.</p>
</section><section id="opencitysense"><div class="header-wrapper"><h3 id="x4-4-opencitysense"><bdi class="secno">4.4 </bdi>OpenCitySense</h3><a class="self-link" href="#opencitysense" aria-label="Permalink for Section 4.4"></a></div>
<p>To make the complexities of sensor management more manageable, Fraunhofer IOSB started an internal research project to design the concept for a sensor management system, based on the OGC SensorThings API, and create an implementation of this system.</p>
<p>Since the <a href="https://docs.ogc.org/is/18-088/18-088.html">SensorThings API version 1.1</a> is extendible by design, and already comes with several extensions, the architecture can be greatly simplified by using the SensorThings API service as the central data store for all sensor related data (figure 3).
This means that all components communicate through a single service, reducing the number of interconnects between components and reducing the spread of primary information across components.</p>
<p>The standard <a href="https://docs.ogc.org/is/17-079r1/17-079r1.html">tasking extension</a> can be used to coordinate management actions between components, such as signalling to a connector that a sensor needs to be on-boarded, that a configuration needs to be changed, or that a sensor needs to be off-boarded.
The connector concept can then be extended to not just be a one-way ETL process, but to take an active role in the sensor registration process on the LoRaWAN stack.
It can receive information about new or updated sensors from the SensorThings service, and automatically take all required registration actions in the communication infrastructure.</p>
<p>
      </p><figure id="fig-opencitysense-archtiecture">
        <img src="media/OpenCitySense-Architecture-components-simplified.drawio.png" alt="OpenCitySense Architecture">
        <figcaption><a class="self-link" href="#fig-opencitysense-archtiecture">Figure <bdi class="figno">15</bdi></a> <span class="fig-title">OpenCitySense Archtiecture</span></figcaption>
      </figure>
    <p></p>
<p>Besides greatly simplifying the architecture, a second major advantage to using the SensorThing API service for all data storage is that it offers a consistent, powerful API for managing relational data.
This makes all data relevant for managing sensors and their data available in a unified, consistent way, and management tools or other clients do not need to implement multiple APIs.
While all publicly relevant sensor data and metadata can be stored in the core data model of the SensorThings API, internal management data can be stored in a custom data model extension.
Since this does not alter the core data model of the SensorThings API, clients implementing only the Sensing part will not be affected by this data model extension.</p>
<p>Sensor configuration parameters are modelled using the <a href="https://www.ogc.org/publications/standard/swecommon/">SWE Common Data Model Encoding Standard</a>, and translated by the connector into a form that the sensor understands.
This means that regardless of sensor brand or type, the management GUI can offer a consistent interface for changing sensor settings.</p>
<p>OpenCitySense consists of:</p>
<ul>
<li>A data model extension for FROST-Server.</li>
<li>A GUI for managing sensors.</li>
<li>A generic framework for developing connectors.</li>
<li>A connector for connecting LoRaWAN devices over Chirpstack.</li>
<li>A connector for connecting LoRaWAN devices over TTN/TTI.</li>
</ul>
<section id="data-model"><div class="header-wrapper"><h4 id="x4-4-1-data-model"><bdi class="secno">4.4.1 </bdi>Data Model</h4><a class="self-link" href="#data-model" aria-label="Permalink for Section 4.4.1"></a></div>
<p>To allow the representation of device management information, a data model extension has been designed for the data models of the SensorThings API and the tasking extension.
The extended data mode is depicted in the following image.</p>
<p>
      </p><figure id="fig-opencitysense-data-model">
        <img src="media/Datamodel-OpenCitySense.drawio.png" alt="OpenCitySense Data Model">
        <figcaption><a class="self-link" href="#fig-opencitysense-data-model">Figure <bdi class="figno">16</bdi></a> <span class="fig-title">OpenCitySense Data Model</span></figcaption>
      </figure>
    <p></p>
<p>Connectors and Devices are modelled as Things.
To make it easier to distinguish between different types of Things, a "type" field has been added to the Thing entity type that indicates the type of the thing.
Things of type "Connector" are linked to the Things of the devices they manage, through the ControlledDevices &lt;-&gt; ControllingConnector relation.
This makes it easy to find all the devices controlled by a certain connector, and to find the connector controlling a certain device.</p>
<p>Each Thing can have a DeviceModel, describing the capabilities of the Device or Connector.
A DeviceModel contains the schema for the Configurations of devices of this model, and can link to a Configuration that is the template or default configuration of devices of this model.
DeviceModels can link to a Decoder that can be used to decode and encode data coming from and sent to devices of this model.</p>
<p>DeviceModels link to Sensors that describe the Sensors that a device of the model has.
In turn, Sensors link to the ObservedProperties that a Sensor of this type observes.
Using these two links, a Connector knows which Datastreams to create and which Sensor and ObservedProperty to link, when onboarding a Device.</p>
<p>DeviceModels link to the DeviceModels of the Connectors that they are compatible with.
This allows a user interface to find the DeviceModels that work on a chosen Connector, and allows the Connector to specify additional configuration options it requires on a Device and a DeviceModel.</p>
<p>Configurations describe how a device can be, was or is configured.
The schema for the config is stored in the DeviceModel of the device.
The status field of a configuration indicates the current status of a sensor (Created, Active, Inactive, Removed) or if the Configuration is a Template.
Configurations have a time field that indicates when this configuration became active.
If a device has multiple configurations there must be only one configuration with status "Active".
The other configurations are historical Configurations or templates.</p>
<p>To allow the secure storage of passwords or API keys, the DeviceSecret class was added to the data model.
The secrets can be secured, both by only giving certain users read-access to these device secrets, and by encrypting the values of the device secrets.
To allow Encryption, a connector has a public/private key pair.
The private key of a connector is not stored in the SensorThings data model, but directly passed to the connector, usually using an environment variable.
The public key of the connector is available in the SensorThings data model and can be used by clients to encrypt passwords before storing them in a DeviceSecret entity.
This way only the connector can decrypt these secrets.</p>
</section><section id="onboarding-workflow"><div class="header-wrapper"><h4 id="x4-4-2-onboarding-workflow"><bdi class="secno">4.4.2 </bdi>Onboarding Workflow</h4><a class="self-link" href="#onboarding-workflow" aria-label="Permalink for Section 4.4.2"></a></div>
<p>From the point of view of the User Interface the workflow for onboarding a sensor is as follows:</p>
<pre><svg id="diagram-3" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 907px;" viewBox="-50 -10 907 652" role="img" aria-labelledby="chart-title-diagram-3 chart-desc-diagram-3"><title id="chart-title-diagram-3"></title><desc id="chart-desc-diagram-3"></desc><style>
#diagram-3 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#diagram-3 .error-icon{fill:#552222;}#diagram-3 .error-text{fill:#552222;stroke:#552222;}#diagram-3 .edge-thickness-normal{stroke-width:2px;}#diagram-3 .edge-thickness-thick{stroke-width:3.5px;}#diagram-3 .edge-pattern-solid{stroke-dasharray:0;}#diagram-3 .edge-pattern-dashed{stroke-dasharray:3;}#diagram-3 .edge-pattern-dotted{stroke-dasharray:2;}#diagram-3 .marker{fill:#333333;stroke:#333333;}#diagram-3 .marker.cross{stroke:#333333;}#diagram-3 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#diagram-3 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#diagram-3 text.actor&gt;tspan{fill:black;stroke:none;}#diagram-3 .actor-line{stroke:grey;}#diagram-3 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#diagram-3 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#diagram-3 #arrowhead path{fill:#333;stroke:#333;}#diagram-3 .sequenceNumber{fill:white;}#diagram-3 #sequencenumber{fill:#333;}#diagram-3 #crosshead path{fill:#333;stroke:#333;}#diagram-3 .messageText{fill:#333;stroke:#333;}#diagram-3 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#diagram-3 .labelText,#diagram-3 .labelText&gt;tspan{fill:black;stroke:none;}#diagram-3 .loopText,#diagram-3 .loopText&gt;tspan{fill:black;stroke:none;}#diagram-3 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#diagram-3 .note{stroke:#aaaa33;fill:#fff5ad;}#diagram-3 .noteText,#diagram-3 .noteText&gt;tspan{fill:black;stroke:none;}#diagram-3 .activation0{fill:#f4f4f4;stroke:#666;}#diagram-3 .activation1{fill:#f4f4f4;stroke:#666;}#diagram-3 .activation2{fill:#f4f4f4;stroke:#666;}#diagram-3 .actorPopupMenu{position:absolute;}#diagram-3 .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#diagram-3 .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#diagram-3 .actor-man circle,#diagram-3 line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#diagram-3 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
</style><g></g><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"></path></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"></path></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"></path></symbol></defs><g><line id="actor0" x1="75" y1="5" x2="75" y2="586" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-0"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="75" dy="0">Sensor Manager</tspan></text></g></g><g><line id="actor1" x1="330" y1="5" x2="330" y2="586" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-1"><rect x="255" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="330" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="330" dy="0">FROST-Server</tspan></text></g></g><g><line id="actor2" x1="727" y1="5" x2="727" y2="586" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-2"><rect x="652" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="727" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="727" dy="-7">LoRaWAN</tspan></text><text x="727" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="727" dy="7">Connector</tspan></text></g></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="203" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">List DeviceModels</text><line x1="75" y1="113" x2="330" y2="113" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="325" y="113" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"></rect></g><text x="200" y="128" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Data</text><line x1="325" y1="161" x2="75" y2="161" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="203" y="176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Thing</text><text x="203" y="195" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Links to DeviceModel</text><line x1="75" y1="228" x2="330" y2="228" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="325" y="228" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"></rect></g><text x="200" y="243" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">@id</text><line x1="325" y1="276" x2="75" y2="276" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="203" y="291" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST OnboardDevice Task</text><line x1="75" y1="324" x2="330" y2="324" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="325" y="324" fill="#EDF2AE" stroke="#666" width="10" height="96" rx="0" ry="0" class="activation0"></rect></g><text x="531" y="339" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Task(OnboardDevice, ThingID of Device)</text><line x1="335" y1="372" x2="727" y2="372" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="722" y="374" fill="#EDF2AE" stroke="#666" width="10" height="172" rx="0" ry="0" class="activation0"></rect></g><text x="200" y="387" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">@id</text><line x1="325" y1="420" x2="75" y2="420" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="732" y="435" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Onboard Device</text><path d="M 732,468 C 792,458 792,498 732,488" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></path><text x="526" y="513" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Update Task: Done</text><line x1="722" y1="546" x2="330" y2="546" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><g><rect x="0" y="566" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="598.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="75" dy="0">Sensor Manager</tspan></text></g><g><rect x="255" y="566" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="330" y="598.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="330" dy="0">FROST-Server</tspan></text></g><g><rect x="652" y="566" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="727" y="598.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="727" dy="-7">LoRaWAN</tspan></text><text x="727" y="598.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="727" dy="7">Connector</tspan></text></g></svg></pre>
<p>Assuming a suitable DeviceModel already exists for the device to be onboarded, the user interface only needs to create a Thing for the device and then create a Task for the connector to onboard the device.
Most of the work is done by the Connector, as can be seen in the workflow focusing on what the Connector does after the onboarding Task is created:</p>
<pre><svg id="diagram-4" width="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 1695px;" viewBox="-50 -10 1695 1385" role="img" aria-labelledby="chart-title-diagram-4 chart-desc-diagram-4"><title id="chart-title-diagram-4"></title><desc id="chart-desc-diagram-4"></desc><style>
#diagram-4 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#diagram-4 .error-icon{fill:#552222;}#diagram-4 .error-text{fill:#552222;stroke:#552222;}#diagram-4 .edge-thickness-normal{stroke-width:2px;}#diagram-4 .edge-thickness-thick{stroke-width:3.5px;}#diagram-4 .edge-pattern-solid{stroke-dasharray:0;}#diagram-4 .edge-pattern-dashed{stroke-dasharray:3;}#diagram-4 .edge-pattern-dotted{stroke-dasharray:2;}#diagram-4 .marker{fill:#333333;stroke:#333333;}#diagram-4 .marker.cross{stroke:#333333;}#diagram-4 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#diagram-4 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#diagram-4 text.actor&gt;tspan{fill:black;stroke:none;}#diagram-4 .actor-line{stroke:grey;}#diagram-4 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#diagram-4 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#diagram-4 #arrowhead path{fill:#333;stroke:#333;}#diagram-4 .sequenceNumber{fill:white;}#diagram-4 #sequencenumber{fill:#333;}#diagram-4 #crosshead path{fill:#333;stroke:#333;}#diagram-4 .messageText{fill:#333;stroke:#333;}#diagram-4 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#diagram-4 .labelText,#diagram-4 .labelText&gt;tspan{fill:black;stroke:none;}#diagram-4 .loopText,#diagram-4 .loopText&gt;tspan{fill:black;stroke:none;}#diagram-4 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#diagram-4 .note{stroke:#aaaa33;fill:#fff5ad;}#diagram-4 .noteText,#diagram-4 .noteText&gt;tspan{fill:black;stroke:none;}#diagram-4 .activation0{fill:#f4f4f4;stroke:#666;}#diagram-4 .activation1{fill:#f4f4f4;stroke:#666;}#diagram-4 .activation2{fill:#f4f4f4;stroke:#666;}#diagram-4 .actorPopupMenu{position:absolute;}#diagram-4 .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));}#diagram-4 .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#diagram-4 .actor-man circle,#diagram-4 line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#diagram-4 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
</style><g></g><defs><symbol id="computer" width="24" height="24"><path transform="scale(.5)" d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z"></path></symbol></defs><defs><symbol id="database" fill-rule="evenodd" clip-rule="evenodd"><path transform="scale(.5)" d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z"></path></symbol></defs><defs><symbol id="clock" width="24" height="24"><path transform="scale(.5)" d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z"></path></symbol></defs><g><line id="actor3" x1="75" y1="5" x2="75" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-3"><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="75" dy="0">Sensor Manager</tspan></text></g></g><g><line id="actor4" x1="282" y1="5" x2="282" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-4"><rect x="207" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="282" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="282" dy="0">FROST-Server</tspan></text></g></g><g><line id="actor5" x1="610" y1="5" x2="610" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-5"><rect x="535" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="610" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="610" dy="-7">LoRaWAN</tspan></text><text x="610" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="610" dy="7">Connector</tspan></text></g></g><g><line id="actor6" x1="920" y1="5" x2="920" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-6"><rect x="845" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="920" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="920" dy="-7">LoRaWAN</tspan></text><text x="920" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="920" dy="7">Platform</tspan></text></g></g><g><line id="actor7" x1="1120" y1="5" x2="1120" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-7"><rect x="1045" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1120" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1120" dy="-7">LoRaWAN</tspan></text><text x="1120" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1120" dy="7">Application Server</tspan></text></g></g><g><line id="actor8" x1="1320" y1="5" x2="1320" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-8"><rect x="1245" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1320" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1320" dy="-7">LoRaWAN</tspan></text><text x="1320" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1320" dy="7">Network Server</tspan></text></g></g><g><line id="actor9" x1="1520" y1="5" x2="1520" y2="1319" class="200" stroke-width="0.5px" stroke="#999"></line><g id="root-9"><rect x="1445" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1520" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1520" dy="-7">LoRaWAN</tspan></text><text x="1520" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1520" dy="7">Join Server</tspan></text></g></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"></circle></marker></defs><text x="179" y="80" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Task</text><text x="179" y="99" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">OnboardDevice,</text><text x="179" y="117" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">(ThingID of Device)</text><line x1="75" y1="151" x2="282" y2="151" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="446" y="166" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">MQTT Push:</text><text x="446" y="185" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">New Task (new Sensor with ThingID)</text><line x1="282" y1="218" x2="610" y2="218" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="446" y="233" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">GET Thing(sensor)</text><text x="446" y="252" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">expand=DeviceModel, Configuration</text><line x1="610" y1="285" x2="282" y2="285" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="277" y="285" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"></rect></g><text x="449" y="300" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Data</text><line x1="287" y1="333" x2="610" y2="333" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="446" y="348" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Link Thing(sensor)</text><text x="446" y="367" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">to Thing(Connector)</text><line x1="610" y1="400" x2="282" y2="400" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="446" y="478" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Create Datastreams</text><line x1="610" y1="511" x2="282" y2="511" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><line x1="272" y1="410" x2="620" y2="410" class="loopLine"></line><line x1="620" y1="410" x2="620" y2="521" class="loopLine"></line><line x1="272" y1="521" x2="620" y2="521" class="loopLine"></line><line x1="272" y1="410" x2="272" y2="521" class="loopLine"></line><polygon points="272,410 322,410 322,423 313.6,430 272,430" class="labelBox"></polygon><text x="297" y="423" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="labelText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">loop</text><text x="471" y="428" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="471">[For each Sensor linked to</tspan></text><text x="471" y="446" text-anchor="middle" class="loopText" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;"><tspan x="471">DeviceModel]</tspan></text></g><text x="765" y="536" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Register Sensor</text><text x="765" y="555" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">(ApplicationID, DeviceID, DevEUI,</text><text x="765" y="573" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">JoinEUI, JoinServerAdr,</text><text x="765" y="592" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">NetworkServerAdr,</text><text x="765" y="611" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">ApplicationServerAdr)</text><line x1="610" y1="645" x2="920" y2="645" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="765" y="660" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Response</text><line x1="920" y1="693" x2="610" y2="693" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="865" y="708" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Register Sensor</text><text x="865" y="727" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">(DeviceID,DevEUI,JoinEUI)</text><line x1="610" y1="760" x2="1120" y2="760" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="865" y="775" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Response</text><line x1="1120" y1="808" x2="610" y2="808" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="965" y="823" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Register Sensor</text><text x="965" y="842" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">(DeviceID, DevEUI, JoinEUI, FrequencyID, PhyVersion, LoRaWANVersion, AppKey)</text><line x1="610" y1="875" x2="1320" y2="875" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="965" y="890" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Response</text><line x1="1320" y1="923" x2="610" y2="923" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="1065" y="938" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST Register Sensor</text><text x="1065" y="957" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">(DeviceID, DevEUI, JoinEUI, AppKey, NetworkServerAdr, ApplicationServerAdr)</text><line x1="610" y1="990" x2="1520" y2="990" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><text x="1065" y="1005" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Response</text><line x1="1520" y1="1038" x2="610" y2="1038" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="446" y="1053" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Get DeviceModel(x)/decoder</text><line x1="610" y1="1086" x2="282" y2="1086" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="277" y="1086" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"></rect></g><text x="449" y="1101" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Data</text><line x1="287" y1="1134" x2="610" y2="1134" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line><text x="610" y="1149" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Set Up Decoder</text><path d="M 610,1182 C 670,1172 670,1212 610,1202" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></path><text x="446" y="1227" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">PATCH Sensor(x)/Configuration</text><text x="446" y="1246" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Active</text><line x1="610" y1="1279" x2="282" y2="1279" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"></line><g><rect x="0" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="75" dy="0">Sensor Manager</tspan></text></g><g><rect x="207" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="282" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="282" dy="0">FROST-Server</tspan></text></g><g><rect x="535" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="610" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="610" dy="-7">LoRaWAN</tspan></text><text x="610" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="610" dy="7">Connector</tspan></text></g><g><rect x="845" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="920" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="920" dy="-7">LoRaWAN</tspan></text><text x="920" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="920" dy="7">Platform</tspan></text></g><g><rect x="1045" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1120" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1120" dy="-7">LoRaWAN</tspan></text><text x="1120" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1120" dy="7">Application Server</tspan></text></g><g><rect x="1245" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1320" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1320" dy="-7">LoRaWAN</tspan></text><text x="1320" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1320" dy="7">Network Server</tspan></text></g><g><rect x="1445" y="1299" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1520" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1520" dy="-7">LoRaWAN</tspan></text><text x="1520" y="1331.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: &quot;Open Sans&quot;, sans-serif;"><tspan x="1520" dy="7">Join Server</tspan></text></g></svg></pre>
</section><section id="demo"><div class="header-wrapper"><h4 id="x4-4-3-demo"><bdi class="secno">4.4.3 </bdi>Demo</h4><a class="self-link" href="#demo" aria-label="Permalink for Section 4.4.3"></a></div>
<p>A demo FROST-Server running the data model extension, with a connector to The Things Network and an onboarded sensor can be found at:<br><a href="https://ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1">https://ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1</a></p>
<p>A map that can also plot the data of the sensor can be found at:<br><a href="https://api4inspire.k8s.ilt-dmz.iosb.fraunhofer.de/servlet/is/272/">https://api4inspire.k8s.ilt-dmz.iosb.fraunhofer.de/servlet/is/272/</a></p>
<p>The Thing for the TTN-Connector, with (encrypted) DeviceSecrets and the current Configuration can be found using the following query: <a href="https://ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1/Things?%24filter%3Dname%20eq%20%27TTN%20LoRa%20Connector%27%26%24expand%3DDeviceSecrets%28%24select%3Dname%2Ctype%2Cvalue%29%2CConfigurations">link</a></p>
<pre><code aria-busy="false" class="hljs css">https://ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.<span class="hljs-number">1</span>/Things?
  $filter=name eq <span class="hljs-string">'TTN LoRa Connector'</span>&amp;
  $expand=<span class="hljs-built_in">DeviceSecrets</span>($select=name,type,value),Configurations
</code></pre>
<p>The Thing for the Elsys Sensor, with the Datastreams, ObservedProperties and latest Observations: <a href="https://ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1/Things?$filter=name%20eq%20%27Elsys_A81758FFFE035140%27&amp;$expand=Datastreams%28$select=name,description,unitOfMeasurement;$expand=ObservedProperty%28$select=name%29,Observations%28$select=phenomenonTime,result;$orderby=phenomenonTime%20desc;$top=1%29%29">link</a></p>
<pre><code aria-busy="false" class="hljs javascript"><span class="hljs-attr">https</span>:<span class="hljs-comment">//ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1/Things?</span>
  $filter=name eq <span class="hljs-string">'Elsys_A81758FFFE035140'</span>&amp;
  $expand=<span class="hljs-title class_">Datastreams</span>(
    $select=name,description,unitOfMeasurement;
    $expand=
      <span class="hljs-title class_">ObservedProperty</span>($select=name),
      <span class="hljs-title class_">Observations</span>(
        $select=phenomenonTime,result;
        $orderby=phenomenonTime desc;$top=<span class="hljs-number">1</span>))
</code></pre>
<p>The DeviceModel for the sensor, with Decoder, Sensors and ObservedProperties: <a href="https://ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1/DeviceModels?$filter=name%20eq%20%27Elsys%20ERS%202%27&amp;$expand=Decoder,Sensors%28$select=id,name;$expand=ObservedProperties%28$select=id,name%29%29">link</a></p>
<pre><code aria-busy="false" class="hljs javascript"><span class="hljs-attr">https</span>:<span class="hljs-comment">//ogc-demo.k8s.ilt-dmz.iosb.fraunhofer.de/FROST-OpenCitySense/v1.1/DeviceModels?</span>
  $filter=name eq <span class="hljs-string">'Elsys ERS 2'</span>&amp;
  $expand=
    <span class="hljs-title class_">Decoder</span>,
    <span class="hljs-title class_">Sensors</span>(
      $select=id,name;
      $expand=<span class="hljs-title class_">ObservedProperties</span>($select=id,name))
</code></pre>
<p>Note that the Decoder contains two large javascript text blobs that are used by the Connector to decode the binary payload of the Device.
The device sends this payload Base64 encoded, for example <code>AQDVAi8EAAEFAAYB6AcOHw==</code>.
This is first decoded to a JSON object, by the decoder provided by the manufacturer:</p>
<pre><code class="JSON hljs json" aria-busy="false"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span><span class="hljs-number">21.3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"humidity"</span><span class="hljs-punctuation">:</span><span class="hljs-number">47</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"light"</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"motion"</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"co2"</span><span class="hljs-punctuation">:</span><span class="hljs-number">488</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"vdd"</span><span class="hljs-punctuation">:</span><span class="hljs-number">3615</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>From the data in this JSON object Observations are generated, using the time in the LoRa message as phenomenonTime.
Because the names used in this JSON object are alse vendor specific, a second mapper is used to find the correct Datastream for each element.
These Observations are then added to the corresponding Datastream of the device.</p>
<p>The demo service is read-only.
For a demonstration of the onboarding process, please contact us by email at <a href="mailto:frost@iosb.fraunhofer.de">frost@iosb.fraunhofer.de</a>.</p>
</section><section id="future"><div class="header-wrapper"><h4 id="x4-4-4-future"><bdi class="secno">4.4.4 </bdi>Future</h4><a class="self-link" href="#future" aria-label="Permalink for Section 4.4.4"></a></div>
<p>OpenCitySense is a currently running internal research project of Fraunhofer IOSB, with the first demonstrators operational.
The architecture and data model will be open and free for use, but which parts of the software implementation will be open source has not been decided yet.</p>
</section></section></section>
  <section id="conclusion-0"><div class="header-wrapper"><h2 id="x5-conclusion"><bdi class="secno">5. </bdi>Conclusion</h2><a class="self-link" href="#conclusion-0" aria-label="Permalink for Section 5."></a></div>
<p>Geonovum started this testbed in order to explore how OGC sensor standards can help the Dutch public sector better organize and leverage their sensordata.
This testbed is a first step into exploring whether there is value in making one or more of these standards mandatory within the Dutch public sector.
The testbed certainly has provided new insights and ideas on how to further our investigations. We will summarize these here from Geonovum's perspective.</p>
<section id="suitability-sensordata-standards-for-dutch-public-sector"><div class="header-wrapper"><h3 id="x5-1-suitability-sensordata-standards-for-dutch-public-sector"><bdi class="secno">5.1 </bdi>Suitability Sensordata Standards for Dutch public sector</h3><a class="self-link" href="#suitability-sensordata-standards-for-dutch-public-sector" aria-label="Permalink for Section 5.1"></a></div>
<p>To Geonovum the work in research question 1 "Communicating with a collection of sensors" has shown there can be great utility in achieving more interoperability between sensors on the one hand, and applications used for sensordata gathering and analysis on the other. The standards were very much applicable to the usecases in this testbed, but would likely also extend to similar usecases such as water quality based sensor networks. The usecase from Rotterdam contained water levels. However, Dutch public sector stakeholders such as the <a href="https://www.ihw.nl/">Informatiehuis Water</a> and the <a href="https://www.hetwaterschapshuis.nl/">Waterschapshuis</a> would also need to be involved in any future discussion about mandatory standards for sensordata.</p>
<p>However, implementation of the standards within existing software for collecting sensordata from (a large number of) individual sensors is certainly not trivial and there are issues that need to be addressed before making one or more of these standards mandatory becomes a viable option. To Geonovum, the most important lesson is that the internal data model of the Nelen &amp; Schuurmans application (Lizard) is not easily mapped to the OMS based model of SensorThings API. According to Nelen &amp; Schuurmans their competitors also use similar internal data models. This warrents further investigation, involving these suppliers, in order to find solutions to overcome this issue.</p>
<p>Research question 2 "Visualization &amp; analysis" has shown, in Geonovum's opinion, that Sensorthings API is easily integrated into client applications that want to visualize sensordata. This certainly makes the case for SensorThings API as an interoberable mandatory standard for exposing (large) collections of sensordata a strong one. Visualization and dashboarding are of course not the only things clients would like to do with sensordata. Further investigation into other client usecases seems warrented, such as integration within tooling used by Data Scientists (Jupyter Notebook, Excel, Matlab etc...). Another point is that we only investigated Sensorthings API in this research question. Connected systems API should in theory also work well, as it can be an extension of <a href="https://ogcapi.ogc.org/features/">OGC API Features</a> (which is already a mandatory standard for the Dutch public sector). Connected Systems API should be especially suitable for usecases where sensordata is combined with other geospatial features.</p>
<p>The final issue we investigated in research question 3 "Initial device registration". As noted by Fraunhofer, this is a problem not just for sensors but for devices in general. The manufacturer cannot know in advance what these sensors and other devices will be used for as there are many different usecases and scenario's in which they can be employed. As Geonovum, we were pleasently surprised that Fraunhofer was already working towards a solution and was able to contribute a lot to the testbed. Although this is not a finished solution yet as demonstrated in the testbed, it holds promise to greatly simplify onboarding and management of sensor networks. Geonovum expects this could, when mature enough, become a standardized extension to the OGC SensorThings API standard.A hands-on trial with several stakeholders from the Dutch public sector is a logical next step.</p>
</section><section id="future-work"><div class="header-wrapper"><h3 id="x5-2-future-work"><bdi class="secno">5.2 </bdi>Future work</h3><a class="self-link" href="#future-work" aria-label="Permalink for Section 5.2"></a></div>
<p>As Geonovum we want to initiate the following follow-up actions now that the Testbed has ended:</p>
<ul>
<li><p>Investigate the mapping issue further with Nelen &amp; Schuurmans and their competitors. Can we find solutions that are acceptable and would make a mandatory standard for sensordata Feasible?</p>
</li>
<li><p>Discuss the results of the testbed with a broader group of stakeholders and at the very least Informatiehuis Water and the Waterschapshuis.</p>
</li>
<li><p>Test the suitability of SensorThings API and Connected Systems API for use in data science applications.</p>
</li>
<li><p>Test the suitability of Connected Systems API for dashboards and visualization.</p>
</li>
<li><p>Do a hands-on trial with initial device registration together with stakeholders from the Dutch public sector using our own sensors.</p>
</li>
</ul>
<p>If you read this report, are from the Dutch public sector and you have additional issues you would like to investigate or discuss with us, please contact Geonovum. All testbed implementations will remain available until at least the end of October 2025.</p>
</section></section>
  

  
  
  

  

  <section id="tof"><div class="header-wrapper"><h2 id="x6-list-of-figures"><bdi class="secno">6. </bdi>List of Figures</h2><a class="self-link" href="#tof" aria-label="Permalink for Section 6."></a></div><ul class="tof">
        <li class="tofline">
    <a class="tocxref" href="#fig-datamodels-of-sta-and-cs-api"><span class="self-link">Figure <bdi class="figno">1</bdi></span> <span class="fig-title">Datamodels of STA and CS API.</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#PoC Dataflow"><span class="self-link">Figure <bdi class="figno">2</bdi></span> <span class="fig-title">PoC Dataflow based on SensorThings API</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-example-of-a-post-request-in-the-frost-server-interface"><span class="self-link">Figure <bdi class="figno">3</bdi></span> <span class="fig-title">Example of a POST request in the FROST-server interface.</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-mapping-of-chirpstack-message-attributes-to-sta-entity-properties"><span class="self-link">Figure <bdi class="figno">4</bdi></span> <span class="fig-title">Mapping of Chirpstack message attributes to STA entity properties.</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#Lizard Datamodel"><span class="self-link">Figure <bdi class="figno">5</bdi></span> <span class="fig-title">Lizard Datamodel for Timeseries.</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-architecture"><span class="self-link">Figure <bdi class="figno">6</bdi></span> <span class="fig-title">Architecture</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-selecting-a-specific-sensor"><span class="self-link">Figure <bdi class="figno">7</bdi></span> <span class="fig-title">Selecting a specific sensor</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-select-an-area-on-the-map-and-list-sensor-data"><span class="self-link">Figure <bdi class="figno">8</bdi></span> <span class="fig-title">Select an area on the map and list sensor data</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-show-measurements-of-one-or-more-sensors"><span class="self-link">Figure <bdi class="figno">9</bdi></span> <span class="fig-title">Show measurements of one or more sensors</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-switch-api-source-to-use"><span class="self-link">Figure <bdi class="figno">10</bdi></span> <span class="fig-title">Switch API source to use</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-selecting-a-specific-sensor-0"><span class="self-link">Figure <bdi class="figno">11</bdi></span> <span class="fig-title">Selecting a specific sensor</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-select-an-area-on-the-map-and-list-sensor-data-0"><span class="self-link">Figure <bdi class="figno">12</bdi></span> <span class="fig-title">Select an area on the map and list sensor data</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-show-measurements-of-one-or-more-sensors-0"><span class="self-link">Figure <bdi class="figno">13</bdi></span> <span class="fig-title">Show measurements of one or more sensors</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-generic-iot-architecture-with-many-different-admin-interfaces"><span class="self-link">Figure <bdi class="figno">14</bdi></span> <span class="fig-title">Generic IoT Architecture with many different Admin interfaces</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-opencitysense-archtiecture"><span class="self-link">Figure <bdi class="figno">15</bdi></span> <span class="fig-title">OpenCitySense Archtiecture</span></a>
  </li><li class="tofline">
    <a class="tocxref" href="#fig-opencitysense-data-model"><span class="self-link">Figure <bdi class="figno">16</bdi></span> <span class="fig-title">OpenCitySense Data Model</span></a>
  </li>
      </ul></section>




<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><div class="sidelabel">Geonovum General - Recommendation</div><script src="https://gitdocumentatie.logius.nl/publicatie/respec/fixup.js"></script></body></html>